/*! For license information please see main.42f1afac.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case C:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Ee=null;function Ce(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),we(e.stateNode,e.type,t))}}function Se(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ie(e,t,n)}finally{Pe=!1,(null!==xe||null!==Ee)&&(Ne(),Te())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){De=!1}function Le(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,xt,Et,Ct,St=!1,Tt=[],It=null,Nt=null,Pt=null,Rt=new Map,At=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Ct(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){St=!1,null!==It&&Ut(It)&&(It=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Pt&&Ut(Pt)&&(Pt=null),Rt.forEach(jt),At.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==Pt&&zt(Pt,e),Rt.forEach(t),At.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var Bt=_.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=F({},ln,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(F({},ln,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Cn(){return En}var Sn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=an(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Rn),Dn=[9,13,27,32],On=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Mn=c&&"TextEvent"in window&&!Ln,Fn=c&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(_i(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,be(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Er={};function Cr(e){if(xr[e])return xr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Sr=Cr("animationend"),Tr=Cr("animationiteration"),Ir=Cr("animationstart"),Nr=Cr("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Pr.set(e,t),u(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Ar(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Ar(Sr,"onAnimationEnd"),Ar(Tr,"onAnimationIteration"),Ar(Ir,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var c=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,l),a=u}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=be(n),o=[];e:{var s=Pr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":l="focus",u=yn;break;case"focusout":l="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Sr:case Tr:case Ir:u=mn;break;case Nr:u=Pn;break;case"scroll":u=fn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ae(p,f))&&c.push(Wr(p,v,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(h=qe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:_i(u),d=null==l?s:_i(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,v=c),h=v,u&&l)e:{for(f=l,p=0,d=c=u;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)c=Gr(c),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Gr(c),f=Gr(f)}c=null}else c=null;null!==u&&Qr(o,s,u,c,!1),null!==l&&null!==h&&Qr(o,h,l,c,!0)}if("select"===(u=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=$n;else if(Hn(s))if(Xn)y=or;else{y=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?_i(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(m=Kr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Ae(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Ae(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var wi=[],xi=-1;function Ei(e){return{current:e}}function Ci(e){0>xi||(e.current=wi[xi],wi[xi]=null,xi--)}function Si(e,t){xi++,wi[xi]=e.current,e.current=t}var Ti={},Ii=Ei(Ti),Ni=Ei(!1),Pi=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ci(Ni),Ci(Ii)}function Oi(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Si(Ii,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=Ii.current,Si(Ii,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ni),Ci(Ii),Si(Ii,e)):Ci(Ni),Si(Ni,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,qi),i}finally{kt=t,Vi=!1}}return null}var Bi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){Bi[Hi++]=Ki,Bi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=Bi[--Hi],Bi[Hi]=null,Ki=Bi[--Hi],Bi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Al(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Al(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ei(null),ga=null,ka=null,_a=null;function ba(){_a=ka=ga=null}function wa(e){var t=ma.current;Ci(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Ca(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,c=l=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=d,u=h):c=c.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rl(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rl(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rl(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ba(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ca(a):(i=Ai(t)?Pi:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ca(a):(a=Ai(t)?Pi:Ii.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case w:return(t=jl(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?l(e,t,n,r):null;case w:return n.key===i?c(e,t,n,r):null;case A:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,h=a,v=a=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m,h=y}if(v===s.length)return n(i,h),ia&&Ji(i,v),l;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===c?l=h:c.sibling=h,c=h);return ia&&Ji(i,v),l}for(h=r(i,h);v<s.length;v++)null!==(y=p(h,i,v,s[v],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===c?l=y:c.sibling=y,c=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),l}function y(i,s,u,l){var c=L(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,l);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===h?c=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),c;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,l))&&(s=o(g,s,y),null===h?c=g:h.sibling=g,h=g);return ia&&Ji(i,y),c}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,l))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?c=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===x){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===A&&Qa(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ka(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===x?((a=Ml(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Ll(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jl(o,r.mode,u)).return=r,r=a}return s(r);case A:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return y(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ul(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Za),Si(Za,t)}function io(){Ci(Za),Ci(eo),Ci(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ci(Za),Ci(eo))}var so=Ei(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,_o=0,bo=0;function wo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=ls,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Co(){var e=0!==_o;return _o=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var h=c.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=f,s=r):l=l.next=f,vo.lanes|=h,Fu|=h}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Ao(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,_s=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Pu)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function Bo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return qo(2048,8,e,t)}function Wo(e,t){return qo(4,2,e,t)}function Ko(e,t){return qo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Fu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){rl(n,e,r,tl()),as(n,t,r)}}function ns(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ia(e,t,i,r))&&(rl(n,e,r,i=tl()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ca,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ca,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pu)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Pu.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ca,useCallback:$o,useContext:Ca,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ca,useCallback:$o,useContext:Ca,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:Po,useRef:Vo,useState:function(){return Po(Io)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Po(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Ku=r),fs(0,t)},n}function vs(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=_.ReactCurrentOwner,_s=!1;function bs(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=Co(),null===e||_s?(ia&&n&&ea(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Es(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Ol(a,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return Ts(e,t,n,r,i)}function Cs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ou,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ou,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ou,Du),Du|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ou,Du),Du|=r;return bs(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Ai(n)?Pi:Ii.current;return a=Ri(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=Co(),null===e||_s?(ia&&r&&ea(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Is(e,t,n,r,i){if(Ai(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Hs(e,t),Ba(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ca(l):l=Ri(t,l=Ai(n)?Pi:Ii.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Ha(t,o,r,l),Pa=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ni.current||Pa?("function"===typeof c&&(Va(t,n,c,r),u=t.memoizedState),(s=Pa||qa(t,n,s,r,f,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ya(t.type,s),o.props=l,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ca(u):u=Ri(t,u=Ai(n)?Pi:Ii.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Ha(t,o,r,u),Pa=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ni.current||Pa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(l=Pa||qa(t,n,l,r,f,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Ss(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,i){return da(),pa(i),t.flags|=256,bs(e,t,n,r),t.child}var As,Ds,Os,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Us(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(so,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fl(u,i,0,null),e=Ml(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ms,e):js(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),_s||u){if(null!==(r=Pu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rl(r,e,i,-1))}return yl(),Vs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Il.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=js(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ol(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Ol(r,s):(s=Ml(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Ol(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function js(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,a);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ai(t.type)&&Di(),Gs(t),null;case 3:return r=t.stateNode,io(),Ci(Ni),Ci(Ii),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sl(aa),aa=null))),Ds(e,t),Gs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,As(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ye(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&jr("scroll",e):null!=c&&k(e,o,c,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Ci(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(sl(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):yl())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return io(),Ds(e,t),null===e&&qr(t.stateNode.containerInfo),Gs(t),null;case 10:return wa(t.type._context),Gs(t),null;case 19:if(Ci(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ks(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ks(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bu&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Gs(t),null}else 2*Xe()-o.renderingStartTime>Bu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=so.current,Si(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return fl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ci(Ni),Ci(Ii),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ci(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&jr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cl(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Cl(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var hu=null,fu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||eu(n,t);case 6:var r=hu,i=fu;hu=null,du(e,t,n),fu=i,null!==(hu=r)&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=fu,hu=n.stateNode.containerInfo,fu=!0,du(e,t,n),hu=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Xs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cl(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,du(e,t,n),Xs=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,fu=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===hu)throw Error(a(160));pu(o,s,i),hu=null,fu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Cl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(y){Cl(e,e.return,y)}try{ru(5,e,e.return)}catch(y){Cl(e,e.return,y)}}break;case 1:yu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(yu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Cl(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),ke(u,s);var c=ke(u,o);for(s=0;s<l.length;s+=2){var h=l[s],f=l[s+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,c)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Cl(e,e.return,y)}}break;case 6:if(yu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Cl(e,e.return,y)}}break;case 3:if(yu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Cl(e,e.return,y)}break;case 4:default:yu(t,e),gu(e);break;case 13:yu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qu=Xe())),4&r&&vu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(c=Xs)||h,yu(t,e),Xs=c):yu(t,e),gu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(f=Zs=h;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Cl(r,n,y)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,Zs=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(y){Cl(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){Cl(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Cl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,_u(e,t,n)}function _u(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=$s;var l=Xs;if($s=o,(Xs=u)&&!l)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?xu(i):null!==u?(u.return=o,Zs=u):xu(i);for(;null!==a;)Zs=a,_u(a,t,n),a=a.sibling;Zs=i,$s=s,Xs=l}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):bu(e)}}function bu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&au(t)}catch(d){Cl(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function wu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Cl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Cl(t,i,u)}}var a=t.return;try{au(t)}catch(u){Cl(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Cl(t,o,u)}}}catch(u){Cl(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Eu,Cu=Math.ceil,Su=_.ReactCurrentDispatcher,Tu=_.ReactCurrentOwner,Iu=_.ReactCurrentBatchConfig,Nu=0,Pu=null,Ru=null,Au=0,Du=0,Ou=Ei(0),Lu=0,Mu=null,Fu=0,Uu=0,ju=0,Vu=null,zu=null,qu=0,Bu=1/0,Hu=null,Wu=!1,Ku=null,Gu=null,Qu=!1,Yu=null,$u=0,Xu=0,Ju=null,Zu=-1,el=0;function tl(){return 0!==(6&Nu)?Xe():-1!==Zu?Zu:Zu=Xe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==Au?Au&-Au:null!==va.transition?(0===el&&(el=vt()),el):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rl(e,t,n,r){if(50<Xu)throw Xu=0,Ju=null,Error(a(185));mt(e,n,r),0!==(2&Nu)&&e===Pu||(e===Pu&&(0===(2&Nu)&&(Uu|=n),4===Lu&&ul(e,Au)),il(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(Bu=Xe()+500,ji&&qi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Pu?Au:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(ll.bind(null,e)):zi(ll.bind(null,e)),oi((function(){0===(6&Nu)&&qi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pl(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if(Zu=-1,el=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(xl()&&e.callbackNode!==n)return null;var r=ft(e,e===Pu?Au:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Nu;Nu|=2;var o=vl();for(Pu===e&&Au===t||(Hu=null,Bu=Xe()+500,dl(e,t));;)try{kl();break}catch(u){pl(e,u)}ba(),Su.current=o,Nu=i,null!==Ru?t=0:(Pu=null,Au=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Mu,dl(e,0),ul(e,r),il(e,Xe()),n;if(6===t)ul(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Mu,dl(e,0),ul(e,r),il(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wl(e,zu,Hu);break;case 3:if(ul(e,r),(130023424&r)===r&&10<(t=qu+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wl.bind(null,e,zu,Hu),t);break}wl(e,zu,Hu);break;case 4:if(ul(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cu(r/1960))-r)){e.timeoutHandle=ri(wl.bind(null,e,zu,Hu),r);break}wl(e,zu,Hu);break;default:throw Error(a(329))}}}return il(e,Xe()),e.callbackNode===n?al.bind(null,e):null}function ol(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=zu,zu=n,null!==t&&sl(t)),e}function sl(e){null===zu?zu=e:zu.push.apply(zu,e)}function ul(e,t){for(t&=~ju,t&=~Uu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Nu))throw Error(a(327));xl();var t=ft(e,0);if(0===(1&t))return il(e,Xe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Mu,dl(e,0),ul(e,t),il(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,zu,Hu),il(e,Xe()),null}function cl(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(Bu=Xe()+500,ji&&qi())}}function hl(e){null!==Yu&&0===Yu.tag&&0===(6&Nu)&&xl();var t=Nu;Nu|=1;var n=Iu.transition,r=kt;try{if(Iu.transition=null,kt=1,e)return e()}finally{kt=r,Iu.transition=n,0===(6&(Nu=t))&&qi()}}function fl(){Du=Ou.current,Ci(Ou)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ci(Ni),Ci(Ii),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ci(so);break;case 10:wa(r.type._context);break;case 22:case 23:fl()}n=n.return}if(Pu=e,Ru=e=Ol(e.current,null),Au=Du=t,Lu=0,Mu=null,ju=Uu=Fu=0,zu=Vu=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pl(e,t){for(;;){var n=Ru;try{if(ba(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,_o=0,Tu.current=null,null===n||null===n.return){Lu=1,Mu=t,Ru=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Au,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ys(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(l),t.updateQueue=y}else v.add(l);break e}if(0===(1&t)){ys(o,c,t),yl();break e}l=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),pa(cs(l,u));break e}}o=l=cs(l,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,l,t));break e;case 1:u=l;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gu||!Gu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}bl(n)}catch(_){t=_,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function vl(){var e=Su.current;return Su.current=os,null===e?os:e}function yl(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Pu||0===(268435455&Fu)&&0===(268435455&Uu)||ul(Pu,Au)}function ml(e,t){var n=Nu;Nu|=2;var r=vl();for(Pu===e&&Au===t||(Hu=null,dl(e,t));;)try{gl();break}catch(i){pl(e,i)}if(ba(),Nu=n,Su.current=r,null!==Ru)throw Error(a(261));return Pu=null,Au=0,Lu}function gl(){for(;null!==Ru;)_l(Ru)}function kl(){for(;null!==Ru&&!Ye();)_l(Ru)}function _l(e){var t=Eu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?bl(e):Ru=t,Tu.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Du)))return void(Ru=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Lu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Lu&&(Lu=5)}function wl(e,t,n){var r=kt,i=Iu.transition;try{Iu.transition=null,kt=1,function(e,t,n,r){do{xl()}while(null!==Yu);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Pu&&(Ru=Pu=null,Au=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Pl(tt,(function(){return xl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Iu.transition,Iu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Tu.current=null,function(e,t){if(ei=Ht,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,u=-1,l=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(l=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(u=s),d===o&&++h===r&&(l=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(b){Cl(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),mu(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,ku(n,e,i),$e(),Nu=u,kt=s,Iu.transition=o}else e.current=n;if(Qu&&(Qu=!1,Yu=e,$u=i),o=e.pendingLanes,0===o&&(Gu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Ku,Ku=null,e;0!==(1&$u)&&0!==e.tag&&xl(),o=e.pendingLanes,0!==(1&o)?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,qi()}(e,t,n,r)}finally{Iu.transition=i,kt=r}return null}function xl(){if(null!==Yu){var e=_t($u),t=Iu.transition,n=kt;try{if(Iu.transition=null,kt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,$u=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Zs=c;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:ru(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zs=f;else for(;null!==Zs;){var d=(h=Zs).sibling,p=h.return;if(ou(h),h===c){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var _=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Zs=_;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(w){Cl(u,u.return,w)}if(u===s){Zs=null;break e}var b=u.sibling;if(null!==b){b.return=u.return,Zs=b;break e}Zs=u.return}}if(Nu=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Iu.transition=t}}return!1}function El(e,t,n){e=Oa(e,t=ps(0,t=cs(n,t),1),1),t=tl(),null!==e&&(mt(e,1,t),il(e,t))}function Cl(e,t,n){if(3===e.tag)El(e,e,n);else for(;null!==t;){if(3===t.tag){El(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Oa(t,e=vs(t,e=cs(n,e),1),1),e=tl(),null!==t&&(mt(t,1,e),il(t,e));break}}t=t.return}}function Sl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Au&n)===n&&(4===Lu||3===Lu&&(130023424&Au)===Au&&500>Xe()-qu?dl(e,0):ju|=n),il(e,t)}function Tl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tl();null!==(e=Na(e,t))&&(mt(e,t,n),il(e,n))}function Il(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tl(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tl(e,n)}function Pl(e,t){return Ge(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Al(e,t,n,r){return new Rl(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Al(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Dl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Ml(n.children,i,o,t);case E:s=8,i|=8;break;case C:return(e=Al(12,n,t,2|i)).elementType=C,e.lanes=o,e;case N:return(e=Al(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Al(19,n,t,i)).elementType=P,e.lanes=o,e;case D:return Fl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case T:s=9;break e;case I:s=11;break e;case R:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Al(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Al(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Al(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Al(6,e,null,t)).lanes=n,e}function jl(e,t,n){return(t=Al(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,a,o,s,u){return e=new Vl(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Al(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function ql(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function Bl(e,t,n,r,i,a,o,s,u){return(e=zl(n,r,!0,e,0,a,0,s,u)).context=ql(null),n=e.current,(a=Da(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),il(e,r),e}function Hl(e,t,n,r){var i=t.current,a=tl(),o=nl(i);return n=ql(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rl(e,i,o,a),La(e,i,o)),o}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}Eu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),da();break;case 5:ao(t);break;case 1:Ai(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Us(e,t,n):(Si(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Si(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Ws(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=Co();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ss(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&la(t),null;case 13:return Us(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Da(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Ca(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xs(e,t,r,i=ya(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Hs(e,t),t.tag=1,Ai(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),Ba(t,r,i),Wa(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return Cs(e,t,n)}throw Error(a(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wl(o);s.call(e)}}Hl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wl(o);a.call(e)}}var o=Bl(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wl(u);s.call(e)}}var u=zl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=u,e[pi]=u.current,qr(8===e.nodeType?e.parentNode:e),hl((function(){Hl(t,u,n,r)})),u}(n,t,e,i,r);return Wl(o)}$l.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hl(e,t,null,null)},$l.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Hl(null,e,null,null)})),t[pi]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),il(t,Xe()),0===(6&Nu)&&(Bu=Xe()+500,qi()))}break;case 13:hl((function(){var t=Na(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Gl(e,1)}},wt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rl(t,e,134217728,tl());Gl(e,134217728)}},xt=function(e){if(13===e.tag){var t=nl(e),n=Na(e,t);if(null!==n)rl(n,e,t,tl());Gl(e,t)}},Et=function(){return kt},Ct=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cl,Ne=hl;var tc={usingClientEntryPoint:!1,Events:[ki,_i,bi,Se,Te,cl]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(a(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $l(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(hl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var _=k.prototype=new g;_.constructor=k,v(_,m.prototype),_.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",b(e))for(var l=0;l<e.length;l++){var c=a+I(s=e[l],l);u+=N(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,c=a+I(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},D={transition:null},O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)w.call(t,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function b(e){if(y=!1,_(e),!v)if(null!==r(l))v=!0,D(w);else{var t=r(c);null!==t&&O(b,t.startTime-e)}}function w(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(_(n),f=r(l);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(l)&&i(l),_(n)}else i(l);f=r(l)}if(null!==f)var u=!0;else{var h=r(c);null!==h&&O(b,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,C=null,S=-1,T=5,I=-1;function N(){return!(t.unstable_now()-I<T)}function P(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?x():(E=!1,C=null)}}else E=!1}if("function"===typeof k)x=function(){k(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=P,x=function(){A.postMessage(null)}}else x=function(){m(P,0)};function D(e){C=e,E||(E=!0,x())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(y?(g(S),S=-1):y=!0,O(b,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,D(w))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e,t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||s(e,t)||u()}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return o(e)}(e)||c(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){var t=_();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,n)}}function x(e,t,n){return x=_()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&m(i,n.prototype),i},x.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return x(e,arguments,k(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)},E(e)}function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var T,I="popstate";function N(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function P(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function A(e,t,n,r){return void 0===n&&(n=null),S({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?O(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function D(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function O(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function L(t,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,l=void 0!==u&&u,c=s.history,h=e.Pop,f=null,d=p();function p(){return(c.state||{idx:null}).idx}function v(){h=e.Pop;var t=p(),n=null==t?null:t-d;d=t,f&&f({action:h,location:m.location,delta:n})}function y(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:D(e);return N(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,c.replaceState(S({},c.state,{idx:d}),""));var m={get action(){return h},get location(){return t(s,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(I,v),f=e,function(){s.removeEventListener(I,v),f=null}},createHref:function(e){return n(s,e)},createURL:y,encodeLocation:function(e){var t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){h=e.Push;var i=A(m.location,t,n);r&&r(i,t);var a=R(i,d=p()+1),o=m.createHref(i);try{c.pushState(a,"",o)}catch(fr){if(fr instanceof DOMException&&"DataCloneError"===fr.name)throw fr;s.location.assign(o)}l&&f&&f({action:h,location:m.location,delta:1})},replace:function(t,n){h=e.Replace;var i=A(m.location,t,n);r&&r(i,t);var a=R(i,d=p()),o=m.createHref(i);c.replaceState(a,"",o),l&&f&&f({action:h,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(T||(T={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function M(e,t,n){void 0===n&&(n="/");var r=$(("string"===typeof t?O(t):t).pathname||"/",n);if(null==r)return null;var i=F(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=G(i[o],Y(r));return a}function F(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(N(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=ee([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(N(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),F(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:K(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=C(U(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function U(e){var t=e.split("/");if(0===t.length)return[];var n,r=a(n=t)||c(n)||s(n)||u(),i=r[0],o=r.slice(1),l=i.endsWith("?"),f=i.replace(/\?$/,"");if(0===o.length)return l?[f,""]:[f];var d=U(o.join("/")),p=[];return p.push.apply(p,h(d.map((function(e){return""===e?f:[f,e].join("/")})))),l&&p.push.apply(p,h(d)),p.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var j=/^:\w+$/,V=3,z=2,q=1,B=10,H=-2,W=function(e){return"*"===e};function K(e,t){var n=e.split("/"),r=n.length;return n.some(W)&&(r+=H),t&&(r+=z),n.filter((function(e){return!W(e)})).reduce((function(e,t){return e+(j.test(t)?V:""===t?q:B)}),r)}function G(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=Q({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var h=s.route;a.push({params:r,pathname:ee([i,c.pathname]),pathnameBase:te(ee([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=ee([i,c.pathnameBase]))}return a}function Q(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);P("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(fr){return P(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+fr+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:s,pathnameBase:u,pattern:e}}function Y(e){try{return decodeURI(e)}catch(fr){return P(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+fr+")."),e}}function $(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function X(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function J(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Z(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=O(e):(N(!(i=S({},e)).pathname||!i.pathname.includes("?"),X("?","pathname","search",i)),N(!i.pathname||!i.pathname.includes("#"),X("#","pathname","hash",i)),N(!i.search||!i.search.includes("#"),X("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;i.pathname=l.join("/")}a=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?O(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ne(a),hash:re(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!f||(c.pathname+="/"),c}var ee=function(e){return e.join("/").replace(/\/\/+/g,"/")},te=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ne=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},re=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ie=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(E(Error));function ae(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var oe=["post","put","patch","delete"],se=(new Set(oe),["get"].concat(oe));new Set(se),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}var le=t.createContext(null);var ce=t.createContext(null);var he=t.createContext(null);var fe=t.createContext(null);var de=t.createContext(null);var pe=t.createContext({outlet:null,matches:[],isDataRoute:!1});var ve=t.createContext(null);function ye(){return null!=t.useContext(de)}function me(){return ye()||N(!1),t.useContext(de).location}function ge(e){t.useContext(fe).static||t.useLayoutEffect(e)}function ke(){return t.useContext(pe).isDataRoute?function(){var e=Ne(xe.UseNavigateStable).router,n=Re(Ee.UseNavigateStable),r=t.useRef(!1);ge((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,ue({fromRouteId:n},i)))}),[e,n]);return i}():function(){ye()||N(!1);var e=t.useContext(le),n=t.useContext(fe),r=n.basename,i=n.navigator,a=t.useContext(pe).matches,o=me().pathname,s=JSON.stringify(J(a).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);return ge((function(){u.current=!0})),t.useCallback((function(t,n){if(void 0===n&&(n={}),u.current)if("number"!==typeof t){var a=Z(t,JSON.parse(s),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:ee([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,s,o,e])}()}function _e(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(pe).matches,a=me().pathname,o=JSON.stringify(J(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return Z(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function be(n,r,i){ye()||N(!1);var a,o=t.useContext(fe).navigator,s=t.useContext(pe).matches,u=s[s.length-1],l=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),h=(u&&u.route,me());if(r){var f,d="string"===typeof r?O(r):r;"/"===c||(null==(f=d.pathname)?void 0:f.startsWith(c))||N(!1),a=d}else a=h;var p=a.pathname||"/",v=M(n,{pathname:"/"===c?p:p.slice(c.length)||"/"});var y=Ie(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:ee([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:ee([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,i);return r&&y?t.createElement(de.Provider,{value:{location:ue({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:e.Pop}},y):y}function we(){var e=function(){var e,n=t.useContext(ve),r=Pe(Ee.UseRouteError),i=Re(Ee.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=ae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var xe,Ee,Ce=t.createElement(we,null),Se=function(e){g(r,e);var n=w(r);function r(e){var t;return f(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return y(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(pe.Provider,{value:this.props.routeContext},t.createElement(ve.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function Te(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(le);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(pe.Provider,{value:n},i)}function Ie(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,s=null==(i=r)?void 0:i.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||N(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(e,i,a){var u=i.route.id?null==s?void 0:s[i.route.id]:null,l=null;r&&(l=i.route.errorElement||Ce);var c=n.concat(o.slice(0,a+1)),h=function(){var n;return n=u?l:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(Te,{match:i,routeContext:{outlet:e,matches:c,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(Se,{location:r.location,revalidation:r.revalidation,component:l,error:u,children:h(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):h()}),null)}function Ne(e){var n=t.useContext(le);return n||N(!1),n}function Pe(e){var n=t.useContext(ce);return n||N(!1),n}function Re(e){var n=function(e){var n=t.useContext(pe);return n||N(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||N(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(xe||(xe={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Ee||(Ee={}));var Ae;r.startTransition;function De(e){N(!1)}function Oe(n){var r=n.basename,i=void 0===r?"/":r,a=n.children,o=void 0===a?null:a,s=n.location,u=n.navigationType,l=void 0===u?e.Pop:u,c=n.navigator,h=n.static,f=void 0!==h&&h;ye()&&N(!1);var d=i.replace(/^\/*/,"/"),p=t.useMemo((function(){return{basename:d,navigator:c,static:f}}),[d,c,f]);"string"===typeof s&&(s=O(s));var v=s,y=v.pathname,m=void 0===y?"/":y,g=v.search,k=void 0===g?"":g,_=v.hash,b=void 0===_?"":_,w=v.state,x=void 0===w?null:w,E=v.key,C=void 0===E?"default":E,S=t.useMemo((function(){var e=$(m,d);return null==e?null:{location:{pathname:e,search:k,hash:b,state:x,key:C},navigationType:l}}),[d,m,k,b,x,C,l]);return null==S?null:t.createElement(fe.Provider,{value:p},t.createElement(de.Provider,{children:o,value:S}))}function Le(e){var t=e.children,n=e.location;return be(Fe(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ae||(Ae={}));var Me=new Promise((function(){}));t.Component;function Fe(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(h(n),[i]);if(e.type!==t.Fragment){e.type!==De&&N(!1),e.props.index&&e.props.children&&N(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Fe(e.props.children,a)),r.push(o)}else r.push.apply(r,Fe(e.props.children,a))}})),r}function Ue(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(){ze=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(N){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),s=new S(i||[]);return r(o,"_invoke",{value:w(e,n,s)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var h={};function f(){}function p(){}function v(){}var y={};u(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(T([])));g&&g!==t&&n.call(g,a)&&(y=g);var k=v.prototype=f.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,s){var u=c(e[r],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==d(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=c(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},_(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function qe(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(fr){return void n(fr)}s.done?t(u):Promise.resolve(u).then(r,i)}function Be(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){qe(a,r,i,o,s,"next",e)}function s(e){qe(a,r,i,o,s,"throw",e)}o(void 0)}))}}var He=!1,We=!1,Ke="${JSCORE_VERSION}",Ge=function(e,t){if(!e)throw Qe(t)},Qe=function(e){return new Error("Firebase Database ("+Ke+") INTERNAL ASSERT FAILED: "+e)},Ye=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},$e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|l>>6,d=63&l;u||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ye(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new Xe;var l=a<<2|o>>4;if(r.push(l),64!==s){var c=o<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Xe=function(e){g(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return y(n)}(E(Error)),Je=function(e){var t=Ye(e);return $e.encodeByteArray(t,!0)},Ze=function(e){return Je(e).replace(/\./g,"")},et=function(e){try{return $e.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function tt(e){return nt(void 0,e)}function nt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=nt(e[n],t[n]));return e}var rt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},it=function(){try{return rt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/react-nim",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&et(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},at=function(e){var t,n;return null===(n=null===(t=it())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},ot=function(e){var t=at(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},st=function(){var e;return null===(e=it())||void 0===e?void 0:e.config},ut=function(e){var t;return null===(t=it())||void 0===t?void 0:t["_".concat(e)]},lt=function(){function e(){var t=this;f(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ct(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ze(JSON.stringify({alg:"none",type:"JWT"})),Ze(JSON.stringify(a)),""].join(".")}function ht(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ft(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function dt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function pt(){return!0===He||!0===We}function vt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var yt=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),mt.prototype.create),a}return y(n)}(E(Error)),mt=function(){function e(t,n,r){f(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(gt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new yt(n,a,t)}}]),e}();var gt=/\{\$([^}]+)}/g;function kt(e){return JSON.parse(e)}function _t(e){return JSON.stringify(e)}var bt=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=kt(et(a[0])||""),n=kt(et(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function wt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function xt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Et(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ct(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function St(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Tt(s)&&Tt(u)){if(!St(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=r;l<c.length;l++){var h=c[l];if(!n.includes(h))return!1}return!0}function Tt(e){return null!==e&&"object"===typeof e}function It(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Nt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Pt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Rt=function(){function e(){f(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return y(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,l=this.chain_[0],c=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^c&(h^f),u=1518500249):(s=c^h^f,u=1859775393):p<60?(s=c&h|f&(c|h),u=2400959708):(s=c^h^f,u=3395469782);var v=(l<<5|l>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(c<<30|c>>>2),c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var At=function(){function e(t,n){var r=this;f(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=C(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Dt),void 0===r.error&&(r.error=Dt),void 0===r.complete&&(r.complete=Dt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Dt(){}function Ot(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Lt=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Mt(e){return e&&e._delegate?e._delegate:e}var Ft=function(){function e(t,n,r){f(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ut="[DEFAULT]",jt=function(){function e(t,n){f(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new lt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ut})}catch(u){}var t,n=C(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Be(ze().mark((function e(){var t;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=C(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ut?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return this.component?this.component.multipleInstances?e:Ut:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Vt,zt,qt=function(){function e(t){f(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new jt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Bt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(zt||(zt={}));var Ht={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},Wt=zt.INFO,Kt=(Ue(Vt={},zt.DEBUG,"log"),Ue(Vt,zt.VERBOSE,"log"),Ue(Vt,zt.INFO,"info"),Ue(Vt,zt.WARN,"warn"),Ue(Vt,zt.ERROR,"error"),Vt),Gt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Kt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Qt=function(){function e(t){f(this,e),this.name=t,this._logLevel=Wt,this._logHandler=Gt,this._userLogHandler=null,Bt.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in zt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ht[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.DEBUG].concat(t)),this._logHandler.apply(this,[this,zt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,zt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.INFO].concat(t)),this._logHandler.apply(this,[this,zt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.WARN].concat(t)),this._logHandler.apply(this,[this,zt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zt.ERROR].concat(t)),this._logHandler.apply(this,[this,zt.ERROR].concat(t))}}]),e}();var Yt,$t,Xt=function(e,t){return t.some((function(t){return e instanceof t}))};var Jt=new WeakMap,Zt=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap;var rn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Zt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||en.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function an(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($t||($t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(un(this),n),sn(Jt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sn(e.apply(un(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[un(this),t].concat(r));return en.set(a,t.sort?t.sort():[t]),sn(a)}}function on(e){return"function"===typeof e?an(e):(e instanceof IDBTransaction&&function(e){if(!Zt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Zt.set(e,t)}}(e),Xt(e,Yt||(Yt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,rn):e)}function sn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(sn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Jt.set(t,e)})).catch((function(){})),nn.set(t,e),t}(e);if(tn.has(e))return tn.get(e);var t=on(e);return t!==e&&(tn.set(e,t),nn.set(t,e)),t}var un=function(e){return nn.get(e)};var ln,cn,hn=["get","getKey","getAll","getAllKeys","count"],fn=["put","add","delete","clear"],dn=new Map;function pn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(dn.get(t))return dn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=fn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||hn.includes(n))){var a=function(){var e=Be(ze().mark((function e(t){var a,o,s,u,l,c,h=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=h[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return dn.set(t,a),a}}}rn=function(e){return Ve(Ve({},e),{},{get:function(t,n,r){return pn(t,n)||e.get(t,n,r)},has:function(t,n){return!!pn(t,n)||e.has(t,n)}})}(rn);var vn=function(){function e(t){f(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var yn="@firebase/app",mn="0.9.14",gn=new Qt("@firebase/app"),kn="[DEFAULT]",_n=(Ue(ln={},yn,"fire-core"),Ue(ln,"@firebase/app-compat","fire-core-compat"),Ue(ln,"@firebase/analytics","fire-analytics"),Ue(ln,"@firebase/analytics-compat","fire-analytics-compat"),Ue(ln,"@firebase/app-check","fire-app-check"),Ue(ln,"@firebase/app-check-compat","fire-app-check-compat"),Ue(ln,"@firebase/auth","fire-auth"),Ue(ln,"@firebase/auth-compat","fire-auth-compat"),Ue(ln,"@firebase/database","fire-rtdb"),Ue(ln,"@firebase/database-compat","fire-rtdb-compat"),Ue(ln,"@firebase/functions","fire-fn"),Ue(ln,"@firebase/functions-compat","fire-fn-compat"),Ue(ln,"@firebase/installations","fire-iid"),Ue(ln,"@firebase/installations-compat","fire-iid-compat"),Ue(ln,"@firebase/messaging","fire-fcm"),Ue(ln,"@firebase/messaging-compat","fire-fcm-compat"),Ue(ln,"@firebase/performance","fire-perf"),Ue(ln,"@firebase/performance-compat","fire-perf-compat"),Ue(ln,"@firebase/remote-config","fire-rc"),Ue(ln,"@firebase/remote-config-compat","fire-rc-compat"),Ue(ln,"@firebase/storage","fire-gcs"),Ue(ln,"@firebase/storage-compat","fire-gcs-compat"),Ue(ln,"@firebase/firestore","fire-fst"),Ue(ln,"@firebase/firestore-compat","fire-fst-compat"),Ue(ln,"fire-js","fire-js"),Ue(ln,"firebase","fire-js-all"),ln),bn=new Map,wn=new Map;function xn(e,t){try{e.container.addComponent(t)}catch(n){gn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function En(e){var t=e.name;if(wn.has(t))return gn.debug("There were multiple attempts to register component ".concat(t,".")),!1;wn.set(t,e);var n,r=C(bn.values());try{for(r.s();!(n=r.n()).done;){xn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Cn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Sn=(Ue(cn={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Ue(cn,"bad-app-name","Illegal App name: '{$appName}"),Ue(cn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ue(cn,"app-deleted","Firebase App named '{$appName}' already deleted"),Ue(cn,"no-options","Need to provide options, when not being deployed to hosting via source."),Ue(cn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ue(cn,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ue(cn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ue(cn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ue(cn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ue(cn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),cn),Tn=new mt("app","Firebase",Sn),In=function(){function e(t,n,r){var i=this;f(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ft("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}]),e}(),Nn="10.0.0";function Pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:kn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Tn.create("bad-app-name",{appName:String(i)});if(n||(n=st()),!n)throw Tn.create("no-options");var a=bn.get(i);if(a){if(St(n,a.options)&&St(r,a.config))return a;throw Tn.create("duplicate-app",{appName:i})}var o,s=new qt(i),u=C(wn.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s.addComponent(l)}}catch(h){u.e(h)}finally{u.f()}var c=new In(n,r,s);return bn.set(i,c),c}function Rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn,t=bn.get(e);if(!t&&e===kn&&st())return Pn();if(!t)throw Tn.create("no-app",{appName:e});return t}function An(e,t,n){var r,i=null!==(r=_n[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void gn.warn(s.join(" "))}En(new Ft("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var Dn="firebase-heartbeat-database",On=1,Ln="firebase-heartbeat-store",Mn=null;function Fn(){return Mn||(Mn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=sn(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(sn(s.result),e.oldVersion,e.newVersion,sn(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(Dn,On,{upgrade:function(e,t){if(0===t)e.createObjectStore(Ln)}}).catch((function(e){throw Tn.create("idb-open",{originalErrorMessage:e.message})}))),Mn}function Un(e){return jn.apply(this,arguments)}function jn(){return jn=Be(ze().mark((function e(t){var n,r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fn();case 3:return n=e.sent,e.next=6,n.transaction(Ln).objectStore(Ln).get(qn(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof yt?gn.warn(e.t0.message):(i=Tn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),gn.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),jn.apply(this,arguments)}function Vn(e,t){return zn.apply(this,arguments)}function zn(){return zn=Be(ze().mark((function e(t,n){var r,i,a,o;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fn();case 3:return r=e.sent,i=r.transaction(Ln,"readwrite"),a=i.objectStore(Ln),e.next=8,a.put(n,qn(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof yt?gn.warn(e.t0.message):(o=Tn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),gn.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),zn.apply(this,arguments)}function qn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Bn=function(){function e(t){var n=this;f(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Gn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=Be(ze().mark((function e(){var t,n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Hn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Be(ze().mark((function e(){var t,n,r,i,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Hn(),n=Wn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Ze(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Hn(){return(new Date).toISOString().substring(0,10)}function Wn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=C(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Qn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Qn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Kn,Gn=function(){function e(t){f(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(fr){t(fr)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Be(ze().mark((function e(){var t;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Un(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Be(ze().mark((function e(t){var n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Vn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Be(ze().mark((function e(t){var n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Vn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Qn(e){return Ze(JSON.stringify({version:2,heartbeats:e})).length}Kn="",En(new Ft("platform-logger",(function(e){return new vn(e)}),"PRIVATE")),En(new Ft("heartbeat",(function(e){return new Bn(e)}),"PRIVATE")),An(yn,mn,Kn),An(yn,mn,"esm2017"),An("fire-js","");var Yn="@firebase/database",$n="1.0.0",Xn="";var Jn=function(){function e(t){f(this,e),this.domStorage_=t,this.prefix_="firebase:"}return y(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_t(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:kt(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Zn=function(){function e(){f(this,e),this.cache_={},this.isInMemoryStorage=!0}return y(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return wt(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),er=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Jn(t)}}catch(n){}return new Zn},tr=er("localStorage"),nr=er("sessionStorage"),rr=new Qt("@firebase/database"),ir=function(){var e=1;return function(){return e++}}(),ar=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ge(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Rt;n.update(t);var r=n.digest();return $e.encodeByteArray(r)},or=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?_t(r):r,t+=" "}return t},sr=null,ur=!0,lr=function(e,t){Ge(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(rr.logLevel=zt.VERBOSE,sr=rr.log.bind(rr),t&&nr.set("logging_enabled",!0)):"function"===typeof e?sr=e:(sr=null,nr.remove("logging_enabled"))},cr=function(){if(!0===ur&&(ur=!1,null===sr&&!0===nr.get("logging_enabled")&&lr(!0)),sr){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=or.apply(null,t);sr(r)}},hr=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];cr.apply(void 0,[e].concat(n))}},fr=function(){var e="FIREBASE INTERNAL ERROR: "+or.apply(void 0,arguments);rr.error(e)},dr=function(){var e="FIREBASE FATAL ERROR: ".concat(or.apply(void 0,arguments));throw rr.error(e),new Error(e)},pr=function(){var e="FIREBASE WARNING: "+or.apply(void 0,arguments);rr.warn(e)},vr=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},yr="[MIN_NAME]",mr="[MAX_NAME]",gr=function(e,t){if(e===t)return 0;if(e===yr||t===mr)return-1;if(t===yr||e===mr)return 1;var n=Sr(e),r=Sr(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},kr=function(e,t){return e===t?0:e<t?-1:1},_r=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+_t(t))},br=function e(t){if("object"!==typeof t||null===t)return _t(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=_t(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},wr=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function xr(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Er=function(e){Ge(!vr(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(a=0;a<64;a+=8){var c=parseInt(u.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var Cr=new RegExp("^-?(0*)\\d{1,10}$"),Sr=function(e){if(Cr.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Tr=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw pr("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Ir=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Nr=function(){function e(t,n){var r=this;f(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){pr('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Pr=function(){function e(t,n,r){var i=this;f(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(cr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pr(e)}}]),e}(),Rr=function(){function e(t){f(this,e),this.accessToken=t}return y(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Rr.OWNER="owner";var Ar="5",Dr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Or="ac",Lr="websocket",Mr="long_polling",Fr=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];f(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tr.get("host:"+t)||this._host}return y(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tr.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Ur(e,t,n){var r;if(Ge("string"===typeof t,"typeof type must == string"),Ge("object"===typeof n,"typeof params must == object"),t===Lr)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Mr)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return xr(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var jr=function(){function e(){f(this,e),this.counters_={}}return y(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;wt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return tt(this.counters_)}}]),e}(),Vr={},zr={};function qr(e){var t=e.toString();return Vr[t]||(Vr[t]=new jr),Vr[t]}var Br=function(){function e(t){f(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return y(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Tr((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Hr="start",Wr=function(){function e(t,n,r,i,a,o,s){var u=this;f(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hr(t),this.stats_=qr(n),this.urlFn=function(e){return u.appCheckToken&&(e[Or]=u.appCheckToken),Ur(n,Mr,e)}}return y(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Br(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(pt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Kr((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Hr)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[Hr]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Ar,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Or]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Dr.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=_t(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Je(t),r=wr(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!pt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=_t(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!pt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Kr=function(){function e(t,n,r,i){if(f(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,pt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ir(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){cr("frame writing exception"),s.stack&&cr(s.stack),cr(s)}}}return y(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;pt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){cr("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||cr("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Gr=null;"undefined"!==typeof MozWebSocket?Gr=MozWebSocket:"undefined"!==typeof WebSocket&&(Gr=WebSocket);var Qr=function(){function e(t,n,r,i,a,o,s){f(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hr(this.connId),this.stats_=qr(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return y(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tr.set("previous_websocket_failure",!0);try{var r;if(pt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Ar,"/").concat(Xn,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/react-nim",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Gr(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){tr.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=kt(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ge(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=_t(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=wr(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Ar,!pt()&&"undefined"!==typeof location&&location.hostname&&Dr.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Or]=r),i&&(a.p=i),Ur(e,Lr,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Gr&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return tr.isInMemoryStorage||!0===tr.get("previous_websocket_failure")}}]),e}();Qr.responsesRequiredToBeHealthy=2,Qr.healthyTimeout=3e4;var Yr=function(){function e(t){f(this,e),this.initTransports_(t)}return y(e,[{key:"initTransports_",value:function(t){var n=Qr&&Qr.isAvailable(),r=n&&!Qr.previouslyFailed();if(t.webSocketOnly&&(n||pr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Qr];else{var i,a=this.transports_=[],o=C(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Wr,Qr]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Yr.globalTransportInitialized_=!1;var $r=function(){function e(t,n,r,i,a,o,s,u,l,c){f(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hr("c:"+this.id+":"),this.transportManager_=new Yr(n),this.log_("Connection created"),this.start_()}return y(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ir((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=_r("t",e),n=_r("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=_r("t",e),n=_r("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=_r("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?fr("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fr("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Ar!==n&&pr("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ir((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ir((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Xr=function(){function e(){f(this,e)}return y(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Jr=function(){function e(t){f(this,e),this.allowedEvents_=t,this.listeners_={},Ge(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return y(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=h(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ge(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Zr=function(e){g(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||ft()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return y(n,[{key:"getInitialEvent",value:function(e){return Ge("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Jr),ei=32,ti=768,ni=function(){function e(t,n){if(f(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return y(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function ri(){return new ni("")}function ii(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ai(e){return e.pieces_.length-e.pieceNum_}function oi(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new ni(e.pieces_,t)}function si(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ui(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function li(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ni(t,0)}function ci(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ni)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new ni(n,0)}function hi(e){return e.pieceNum_>=e.pieces_.length}function fi(e,t){var n=ii(e),r=ii(t);if(null===n)return t;if(n===r)return fi(oi(e),oi(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function di(e,t){if(ai(e)!==ai(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function pi(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(ai(e)>ai(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var vi=y((function e(t,n){f(this,e),this.errorPrefix_=n,this.parts_=ui(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Lt(this.parts_[r]);yi(this)}));function yi(e){if(e.byteLength_>ti)throw new Error(e.errorPrefix_+"has a key path longer than "+ti+" bytes ("+e.byteLength_+").");if(e.parts_.length>ei)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ei+") or object contains a cycle "+mi(e))}function mi(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var gi=function(e){g(n,e);var t=w(n);function n(){var e,r,i;return f(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return y(n,[{key:"getInitialEvent",value:function(e){return Ge("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Jr),ki=1e3,_i=function(e){g(n,e);var t=w(n);function n(e,r,i,a,o,s,u,l){var c;if(f(this,n),(c=t.call(this)).repoInfo_=e,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=a,c.onServerInfoUpdate_=o,c.authTokenProvider_=s,c.appCheckTokenProvider_=u,c.authOverride_=l,c.id=n.nextPersistentConnectionId_++,c.log_=hr("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=ki,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!pt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return gi.getInstance().on("visible",c.onVisible_,b(c)),-1===e.host.indexOf("fblocal")&&Zr.getInstance().on("online",c.onOnline_,b(c)),c}return y(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(_t(i)),Ge(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new lt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ge(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=bt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=bt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+_t(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):fr("Unrecognized action received from server: "+_t(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ge(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ki,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ki,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ki),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Be(ze().mark((function e(){var t,r,i,a,o,s,u,c,h,f,d,p,v,y,m=this;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},h=function(e){Ge(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=l(d,2),v=p[0],y=p[1],s?cr("getToken() completed but was canceled"):(cr("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,u=new $r(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){pr(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&pr(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){cr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){cr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Et(this.interruptReasons_)&&(this.reconnectDelay_=ki,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return br(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new ni(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){cr("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){cr("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=C(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=C(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";pt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Xn.replace(/\./g,"-")]=1,ft()?e["framework.cordova"]=1:dt()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Zr.getInstance().currentlyOnline();return Et(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&wt(e,"w")){var n=xt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();pr("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Xr);_i.nextPersistentConnectionId_=0,_i.nextConnectionId_=0;var bi,wi=function(){function e(t,n){f(this,e),this.name=t,this.node=n}return y(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),xi=function(){function e(){f(this,e)}return y(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new wi(yr,e),r=new wi(yr,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return wi.MIN}}]),e}(),Ei=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){return gr(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Qe("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return wi.MIN}},{key:"maxPost",value:function(){return new wi(mr,bi)}},{key:"makePost",value:function(e,t){return Ge("string"===typeof e,"KeyIndex indexValue must always be a string."),new wi(e,bi)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return bi},set:function(e){bi=e}}]),n}(xi),Ci=new Ei,Si=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;f(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return y(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Ti=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Pi.EMPTY_NODE,this.right=null!=a?a:Pi.EMPTY_NODE}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Pi.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Pi.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Ti.RED=!0,Ti.BLACK=!1;var Ii,Ni=function(){function e(){f(this,e)}return y(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ti(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Pi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;f(this,e),this.comparator_=t,this.root_=n}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ti.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ti.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Si(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Si(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Si(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Si(this.root_,null,this.comparator_,!0,e)}}]),e}();function Ri(e,t){return gr(e.name,t.name)}function Ai(e,t){return gr(e,t)}Pi.EMPTY_NODE=new Ni;var Di,Oi,Li,Mi=function(e){return"number"===typeof e?"number:"+Er(e):"string:"+e},Fi=function(e){if(e.isLeafNode()){var t=e.val();Ge("string"===typeof t||"number"===typeof t||"object"===typeof t&&wt(t,".sv"),"Priority must be a string or number.")}else Ge(e===Ii||e.isEmpty(),"priority of unexpected type.");Ge(e===Ii||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ui=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;f(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ge(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Fi(this.priorityNode_)}return y(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return hi(t)?this:".priority"===ii(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=ii(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ge(".priority"!==r||1===ai(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(oi(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Mi(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Er(this.value_):this.value_,this.lazyHash_=ar(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ge(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ge(i>=0,"Unknown leaf type: "+n),Ge(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Di},set:function(e){Di=e}}]),e}();Ui.VALUE_TYPE_ORDER=["object","boolean","number","string"];var ji,Vi,zi=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?gr(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return wi.MIN}},{key:"maxPost",value:function(){return new wi(mr,new Ui("[PRIORITY-POST]",Li))}},{key:"makePost",value:function(e,t){var n=Oi(e);return new wi(t,new Ui("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(xi),qi=new zi,Bi=Math.log(2),Hi=function(){function e(t){f(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Bi,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return y(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Wi=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new Ti(o,a.node,Ti.BLACK,null,null);var u=parseInt(s/2,10)+r,l=t(r,u),c=t(u+1,i);return a=e[u],o=n?n(a):a,new Ti(o,a.node,Ti.BLACK,l,c)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var l=i(a+1,s),c=e[a],h=n?n(c):c;u(new Ti(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,Ti.BLACK):(s(h,Ti.BLACK),s(h,Ti.RED))}return a}(new Hi(e.length));return new Pi(r||t,a)},Ki={},Gi=function(){function e(t,n){f(this,e),this.indexes_=t,this.indexSet_=n}return y(e,[{key:"get",value:function(e){var t=xt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Pi?t:null}},{key:"hasIndex",value:function(e){return wt(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ge(t!==Ci,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(wi.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Wi(i,t.getCompare()):Ki;var u=t.toString(),l=Object.assign({},this.indexSet_);l[u]=t;var c=Object.assign({},this.indexes_);return c[u]=r,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Ct(this.indexes_,(function(e,i){var a=xt(r.indexSet_,i);if(Ge(a,"Missing index implementation for "+i),e===Ki){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(wi.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Wi(o,a.getCompare())}return Ki}var l=n.get(t.name),c=e;return l&&(c=c.remove(new wi(t.name,l))),c.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Ct(this.indexes_,(function(e){if(e===Ki)return e;var r=n.get(t.name);return r?e.remove(new wi(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ge(Ki&&qi,"ChildrenNode.ts has not been loaded"),ji=ji||new e({".priority":Ki},{".priority":qi})}}]),e}(),Qi=function(){function e(t,n,r){f(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Fi(this.priorityNode_),this.children_.isEmpty()&&Ge(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return y(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Vi}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Vi:t}},{key:"getChild",value:function(e){var t=ii(e);return null===t?this:this.getImmediateChild(t).getChild(oi(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ge(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new wi(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Vi:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=ii(e);if(null===n)return t;Ge(".priority"!==ii(e)||1===ai(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(oi(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(qi,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Mi(this.getPriority().val())+":"),this.forEachChild(qi,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ar(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new wi(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new wi(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new wi(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,wi.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,wi.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Yi?-1:0}},{key:"withIndex",value:function(t){if(t===Ci||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Ci||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(qi),r=t.getIterator(qi),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Ci?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Vi||(Vi=new e(new Pi(Ai),null,Gi.Default))}}]),e}();Qi.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Yi=new(function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.call(this,new Pi(Ai),Qi.EMPTY_NODE,Gi.Default)}return y(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Qi.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Qi));Object.defineProperties(wi,{MIN:{value:new wi(yr,Qi.EMPTY_NODE)},MAX:{value:new wi(mr,Yi)}}),Ei.__EMPTY_NODE=Qi.EMPTY_NODE,Ui.__childrenNodeConstructor=Qi,Ii=Yi,function(e){Li=e}(Yi);var $i=!0;function Xi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Qi.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ge(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new Ui(e,Xi(t));if(e instanceof Array||!$i){var n=Qi.EMPTY_NODE;return xr(e,(function(t,r){if(wt(e,t)&&"."!==t.substring(0,1)){var i=Xi(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Xi(t))}var r=[],i=!1;if(xr(e,(function(e,t){if("."!==e.substring(0,1)){var n=Xi(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new wi(e,n)))}})),0===r.length)return Qi.EMPTY_NODE;var a=Wi(r,Ri,(function(e){return e.name}),Ai);if(i){var o=Wi(r,qi.getCompare());return new Qi(a,Xi(t),new Gi({".priority":o},{".priority":qi}))}return new Qi(a,Xi(t),Gi.Default)}!function(e){Oi=e}(Xi);var Ji=function(e){g(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).indexPath_=e,Ge(!hi(e)&&".priority"!==ii(e),"Can't create PathIndex with empty path or .priority key"),r}return y(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?gr(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Xi(e),r=Qi.EMPTY_NODE.updateChild(this.indexPath_,n);return new wi(t,r)}},{key:"maxPost",value:function(){var e=Qi.EMPTY_NODE.updateChild(this.indexPath_,Yi);return new wi(mr,e)}},{key:"toString",value:function(){return ui(this.indexPath_,0).join("/")}}]),n}(xi),Zi=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?gr(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return wi.MIN}},{key:"maxPost",value:function(){return wi.MAX}},{key:"makePost",value:function(e,t){var n=Xi(e);return new wi(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(xi),ea=new Zi;function ta(e){return{type:"value",snapshotNode:e}}function na(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ra(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ia(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var aa=function(){function e(t){f(this,e),this.index_=t}return y(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Ge(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(ra(t,o)):Ge(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(na(t,n)):a.trackChildChange(ia(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(qi,(function(e,r){t.hasChild(e)||n.trackChildChange(ra(e,r))})),t.isLeafNode()||t.forEachChild(qi,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(ia(t,r,i))}else n.trackChildChange(na(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Qi.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),oa=function(){function e(t){f(this,e),this.indexedFilter_=new aa(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return y(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new wi(t,n))||(n=Qi.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Qi.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Qi.EMPTY_NODE);var i=this;return t.forEachChild(qi,(function(e,t){i.matches(new wi(e,t))||(r=r.updateImmediateChild(e,Qi.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),sa=function(){function e(t){var n=this;f(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new oa(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return y(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new wi(t,n))||(n=Qi.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Qi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Qi.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(Qi.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var l=s.getNext();u<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?u++:r=r.updateImmediateChild(l.name,Qi.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;Ge(s.numChildren()===this.limit_,"");var u=new wi(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(ia(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(ra(t,h));var p=s.updateImmediateChild(t,Qi.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(na(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:c&&a(l,u)>=0?(null!=i&&(i.trackChildChange(ra(l.name,l.node)),i.trackChildChange(na(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,Qi.EMPTY_NODE)):e}}]),e}(),ua=function(){function e(){f(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qi}return y(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ge(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ge(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yr}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ge(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ge(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:mr}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ge(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===qi}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function la(e){var t,n={};if(e.isDefault())return n;if(e.index_===qi?t="$priority":e.index_===ea?t="$value":e.index_===Ci?t="$key":(Ge(e.index_ instanceof Ji,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=_t(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=_t(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+_t(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=_t(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+_t(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function ca(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==qi&&(t.i=e.index_.toString()),t}var ha=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=hr("p:rest:"),o.listens_={},o}return y(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var l=la(e._queryParams);this.restRequest_(o+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),xt(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=la(e._queryParams),r=e._path.toString(),i=new lt;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+It(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=kt(c.responseText)}catch(n){pr("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&pr("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ge(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Xr),fa=function(){function e(){f(this,e),this.rootNode_=Qi.EMPTY_NODE}return y(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function da(){return{value:null,children:new Map}}function pa(e,t,n){if(hi(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ii(t);e.children.has(r)||e.children.set(r,da()),pa(e.children.get(r),t=oi(t),n)}}function va(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){va(r,new ni(t.toString()+"/"+e),n)}))}var ya,ma=function(){function e(t){f(this,e),this.collection_=t,this.last_=null}return y(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&xr(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),ga=function(){function e(t,n){f(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new ma(t);var r=1e4+2e4*Math.random();Ir(this.reportStats_.bind(this),Math.floor(r))}return y(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;xr(t,(function(t,i){i>0&&wt(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Ir(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function ka(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ya||(ya={}));var _a,ba=function(){function e(t,n,r){f(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=ya.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return y(e,[{key:"operationForChild",value:function(t){if(hi(this.path)){if(null!=this.affectedTree.value)return Ge(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ni(t));return new e(ri(),n,this.revert)}return Ge(ii(this.path)===t,"operationForChild called for unrelated child."),new e(oi(this.path),this.affectedTree,this.revert)}}]),e}(),wa=function(){function e(t,n){f(this,e),this.source=t,this.path=n,this.type=ya.LISTEN_COMPLETE}return y(e,[{key:"operationForChild",value:function(t){return hi(this.path)?new e(this.source,ri()):new e(this.source,oi(this.path))}}]),e}(),xa=function(){function e(t,n,r){f(this,e),this.source=t,this.path=n,this.snap=r,this.type=ya.OVERWRITE}return y(e,[{key:"operationForChild",value:function(t){return hi(this.path)?new e(this.source,ri(),this.snap.getImmediateChild(t)):new e(this.source,oi(this.path),this.snap)}}]),e}(),Ea=function(){function e(t,n,r){f(this,e),this.source=t,this.path=n,this.children=r,this.type=ya.MERGE}return y(e,[{key:"operationForChild",value:function(t){if(hi(this.path)){var n=this.children.subtree(new ni(t));return n.isEmpty()?null:n.value?new xa(this.source,ri(),n.value):new e(this.source,ri(),n)}return Ge(ii(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,oi(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Ca=function(){function e(t,n,r){f(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return y(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(hi(e))return this.isFullyInitialized()&&!this.filtered_;var t=ii(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Sa=y((function e(t){f(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Ta(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Qe("Should only compare child_ events.");var r=new wi(t.childName,t.snapshotNode),i=new wi(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Ia(e,t){return{eventCache:e,serverCache:t}}function Na(e,t,n,r){return Ia(new Ca(t,n,r),e.serverCache)}function Pa(e,t,n,r){return Ia(e.eventCache,new Ca(t,n,r))}function Ra(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Aa(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Da=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(_a||(_a=new Pi(kr)),_a);f(this,e),this.value=t,this.children=n}return y(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:ri(),value:this.value};if(hi(e))return null;var n=ii(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(oi(e),t);return null!=i?{path:ci(new ni(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(hi(t))return this;var n=ii(t),r=this.children.get(n);return null!==r?r.subtree(oi(t)):new e(null)}},{key:"set",value:function(t,n){if(hi(t))return new e(n,this.children);var r=ii(t),i=(this.children.get(r)||new e(null)).set(oi(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(hi(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ii(t),r=this.children.get(n);if(r){var i,a=r.remove(oi(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(hi(e))return this.value;var t=ii(e),n=this.children.get(t);return n?n.get(oi(e)):null}},{key:"setTree",value:function(t,n){if(hi(t))return n;var r,i=ii(t),a=(this.children.get(i)||new e(null)).setTree(oi(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(ri(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(ci(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,ri(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(hi(e))return null;var i=ii(e),a=this.children.get(i);return a?a.findOnPath_(oi(e),ci(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,ri(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(hi(t))return this;this.value&&r(n,this.value);var i=ii(t),a=this.children.get(i);return a?a.foreachOnPath_(oi(t),ci(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(ri(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(ci(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return xr(t,(function(e,t){n=n.set(new ni(e),t)})),n}}]),e}(),Oa=function(){function e(t){f(this,e),this.writeTree_=t}return y(e,null,[{key:"empty",value:function(){return new e(new Da(null))}}]),e}();function La(e,t,n){if(hi(t))return new Oa(new Da(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=fi(i,t);return a=a.updateChild(o,n),new Oa(e.writeTree_.set(i,a))}var s=new Da(n),u=e.writeTree_.setTree(t,s);return new Oa(u)}function Ma(e,t,n){var r=e;return xr(n,(function(e,n){r=La(r,ci(t,e),n)})),r}function Fa(e,t){if(hi(t))return Oa.empty();var n=e.writeTree_.setTree(t,new Da(null));return new Oa(n)}function Ua(e,t){return null!=ja(e,t)}function ja(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(fi(n.path,t)):null}function Va(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(qi,(function(e,n){t.push(new wi(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new wi(e,n.value))})),t}function za(e,t){if(hi(t))return e;var n=ja(e,t);return new Oa(null!=n?new Da(n):e.writeTree_.subtree(t))}function qa(e){return e.writeTree_.isEmpty()}function Ba(e,t){return Ha(ri(),e.writeTree_,t)}function Ha(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ge(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ha(ci(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(ci(e,".priority"),r)),n}function Wa(e,t){return io(t,e)}function Ka(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ge(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Ga(s,r.path)?i=!1:pi(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Ya(e.allWrites,Qa,ri()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Fa(e.visibleWrites,r.path):xr(r.children,(function(t){e.visibleWrites=Fa(e.visibleWrites,ci(r.path,t))}));return!0}return!1}function Ga(e,t){if(e.snap)return pi(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&pi(ci(e.path,n),t))return!0;return!1}function Qa(e){return e.visible}function Ya(e,t,n){for(var r=Oa.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)pi(n,o)?r=La(r,s=fi(n,o),a.snap):pi(o,n)&&(s=fi(o,n),r=La(r,ri(),a.snap.getChild(s)));else{if(!a.children)throw Qe("WriteRecord should have .snap or .children");if(pi(n,o))r=Ma(r,s=fi(n,o),a.children);else if(pi(o,n))if(hi(s=fi(o,n)))r=Ma(r,ri(),a.children);else{var u=xt(a.children,ii(s));if(u){var l=u.getChild(oi(s));r=La(r,ri(),l)}}}}}return r}function $a(e,t,n,r,i){if(r||i){var a=za(e.visibleWrites,t);if(!i&&qa(a))return n;if(i||null!=n||Ua(a,ri())){return Ba(Ya(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(pi(e.path,t)||pi(t,e.path))}),t),n||Qi.EMPTY_NODE)}return null}var o=ja(e.visibleWrites,t);if(null!=o)return o;var s=za(e.visibleWrites,t);return qa(s)?n:null!=n||Ua(s,ri())?Ba(s,n||Qi.EMPTY_NODE):null}function Xa(e,t,n,r){return $a(e.writeTree,e.treePath,t,n,r)}function Ja(e,t){return function(e,t,n){var r=Qi.EMPTY_NODE,i=ja(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(qi,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=za(e.visibleWrites,t);return n.forEachChild(qi,(function(e,t){var n=Ba(za(a,new ni(e)),t);r=r.updateImmediateChild(e,n)})),Va(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Va(za(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Za(e,t,n,r){return function(e,t,n,r,i){Ge(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=ci(t,n);if(Ua(e.visibleWrites,a))return null;var o=za(e.visibleWrites,a);return qa(o)?i.getChild(n):Ba(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function eo(e,t){return function(e,t){return ja(e.visibleWrites,t)}(e.writeTree,ci(e.treePath,t))}function to(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=za(e.visibleWrites,t),l=ja(u,ri());if(null!=l)s=l;else{if(null==n)return[];s=Ba(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&c.length<i;)0!==h(d,r)&&c.push(d),d=f.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,a)}function no(e,t,n){return function(e,t,n,r){var i=ci(t,n),a=ja(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Ba(za(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function ro(e,t){return io(ci(e.treePath,t),e.writeTree)}function io(e,t){return{treePath:e,writeTree:t}}var ao=function(){function e(){f(this,e),this.changeMap=new Map}return y(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ge("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ge(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,ia(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ra(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,na(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Qe("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,ia(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),oo=new(function(){function e(){f(this,e)}return y(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),so=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return y(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Ca(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return no(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Aa(this.viewCache_),i=to(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function uo(e,t,n,r,i){var a,o,s=new ao;if(n.type===ya.OVERWRITE){var u=n;u.source.fromUser?a=ho(e,t,u.path,u.snap,r,i,s):(Ge(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!hi(u.path),a=co(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===ya.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var l=ci(n,r);fo(t,ii(l))&&(s=ho(e,s,l,u,i,a,o))})),r.foreach((function(r,u){var l=ci(n,r);fo(t,ii(l))||(s=ho(e,s,l,u,i,a,o))})),s}(e,t,l.path,l.children,r,i,s):(Ge(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=vo(e,t,l.path,l.children,r,i,o,s))}else if(n.type===ya.ACK_USER_WRITE){var c=n;a=c.revert?function(e,t,n,r,i,a){var o;if(null!=eo(r,n))return t;var s,u=new so(r,t,i),l=t.eventCache.getNode();if(hi(n)||".priority"===ii(n)){var c;if(t.serverCache.isFullyInitialized())c=Xa(r,Aa(t));else{var h=t.serverCache.getNode();Ge(h instanceof Qi,"serverChildren would be complete if leaf node"),c=Ja(r,h)}s=e.filter.updateFullNode(l,c,a)}else{var f=ii(n),d=no(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=l.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(l,f,d,oi(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(l,f,Qi.EMPTY_NODE,oi(n),u,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Xa(r,Aa(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=eo(r,ri()),Na(t,s,o,e.filter.filtersNodes())}(e,t,c.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=eo(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(hi(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return co(e,t,n,u.getNode().getChild(n),i,a,s,o);if(hi(n)){var l=new Da(null);return u.getNode().forEachChild(Ci,(function(e,t){l=l.set(new ni(e),t)})),vo(e,t,n,l,i,a,s,o)}return t}var c=new Da(null);return r.foreach((function(e,t){var r=ci(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),vo(e,t,n,c,i,a,s,o)}(e,t,c.path,c.affectedTree,r,i,s)}else{if(n.type!==ya.LISTEN_COMPLETE)throw Qe("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Pa(t,a.getNode(),a.isFullyInitialized()||hi(n),a.isFiltered());return lo(e,o,n,r,oo,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Ra(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(ta(Ra(t)))}}(t,a,h),{viewCache:a,changes:h}}function lo(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=eo(r,n))return t;if(hi(n))if(Ge(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=Aa(t),c=Ja(r,l instanceof Qi?l:Qi.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{var h=Xa(r,Aa(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=ii(n);if(".priority"===f){Ge(1===ai(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Za(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=oi(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=Za(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=no(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,a):u.getNode()}}return Na(t,o,u.isFullyInitialized()||hi(n),e.filter.filtersNodes())}function co(e,t,n,r,i,a,o,s){var u,l=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(hi(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{var f=ii(n);if(!l.isCompleteForPath(n)&&ai(n)>1)return t;var d=oi(n),p=l.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),f,p,d,oo,null)}var v=Pa(t,u,l.isFullyInitialized()||hi(n),c.filtersNodes());return lo(e,v,n,i,new so(i,v,a),s)}function ho(e,t,n,r,i,a,o){var s,u,l=t.eventCache,c=new so(i,t,a);if(hi(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=Na(t,u,!0,e.filter.filtersNodes());else{var h=ii(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Na(t,u,l.isFullyInitialized(),l.isFiltered());else{var f,d=oi(n),p=l.getNode().getImmediateChild(h);if(hi(d))f=r;else{var v=c.getCompleteChild(h);f=null!=v?".priority"===si(d)&&v.getChild(li(d)).isEmpty()?v:v.updateChild(d,r):Qi.EMPTY_NODE}if(p.equals(f))s=t;else s=Na(t,e.filter.updateChild(l.getNode(),h,f,d,c,o),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function fo(e,t){return e.eventCache.isCompleteForChild(t)}function po(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function vo(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=hi(n)?r:new Da(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=po(0,t.serverCache.getNode().getImmediateChild(n),r);l=co(e,l,new ni(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!u){var h=po(0,t.serverCache.getNode().getImmediateChild(n),r);l=co(e,l,new ni(n),h,i,a,o,s)}})),l}var yo,mo=function(){function e(t,n){f(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new aa(i.getIndex()),o=(r=i).loadsAllData()?new aa(r.getIndex()):r.hasLimit()?new sa(r):new oa(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,l=a.updateFullNode(Qi.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Qi.EMPTY_NODE,u.getNode(),null),h=new Ca(l,s.isFullyInitialized(),a.filtersNodes()),d=new Ca(c,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ia(d,h),this.eventGenerator_=new Sa(this.query_)}return y(e,[{key:"query",get:function(){return this.query_}}]),e}();function go(e,t){var n=Aa(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!hi(t)&&!n.getImmediateChild(ii(t)).isEmpty())?n.getChild(t):null}function ko(e){return 0===e.eventRegistrations_.length}function _o(e,t,n){var r=[];if(n){Ge(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function bo(e,t,n,r){t.type===ya.MERGE&&null!==t.source.queryId&&(Ge(Aa(e.viewCache_),"We should always have a full cache before handling merges"),Ge(Ra(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=uo(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Ge(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ge(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ge(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,wo(e,s.changes,s.viewCache.eventCache.getNode(),null)}function wo(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Ta(e,i,"child_removed",t,r,n),Ta(e,i,"child_added",t,r,n),Ta(e,i,"child_moved",a,r,n),Ta(e,i,"child_changed",t,r,n),Ta(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var xo,Eo=y((function e(){f(this,e),this.views=new Map}));function Co(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ge(null!=a,"SyncTree gave us an op for an invalid query."),bo(a,t,n,r)}var o,s=[],u=C(e.views.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s=s.concat(bo(l,t,n,r))}}catch(c){u.e(c)}finally{u.f()}return s}function So(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=Xa(n,i?r:null),u=!1;s?u=!0:r instanceof Qi?(s=Ja(n,r),u=!1):(s=Qi.EMPTY_NODE,u=!1);var l=Ia(new Ca(s,u,!1),new Ca(r,i,!1));return new mo(t,l)}return o}function To(e,t,n,r,i,a){var o=So(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(qi,(function(e,t){r.push(na(e,t))})),n.isFullyInitialized()&&r.push(ta(n.getNode())),wo(e,r,n.getNode(),t)}(o,n)}function Io(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=Do(e);if("default"===i){var u,c=C(e.views.entries());try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];o=o.concat(_o(d,n,r)),ko(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(_o(p,n,r)),ko(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!Do(e)&&a.push(new(Ge(yo,"Reference.ts has not been loaded"),yo)(t._repo,t._path)),{removed:a,events:o}}function No(e){var t,n=[],r=C(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Po(e,t){var n,r=null,i=C(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||go(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Ro(e,t){if(t._queryParams.loadsAllData())return Oo(e);var n=t._queryIdentifier;return e.views.get(n)}function Ao(e,t){return null!=Ro(e,t)}function Do(e){return null!=Oo(e)}function Oo(e){var t,n=C(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Lo=1,Mo=y((function e(t){f(this,e),this.listenProvider_=t,this.syncPointTree_=new Da(null),this.pendingWriteTree_={visibleWrites:Oa.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Fo(e,t,n,r,i){return function(e,t,n,r,i){Ge(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=La(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Wo(e,new xa({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Uo(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Ka(e.pendingWriteTree_,t)){var i=new Da(null);return null!=r.snap?i=i.set(ri(),!0):xr(r.children,(function(e){i=i.set(new ni(e),!0)})),Wo(e,new ba(r.path,i,n))}return[]}function jo(e,t,n){return Wo(e,new xa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Vo(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||Ao(o,t))){var u=Io(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var l=u.removed;if(s=u.events,!i){var c=-1!==l.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return Do(t)}));if(c&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&Do(t))return[Oo(t)];var r=[];return t&&(r=No(t)),xr(n,(function(e,t){r=r.concat(t)})),r}))}(f),p=0;p<d.length;++p){var v=d[p],y=v.query,m=Qo(e,v);e.listenProvider_.startListening(es(y),Yo(e,y),m.hashFn,m.onComplete)}}if(!h&&l.length>0&&!r)if(c){e.listenProvider_.stopListening(es(t),null)}else l.forEach((function(t){var n=e.queryToTagMap.get($o(t));e.listenProvider_.stopListening(es(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=$o(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,l)}return s}function zo(e,t,n,r){var i=Xo(e,r);if(null!=i){var a=Jo(i),o=a.path,s=a.queryId,u=fi(o,t);return Zo(e,o,new xa(ka(s),u,n))}return[]}function qo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=fi(e,i);a=a||Po(t,n),o=o||Do(t)}));var s,u=e.syncPointTree_.get(i);(u?(o=o||Do(u),a=a||Po(u,ri())):(u=new Eo,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)?s=!0:(s=!1,a=Qi.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=Po(t,ri());n&&(a=a.updateImmediateChild(e,n))})));var l=Ao(u,t);if(!l&&!t._queryParams.loadsAllData()){var c=$o(t);Ge(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=Lo++;e.queryToTagMap.set(c,h),e.tagToQueryMap.set(h,c)}var f=To(u,t,n,Wa(e.pendingWriteTree_,i),a,s);if(!l&&!o&&!r){var d=Ro(u,t);f=f.concat(function(e,t,n){var r=t._path,i=Yo(e,t),a=Qo(e,n),o=e.listenProvider_.startListening(es(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)Ge(!Do(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!hi(e)&&t&&Do(t))return[Oo(t).query];var r=[];return t&&(r=r.concat(No(t).map((function(e){return e.query})))),xr(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<u.length;++l){var c=u[l];e.listenProvider_.stopListening(es(c),Yo(e,c))}return o}(e,t,d))}return f}function Bo(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Po(n,fi(e,t));if(r)return r}));return $a(r,t,i,n,!0)}function Ho(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=fi(e,n);r=r||Po(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Po(i,ri()):(i=new Eo,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Ca(r,!0,!1):null;return function(e){return Ra(e.viewCache_)}(So(i,t,Wa(e.pendingWriteTree_,t._path),a?o.getNode():Qi.EMPTY_NODE,a))}function Wo(e,t){return Ko(t,e.syncPointTree_,null,Wa(e.pendingWriteTree_,ri()))}function Ko(e,t,n,r){if(hi(e.path))return Go(e,t,n,r);var i=t.get(ri());null==n&&null!=i&&(n=Po(i,ri()));var a=[],o=ii(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var l=n?n.getImmediateChild(o):null,c=ro(r,o);a=a.concat(Ko(s,u,l,c))}return i&&(a=a.concat(Co(i,e,r,n))),a}function Go(e,t,n,r){var i=t.get(ri());null==n&&null!=i&&(n=Po(i,ri()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=ro(r,t),u=e.operationForChild(t);u&&(a=a.concat(Go(u,i,o,s)))})),i&&(a=a.concat(Co(i,e,r,n))),a}function Qo(e,t){var n=t.query,r=Yo(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Qi.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Xo(e,n);if(r){var i=Jo(r),a=i.path,o=i.queryId,s=fi(a,t);return Zo(e,a,new wa(ka(o),s))}return[]}(e,n._path,r):function(e,t){return Wo(e,new wa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Vo(e,n,null,i)}}}function Yo(e,t){var n=$o(t);return e.queryToTagMap.get(n)}function $o(e){return e._path.toString()+"$"+e._queryIdentifier}function Xo(e,t){return e.tagToQueryMap.get(t)}function Jo(e){var t=e.indexOf("$");return Ge(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ni(e.substr(0,t))}}function Zo(e,t,n){var r=e.syncPointTree_.get(t);return Ge(r,"Missing sync point for query tag that we're tracking"),Co(r,n,Wa(e.pendingWriteTree_,t),null)}function es(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ge(xo,"Reference.ts has not been loaded"),xo)(e._repo,e._path):e}var ts=function(){function e(t){f(this,e),this.node_=t}return y(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),ns=function(){function e(t,n){f(this,e),this.syncTree_=t,this.path_=n}return y(e,[{key:"getImmediateChild",value:function(t){var n=ci(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Bo(this.syncTree_,this.path_)}}]),e}(),rs=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},is=function(e,t,n){return e&&"object"===typeof e?(Ge(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?as(e[".sv"],t,n):"object"===typeof e[".sv"]?os(e[".sv"],t):void Ge(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},as=function(e,t,n){if("timestamp"===e)return n.timestamp;Ge(!1,"Unexpected server value: "+e)},os=function(e,t,n){e.hasOwnProperty("increment")||Ge(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ge(!1,"Unexpected increment value: "+r);var i=t.node();if(Ge(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},ss=function(e,t,n,r){return ls(t,new ns(n,e),r)},us=function(e,t,n){return ls(e,new ts(t),n)};function ls(e,t,n){var r,i=e.getPriority().val(),a=is(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=is(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new Ui(s,Xi(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new Ui(a))),u.forEachChild(qi,(function(e,i){var a=ls(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var cs=y((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};f(this,e),this.name=t,this.parent=n,this.node=r}));function hs(e,t){for(var n=t instanceof ni?t:new ni(t),r=e,i=ii(n);null!==i;){var a=xt(r.node.children,i)||{children:{},childCount:0};r=new cs(i,r,a),i=ii(n=oi(n))}return r}function fs(e){return e.node.value}function ds(e,t){e.node.value=t,gs(e)}function ps(e){return e.node.childCount>0}function vs(e,t){xr(e.node.children,(function(n,r){t(new cs(n,e,r))}))}function ys(e,t,n,r){n&&!r&&t(e),vs(e,(function(e){ys(e,t,!0,r)})),n&&r&&t(e)}function ms(e){return new ni(null===e.parent?e.name:ms(e.parent)+"/"+e.name)}function gs(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===fs(e)&&!ps(e)}(n),i=wt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,gs(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,gs(e))}(e.parent,e.name,e)}var ks=/[\[\].#$\/\u0000-\u001F\u007F]/,_s=/[\[\].#$\u0000-\u001F\u007F]/,bs=10485760,ws=function(e){return"string"===typeof e&&0!==e.length&&!ks.test(e)},xs=function(e){return"string"===typeof e&&0!==e.length&&!_s.test(e)},Es=function(e,t,n,r){r&&void 0===t||Cs(Ot(e,"value"),t,n)},Cs=function e(t,n,r){var i=r instanceof ni?new vi(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+mi(i));if("function"===typeof n)throw new Error(t+"contains a function "+mi(i)+" with contents = "+n.toString());if(vr(n))throw new Error(t+"contains "+n.toString()+" "+mi(i));if("string"===typeof n&&n.length>bs/3&&Lt(n)>bs)throw new Error(t+"contains a string greater than "+bs+" utf8 bytes "+mi(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(xr(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!ws(n)))throw new Error(t+" contains an invalid key ("+n+") "+mi(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=Lt(u),yi(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Lt(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+mi(i)+" in addition to actual children.")}},Ss=function(e,t,n,r){if((!r||void 0!==n)&&!xs(n))throw new Error(Ot(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ts=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ss(e,t,n,r)},Is=function(e,t){if(".info"===ii(t))throw new Error(e+" failed = Can't modify data under /.info/")},Ns=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!ws(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xs(e)}(n))throw new Error(Ot(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ps=y((function e(){f(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Rs(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||di(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function As(e,t,n){Rs(e,n),Os(e,(function(e){return di(e,t)}))}function Ds(e,t,n){Rs(e,n),Os(e,(function(e){return pi(e,t)||pi(t,e)}))}function Os(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Ls(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Ls(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();sr&&cr("event: "+n.toString()),Tr(r)}}}var Ms="repo_interrupt",Fs=25,Us=function(){function e(t,n,r,i){f(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ps,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=da(),this.transactionQueueTree_=new cs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return y(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function js(e,t,n){if(e.stats_=qr(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new ha(e.repoInfo_,(function(t,n,r,i){qs(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Bs(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_t(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new _i(e.repoInfo_,t,(function(t,n,r,i){qs(e,t,n,r,i)}),(function(t){Bs(e,t)}),(function(t){!function(e,t){xr(t,(function(t,n){Hs(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return zr[n]||(zr[n]=t()),zr[n]}(e.repoInfo_,(function(){return new ga(e.stats_,e.server_)})),e.infoData_=new fa,e.infoSyncTree_=new Mo({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=jo(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Hs(e,"connected",!1),e.serverSyncTree_=new Mo({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Ds(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Vs(e){var t=e.infoData_.getNode(new ni(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function zs(e){return rs({timestamp:Vs(e)})}function qs(e,t,n,r,i){e.dataUpdateCount++;var a=new ni(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Ct(n,(function(e){return Xi(e)}));o=function(e,t,n,r){var i=Xo(e,r);if(i){var a=Jo(i),o=a.path,s=a.queryId,u=fi(o,t),l=Da.fromObject(n);return Zo(e,o,new Ea(ka(s),u,l))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Xi(n);o=zo(e.serverSyncTree_,a,u,i)}else if(r){var l=Ct(n,(function(e){return Xi(e)}));o=function(e,t,n){var r=Da.fromObject(n);return Wo(e,new Ea({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var c=Xi(n);o=jo(e.serverSyncTree_,a,c)}var h=a;o.length>0&&(h=Zs(e,a)),Ds(e.eventQueue_,h,o)}function Bs(e,t){Hs(e,"connected",t),!1===t&&function(e){Ys(e,"onDisconnectEvents");var t=zs(e),n=da();va(e.onDisconnect_,ri(),(function(r,i){var a=ss(r,i,e.serverSyncTree_,t);pa(n,r,a)}));var r=[];va(n,ri(),(function(t,n){r=r.concat(jo(e.serverSyncTree_,t,n));var i=iu(e,t);Zs(e,i)})),e.onDisconnect_=da(),Ds(e.eventQueue_,ri(),r)}(e)}function Hs(e,t,n){var r=new ni("/.info/"+t),i=Xi(n);e.infoData_.updateSnapshot(r,i);var a=jo(e.infoSyncTree_,r,i);Ds(e.eventQueue_,r,a)}function Ws(e){return e.nextWriteId_++}function Ks(e,t,n,r,i){Ys(e,"set",{path:t.toString(),value:n,priority:r});var a=zs(e),o=Xi(n,r),s=Bo(e.serverSyncTree_,t),u=us(o,s,a),l=Ws(e),c=Fo(e.serverSyncTree_,t,u,l,!0);Rs(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||pr("set at "+t+" failed: "+n);var o=Uo(e.serverSyncTree_,l,!a);Ds(e.eventQueue_,t,o),$s(e,i,n,r)}));var h=iu(e,t);Zs(e,h),Ds(e.eventQueue_,h,[])}function Gs(e,t,n){var r;r=".info"===ii(t._path)?Vo(e.infoSyncTree_,t,n):Vo(e.serverSyncTree_,t,n),As(e.eventQueue_,t._path,r)}function Qs(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Ms)}function Ys(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];cr.apply(void 0,[t].concat(r))}function $s(e,t,n,r){t&&Tr((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Xs(e,t,n){return Bo(e.serverSyncTree_,t,n)||Qi.EMPTY_NODE}function Js(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||ru(e,t),fs(t)){var n=tu(e,t);Ge(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Xs(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Ge(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=fi(t,u.path);a=a.updateChild(l,u.currentOutputSnapshotRaw)}var c=a.val(!0),h=t;e.server_.put(h.toString(),c,(function(r){Ys(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Uo(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);ru(e,hs(e.transactionQueueTree_,t)),Js(e,e.transactionQueueTree_),Ds(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)Tr(a[u])}else{if("datastale"===r)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{pr("transaction at "+h.toString()+" failed: "+r);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=r}Zs(e,t)}}),o)}(e,ms(t),n)}else ps(t)&&vs(t,(function(t){Js(e,t)}))}function Zs(e,t){var n=eu(e,t),r=ms(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,l=t[a],c=fi(n,l.path),h=!1;if(Ge(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,s=l.abortReason,i=i.concat(Uo(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=Fs)h=!0,s="maxretry",i=i.concat(Uo(e.serverSyncTree_,l.currentWriteId,!0));else{var f=Xs(e,l.path,o);l.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Cs("transaction failed: Data returned ",d,l.path);var p=Xi(d);"object"===typeof d&&null!=d&&wt(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=l.currentWriteId,y=zs(e),m=us(p,f,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=m,l.currentWriteId=Ws(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Fo(e.serverSyncTree_,l.path,m,l.currentWriteId,l.applyLocally))).concat(Uo(e.serverSyncTree_,v,!0))}else h=!0,s="nodata",i=i.concat(Uo(e.serverSyncTree_,l.currentWriteId,!0))}Ds(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);ru(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)Tr(r[l]);Js(e,e.transactionQueueTree_)}(e,tu(e,n),r),r}function eu(e,t){var n,r=e.transactionQueueTree_;for(n=ii(t);null!==n&&void 0===fs(r);)r=hs(r,n),n=ii(t=oi(t));return r}function tu(e,t){var n=[];return nu(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function nu(e,t,n){var r=fs(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);vs(t,(function(t){nu(e,t,n)}))}function ru(e,t){var n=fs(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ds(t,n.length>0?n:void 0)}vs(t,(function(t){ru(e,t)}))}function iu(e,t){var n=ms(eu(e,t)),r=hs(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){au(e,t)})),au(e,r),ys(r,(function(t){au(e,t)})),n}function au(e,t){var n=fs(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ge(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ge(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Uo(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?ds(t,void 0):n.length=a+1,Ds(e.eventQueue_,ms(t),i);for(var s=0;s<r.length;s++)Tr(r[s])}}var ou=function(e,t){var n=su(e),r=n.namespace;"firebase.com"===n.domain&&dr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||dr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&pr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Fr(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ni(n.pathString)}},su=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(c,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=C(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):pr("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},uu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",lu=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=uu.charAt(n%64),n=Math.floor(n/64);Ge(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=uu.charAt(t[r]);return Ge(20===o.length,"nextPushId: Length should be 20."),o}}(),cu=function(){function e(t,n,r,i){f(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return y(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+_t(this.snapshot.exportVal())}}]),e}(),hu=function(){function e(t,n,r){f(this,e),this.eventRegistration=t,this.error=n,this.path=r}return y(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),fu=function(){function e(t,n){f(this,e),this.snapshotCallback=t,this.cancelCallback=n}return y(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Ge(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),du=function(){function e(t,n,r,i){f(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return y(e,[{key:"key",get:function(){return hi(this._path)?null:si(this._path)}},{key:"ref",get:function(){return new pu(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=ca(this._queryParams),t=br(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return ca(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Mt(t))instanceof e))return!1;var n=this._repo===t._repo,r=di(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var pu=function(e){g(n,e);var t=w(n);function n(e,r){return f(this,n),t.call(this,e,r,new ua,!1)}return y(n,[{key:"parent",get:function(){var e=li(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(du),vu=function(){function e(t,n,r){f(this,e),this._node=t,this.ref=n,this._index=r}return y(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new ni(t),r=mu(this.ref,t);return new e(this._node.getChild(n),r,qi)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,mu(n.ref,r),qi))}))}},{key:"hasChild",value:function(e){var t=new ni(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function yu(e,t){return(e=Mt(e))._checkNotDeleted("ref"),void 0!==t?mu(e._root,t):e._root}function mu(e,t){return null===ii((e=Mt(e))._path)?Ts("child","path",t,!1):Ss("child","path",t,!1),new pu(e._repo,ci(e._path,t))}function gu(e,t){e=Mt(e),Is("set",e._path),Es("set",t,e._path,!1);var n=new lt;return Ks(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function ku(e){e=Mt(e);var t=new fu((function(){})),n=new _u(t);return function(e,t,n){var r=Ho(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=Xi(r).withIndex(t._queryParams.getIndex());if(qo(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=jo(e.serverSyncTree_,t._path,a);else{var o=Yo(e.serverSyncTree_,t);i=zo(e.serverSyncTree_,t._path,a,o)}return Ds(e.eventQueue_,t._path,i),Vo(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return Ys(e,"get for query "+_t(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new vu(t,new pu(e._repo,e._path),e._queryParams.getIndex())}))}var _u=function(){function e(t){f(this,e),this.callbackContext=t}return y(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new cu("value",this,new vu(e.snapshotNode,new pu(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new hu(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),bu=function(){function e(t,n){f(this,e),this.eventType=t,this.callbackContext=n}return y(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new hu(this,e,t):null}},{key:"createEvent",value:function(e,t){Ge(null!=e.childName,"Child events should have a childName.");var n=mu(new pu(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new cu(e.type,this,new vu(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function wu(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){Gs(e._repo,e,l),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new fu(n,a||void 0),l="value"===t?new _u(u):new bu(t,u);return function(e,t,n){var r;r=".info"===ii(t._path)?qo(e.infoSyncTree_,t,n):qo(e.serverSyncTree_,t,n),As(e.eventQueue_,t._path,r)}(e._repo,e,l),function(){return Gs(e._repo,e,l)}}function xu(e,t,n,r){return wu(e,"value",t,n,r)}!function(e){Ge(!yo,"__referenceConstructor has already been defined"),yo=e}(pu),function(e){Ge(!xo,"__referenceConstructor has already been defined"),xo=e}(pu);var Eu="FIREBASE_DATABASE_EMULATOR_HOST",Cu={},Su=!1;function Tu(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||dr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cr("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=ou(a,i),u=s.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"/react-nim",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Eu]),l?(o=!0,a="http://".concat(l,"?ns=").concat(u.namespace),u=(s=ou(a,i)).repoInfo):o=!s.repoInfo.secure;var c=i&&o?new Rr(Rr.OWNER):new Pr(e.name,e.options,t);Ns("Invalid Firebase Database URL",s),hi(s.path)||dr("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Cu[t.name];i||(i={},Cu[t.name]=i);var a=i[e.toURLString()];a&&dr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Us(e,Su,n,r),i[e.toURLString()]=a,a}(u,e,c,new Nr(e.name,n));return new Iu(h,e)}var Iu=function(){function e(t,n){f(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return y(e,[{key:"_repo",get:function(){return this._instanceStarted||(js(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new pu(this._repo,ri())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Cu[t];n&&n[e.key]===e||dr("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Qs(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&dr("Cannot call "+e+" on a deleted database.")}}]),e}();function Nu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Mt(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&dr("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&dr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Rr(Rr.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:ct(r.mockUserToken,e.app.options.projectId);a=new Rr(o)}!function(e,t,n,r){e.repoInfo_=new Fr("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}_i.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},_i.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Xn=e}(Nn),En(new Ft("database",(function(e,t){var n=t.instanceIdentifier;return Tu(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),An(Yn,$n,e),An(Yn,$n,"esm2017")}();function Pu(){return Pu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Pu.apply(this,arguments)}An("firebase","10.0.0","app");function Ru(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Au;function Du(){return Ue({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ou=Du,Lu=new mt("auth","Firebase",Du()),Mu=new Qt("@firebase/auth");function Fu(e){if(Mu.logLevel<=zt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mu.warn.apply(Mu,["Auth (".concat(Nn,"): ").concat(e)].concat(n))}}function Uu(e){if(Mu.logLevel<=zt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mu.error.apply(Mu,["Auth (".concat(Nn,"): ").concat(e)].concat(n))}}function ju(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw qu.apply(void 0,[e].concat(n))}function Vu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qu.apply(void 0,[e].concat(n))}function zu(e,t,n){var r=Object.assign(Object.assign({},Ou()),Ue({},t,n));return new mt("auth","Firebase",r).create(t,{appName:e.name})}function qu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return Lu.create.apply(Lu,[e].concat(n))}function Bu(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw qu.apply(void 0,[t].concat(r))}}function Hu(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Uu(t),new Error(t)}function Wu(e,t){e||Hu(t)}function Ku(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Gu(){return"http:"===Qu()||"https:"===Qu()}function Qu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Yu(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Gu()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var $u=function(){function e(t,n){f(this,e),this.shortDelay=t,this.longDelay=n,Wu(n>t,"Short delay should be less than long delay!"),this.isMobile=ft()||dt()}return y(e,[{key:"get",value:function(){return Yu()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Xu(e,t){Wu(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ju=function(){function e(){f(this,e)}return y(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Hu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Hu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Hu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Zu=(Ue(Au={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ue(Au,"MISSING_CUSTOM_TOKEN","internal-error"),Ue(Au,"INVALID_IDENTIFIER","invalid-email"),Ue(Au,"MISSING_CONTINUE_URI","internal-error"),Ue(Au,"INVALID_PASSWORD","wrong-password"),Ue(Au,"MISSING_PASSWORD","missing-password"),Ue(Au,"EMAIL_EXISTS","email-already-in-use"),Ue(Au,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ue(Au,"INVALID_IDP_RESPONSE","invalid-credential"),Ue(Au,"INVALID_PENDING_TOKEN","invalid-credential"),Ue(Au,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ue(Au,"MISSING_REQ_TYPE","internal-error"),Ue(Au,"EMAIL_NOT_FOUND","user-not-found"),Ue(Au,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ue(Au,"EXPIRED_OOB_CODE","expired-action-code"),Ue(Au,"INVALID_OOB_CODE","invalid-action-code"),Ue(Au,"MISSING_OOB_CODE","internal-error"),Ue(Au,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ue(Au,"INVALID_ID_TOKEN","invalid-user-token"),Ue(Au,"TOKEN_EXPIRED","user-token-expired"),Ue(Au,"USER_NOT_FOUND","user-token-expired"),Ue(Au,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ue(Au,"INVALID_CODE","invalid-verification-code"),Ue(Au,"INVALID_SESSION_INFO","invalid-verification-id"),Ue(Au,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ue(Au,"MISSING_SESSION_INFO","missing-verification-id"),Ue(Au,"SESSION_EXPIRED","code-expired"),Ue(Au,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ue(Au,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ue(Au,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ue(Au,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ue(Au,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ue(Au,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ue(Au,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ue(Au,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ue(Au,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ue(Au,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ue(Au,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ue(Au,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Ue(Au,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Ue(Au,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Ue(Au,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Ue(Au,"MISSING_CLIENT_TYPE","missing-client-type"),Ue(Au,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Ue(Au,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Ue(Au,"INVALID_REQ_TYPE","invalid-req-type"),Au),el=new $u(3e4,6e4);function tl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function nl(e,t,n,r){return rl.apply(this,arguments)}function rl(){return rl=Be(ze().mark((function e(t,n,r,i){var a,o=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",il(t,a,Be(ze().mark((function e(){var a,o,s,u;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=It(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ju.fetch()(ul(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),rl.apply(this,arguments)}function il(e,t,n){return al.apply(this,arguments)}function al(){return al=Be(ze().mark((function e(t,n,r){var i,a,o,s,u,c,h,f,d,p;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Zu),n),e.prev=2,a=new ll(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw cl(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),h=l(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw cl(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw cl(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw cl(t,"user-disabled",s);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw zu(t,p,d);case 34:ju(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof yt)){e.next=41;break}throw e.t0;case 41:ju(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),al.apply(this,arguments)}function ol(e,t,n,r){return sl.apply(this,arguments)}function sl(){return sl=Be(ze().mark((function e(t,n,r,i){var a,o,s=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,nl(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ju(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),sl.apply(this,arguments)}function ul(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Xu(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ll=function(){function e(t){var n=this;f(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Vu(n.auth,"network-request-failed"))}),el.get())}))}return y(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function cl(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Vu(e,t,r);return i.customData._tokenResponse=n,i}function hl(e,t){return fl.apply(this,arguments)}function fl(){return fl=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nl(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),fl.apply(this,arguments)}function dl(e,t){return pl.apply(this,arguments)}function pl(){return pl=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nl(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),pl.apply(this,arguments)}function vl(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function yl(){return yl=Be(ze().mark((function e(t){var n,r,i,a,o,s,u=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Mt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Bu((a=gl(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:vl(ml(a.auth_time)),issuedAtTime:vl(ml(a.iat)),expirationTime:vl(ml(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),yl.apply(this,arguments)}function ml(e){return 1e3*Number(e)}function gl(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Uu("JWT malformed, contained fewer than 3 sections"),null;try{var a=et(r);return a?JSON.parse(a):(Uu("Failed to decode base64 JWT payload"),null)}catch(o){return Uu("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function kl(e,t){return _l.apply(this,arguments)}function _l(){return _l=Be(ze().mark((function e(t,n){var r=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof yt&&bl(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),_l.apply(this,arguments)}function bl(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var wl=function(){function e(t){f(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return y(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Be(ze().mark((function t(){return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),xl=function(){function e(t,n){f(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return y(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=vl(this.lastLoginAt),this.creationTime=vl(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function El(e){return Cl.apply(this,arguments)}function Cl(){return Cl=Be(ze().mark((function e(t){var n,r,i,a,o,s,u,l,c,h,f;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,kl(t,dl(r,{idToken:i}));case 6:Bu(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Ru(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=Tl(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!l&&c,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new xl(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}function Sl(){return(Sl=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Mt(t),e.next=3,El(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tl(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(h(n),h(t))}function Il(e,t){return Nl.apply(this,arguments)}function Nl(){return Nl=Be(ze().mark((function e(t,n){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,il(t,{},Be(ze().mark((function e(){var r,i,a,o,s,u;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=It({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=ul(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ju.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Nl.apply(this,arguments)}var Pl=function(){function e(){f(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return y(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Bu(e.idToken,"internal-error"),Bu("undefined"!==typeof e.idToken,"internal-error"),Bu("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=gl(e);return Bu(t,"internal-error"),Bu("undefined"!==typeof t.exp,"internal-error"),Bu("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Be(ze().mark((function e(t){var n,r=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Bu(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Be(ze().mark((function e(t,n){var r,i,a,o;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Il(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Hu("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Bu("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Bu("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Bu("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Rl(e,t){Bu("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Al=function(){function e(t){f(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Ru(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new xl(a.createdAt||void 0,a.lastLoginAt||void 0)}return y(e,[{key:"getIdToken",value:function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kl(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Bu(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return yl.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Sl.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Bu(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Bu(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Be(ze().mark((function e(t){var n,r,i=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,El(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Be(ze().mark((function e(){var t;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,kl(this,hl(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,l,c,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(l=n.createdAt)&&void 0!==l?l:void 0,g=null!==(c=n.lastLoginAt)&&void 0!==c?c:void 0,k=n.uid,_=n.emailVerified,b=n.isAnonymous,w=n.providerData,x=n.stsTokenManager;Bu(k&&x,t,"internal-error");var E=Pl.fromJSON(this.name,x);Bu("string"===typeof k,t,"internal-error"),Rl(h,t.name),Rl(f,t.name),Bu("boolean"===typeof _,t,"internal-error"),Bu("boolean"===typeof b,t,"internal-error"),Rl(d,t.name),Rl(p,t.name),Rl(v,t.name),Rl(y,t.name),Rl(m,t.name),Rl(g,t.name);var C=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return w&&Array.isArray(w)&&(C.providerData=w.map((function(e){return Object.assign({},e)}))),y&&(C._redirectEventId=y),C}},{key:"_fromIdTokenResponse",value:function(){var t=Be(ze().mark((function t(n,r){var i,a,o,s=arguments;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Pl).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,El(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Dl=new Map;function Ol(e){Wu(e instanceof Function,"Expected a class definition");var t=Dl.get(e);return t?(Wu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Dl.set(e,t),t)}var Ll=function(){function e(){f(this,e),this.type="NONE",this.storage={}}return y(e,[{key:"_isAvailable",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ll.type="NONE";var Ml=Ll;function Fl(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Ul=function(){function e(t,n,r){f(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Fl(this.userKey,a.apiKey,o),this.fullPersistenceKey=Fl("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return y(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Be(ze().mark((function e(){var t;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Al._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Be(ze().mark((function t(n,r){var i,a,o,s,u,l,c,h,f,d,p,v=arguments;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ol(Ml),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ol(Ml),s=Fl(i,n.config.apiKey,n.name),u=null,l=C(r),t.prev=10,l.s();case 12:if((c=l.n()).done){t.next=29;break}return h=c.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=Al._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function jl(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Bl(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Vl(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Wl(t))return"Blackberry";if(Kl(t))return"Webos";if(zl(t))return"Safari";if((t.includes("chrome/")||ql(t))&&!t.includes("edge/"))return"Chrome";if(Hl(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Vl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht();return/firefox\//i.test(e)}function zl(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ql(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht();return/crios\//i.test(e)}function Bl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht();return/iemobile/i.test(e)}function Hl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht();return/android/i.test(e)}function Wl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht();return/blackberry/i.test(e)}function Kl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht();return/webos/i.test(e)}function Gl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ql(){return function(){var e=ht();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Yl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht();return Gl(e)||Hl(e)||Kl(e)||Wl(e)||/windows phone/i.test(e)||Bl(e)}function $l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=jl(ht());break;case"Worker":t="".concat(jl(ht()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Nn,"/").concat(r)}function Xl(e,t){return Jl.apply(this,arguments)}function Jl(){return Jl=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nl(t,"GET","/v2/recaptchaConfig",tl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jl.apply(this,arguments)}function Zl(e){return void 0!==e&&void 0!==e.enterprise}var ec=y((function e(t){if(f(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function tc(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Vu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function nc(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var rc=function(){function e(t){f(this,e),this.type="recaptcha-enterprise",this.auth=uc(t)}return y(e,[{key:"verify",value:function(){var e=Be(ze().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Zl(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Be(ze().mark((function e(n,r){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Xl(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new ec(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Zl(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));tc("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ic(e,t,n){return ac.apply(this,arguments)}function ac(){return ac=Be(ze().mark((function e(t,n,r){var i,a,o,s,u=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new rc(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),ac.apply(this,arguments)}var oc=function(){function e(t){f(this,e),this.auth=t,this.queue=[]}return y(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Be(ze().mark((function e(t){var n,r,i,a,o,s,u;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=C(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=C(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(l){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),sc=function(){function e(t,n,r,i){f(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lc(this),this.idTokenSubscription=new lc(this),this.beforeStateQueue=new oc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lu,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return y(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ol(t)),this._initializationPromise=this.queue(Be(ze().mark((function r(){var i,a;return ze().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Ul.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Be(ze().mark((function e(){var t;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Be(ze().mark((function e(t){var n,r,i,a,o,s,u;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Bu(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,El(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Mt(t):null)&&Bu(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Be(ze().mark((function e(t){var n,r=this,i=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Bu(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Be(ze().mark((function n(){return ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ol(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=Be(ze().mark((function e(){var t,n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xl(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new ec(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new rc(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new mt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Be(ze().mark((function e(t,n){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Bu(n=t&&Ol(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Ul.create(this,[Ol(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Be(ze().mark((function e(t){var n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Be(ze().mark((function e(t){var n=this;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Bu(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Bu(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$l(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Be(ze().mark((function e(){var t,n,r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ue({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Be(ze().mark((function e(){var t,n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Fu("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function uc(e){return Mt(e)}var lc=function(){function e(t){var n=this;f(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new At(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return y(e,[{key:"next",get:function(){return Bu(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function cc(e,t,n){var r=uc(e);Bu(r._canInitEmulator,r,"emulator-config-failed"),Bu(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=hc(t),o=function(e){var t=hc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:fc(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:fc(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function hc(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function fc(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var dc=function(){function e(t,n){f(this,e),this.providerId=t,this.signInMethod=n}return y(e,[{key:"toJSON",value:function(){return Hu("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Hu("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Hu("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Hu("not implemented")}}]),e}();function pc(e,t){return vc.apply(this,arguments)}function vc(){return vc=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nl(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function yc(e,t){return mc.apply(this,arguments)}function mc(){return mc=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(t,"POST","/v1/accounts:signInWithPassword",tl(t,n)));case 1:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}function gc(e,t){return kc.apply(this,arguments)}function kc(){return kc=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(t,"POST","/v1/accounts:signInWithEmailLink",tl(t,n)));case 1:case"end":return e.stop()}}),e)}))),kc.apply(this,arguments)}function _c(e,t){return bc.apply(this,arguments)}function bc(){return bc=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(t,"POST","/v1/accounts:signInWithEmailLink",tl(t,n)));case 1:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}var wc=function(e){g(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return y(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Be(ze().mark((function e(t){var n,r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,ic(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",yc(t,i));case 11:return e.abrupt("return",yc(t,r).catch(function(){var e=Be(ze().mark((function e(n){var i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,ic(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",yc(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",gc(t,{email:this._email,oobCode:this._password}));case 13:ju(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",pc(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",_c(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ju(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(dc);function xc(e,t){return Ec.apply(this,arguments)}function Ec(){return Ec=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(t,"POST","/v1/accounts:signInWithIdp",tl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ec.apply(this,arguments)}var Cc=function(e){g(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return y(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return xc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,xc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,xc(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=It(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ju("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ru(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(dc);function Sc(e,t){return Tc.apply(this,arguments)}function Tc(){return Tc=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nl(t,"POST","/v1/accounts:sendVerificationCode",tl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tc.apply(this,arguments)}function Ic(){return Ic=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(t,"POST","/v1/accounts:signInWithPhoneNumber",tl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ic.apply(this,arguments)}function Nc(){return Nc=Be(ze().mark((function e(t,n){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol(t,"POST","/v1/accounts:signInWithPhoneNumber",tl(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw cl(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Nc.apply(this,arguments)}var Pc=Ue({},"USER_NOT_FOUND","user-not-found");function Rc(){return Rc=Be(ze().mark((function e(t,n){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ol(t,"POST","/v1/accounts:signInWithPhoneNumber",tl(t,r),Pc));case 2:case"end":return e.stop()}}),e)}))),Rc.apply(this,arguments)}var Ac=function(e){g(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone","phone")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ic.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Nc.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Rc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(dc);var Dc=function(){function e(t){var n,r,i,a,o,s;f(this,e);var u=Nt(Pt(t)),l=null!==(n=u.apiKey)&&void 0!==n?n:null,c=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Bu(l&&c&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=c,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return y(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Nt(Pt(e)).link,n=t?Nt(Pt(t)).deep_link_id:null,r=Nt(Pt(e)).deep_link_id;return(r?Nt(Pt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Oc=function(){function e(){f(this,e),this.providerId=e.PROVIDER_ID}return y(e,null,[{key:"credential",value:function(e,t){return wc._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Dc.parseLink(t);return Bu(n,"argument-error"),wc._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Oc.PROVIDER_ID="password",Oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Lc=function(){function e(t){f(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return y(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Mc=function(e){g(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).scopes=[],e}return y(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(Lc),Fc=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.call(this,"facebook.com")}return y(n,null,[{key:"credential",value:function(e){return Cc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Mc);Fc.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fc.PROVIDER_ID="facebook.com";var Uc=function(e){g(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return y(n,null,[{key:"credential",value:function(e,t){return Cc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Mc);Uc.GOOGLE_SIGN_IN_METHOD="google.com",Uc.PROVIDER_ID="google.com";var jc=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.call(this,"github.com")}return y(n,null,[{key:"credential",value:function(e){return Cc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Mc);jc.GITHUB_SIGN_IN_METHOD="github.com",jc.PROVIDER_ID="github.com";var Vc=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.call(this,"twitter.com")}return y(n,null,[{key:"credential",value:function(e,t){return Cc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Mc);function zc(e,t){return qc.apply(this,arguments)}function qc(){return qc=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(t,"POST","/v1/accounts:signUp",tl(t,n)));case 1:case"end":return e.stop()}}),e)}))),qc.apply(this,arguments)}Vc.TWITTER_SIGN_IN_METHOD="twitter.com",Vc.PROVIDER_ID="twitter.com";var Bc=function(){function e(t){f(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return y(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Be(ze().mark((function t(n,r,i){var a,o,s,u,l=arguments;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,Al._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Hc(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Be(ze().mark((function t(n,r,i){var a;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Hc(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Hc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Wc=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o,s;return f(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(b(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return y(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(yt);function Kc(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Wc._fromErrorAndOperation(e,n,t,r);throw n}))}function Gc(e,t){return Qc.apply(this,arguments)}function Qc(){return Qc=Be(ze().mark((function e(t,n){var r,i,a=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=kl,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Bc._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Qc.apply(this,arguments)}function Yc(e,t){return $c.apply(this,arguments)}function $c(){return $c=Be(ze().mark((function e(t,n){var r,i,a,o,s,u,l=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,kl(t,Kc(i,a,n,t),r);case 6:return Bu((o=e.sent).idToken,i,"internal-error"),Bu(s=gl(o.idToken),i,"internal-error"),u=s.sub,Bu(t.uid===u,i,"user-mismatch"),e.abrupt("return",Bc._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&ju(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),$c.apply(this,arguments)}function Xc(e,t){return Jc.apply(this,arguments)}function Jc(){return Jc=Be(ze().mark((function e(t,n){var r,i,a,o,s=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Kc(t,i,n);case 4:return a=e.sent,e.next=7,Bc._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Jc.apply(this,arguments)}function Zc(e,t){return eh.apply(this,arguments)}function eh(){return eh=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xc(uc(t),n));case 1:case"end":return e.stop()}}),e)}))),eh.apply(this,arguments)}function th(e,t,n){return nh.apply(this,arguments)}function nh(){return nh=Be(ze().mark((function e(t,n,r){var i,a,o,s,u,l,c;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=uc(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,ic(a,o,"signUpPassword");case 5:u=e.sent,s=zc(a,u),e.next=10;break;case 9:s=zc(a,o).catch(function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,ic(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",zc(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return l=e.sent,e.next=15,Bc._fromIdTokenResponse(a,"signIn",l);case 15:return c=e.sent,e.next=18,a._updateCurrentUser(c.user);case 18:return e.abrupt("return",c);case 19:case"end":return e.stop()}}),e)}))),nh.apply(this,arguments)}function rh(e,t,n){return Zc(Mt(e),Oc.credential(t,n))}function ih(e,t){return nl(e,"POST","/v2/accounts/mfaEnrollment:start",tl(e,t))}function ah(e,t){return nl(e,"POST","/v2/accounts/mfaEnrollment:start",tl(e,t))}function oh(e,t){return nl(e,"POST","/v2/accounts/mfaEnrollment:finalize",tl(e,t))}new WeakMap;var sh="__sak",uh=function(){function e(t,n){f(this,e),this.storageRetriever=t,this.type=n}return y(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var lh=function(e){g(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ht();return zl(e)||Gl(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Yl(),e._shouldAllowMigration=!0,e}return y(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Ql()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Be(ze().mark((function e(t,r){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pu(k(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Be(ze().mark((function e(t){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pu(k(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pu(k(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(uh);lh.type="LOCAL";var ch=lh,hh=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return y(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(uh);hh.type="SESSION";var fh=hh;function dh(e){return Promise.all(e.map(function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ph=function(){function e(t){f(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return y(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Be(ze().mark((function e(t){var n,r,i,a,o,s,u,l;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,dh(u);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function vh(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ph.receivers=[];var yh=function(){function e(t){f(this,e),this.target=t,this.handlers=new Set}return y(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Be(ze().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var l=vh("",20);i.port1.start();var c=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===l)switch(n.data.status){case"ack":clearTimeout(c),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(c),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function mh(){return window}function gh(e){mh().location.href=e}function kh(){return"undefined"!==typeof mh().WorkerGlobalScope&&"function"===typeof mh().importScripts}function _h(){return bh.apply(this,arguments)}function bh(){return(bh=Be(ze().mark((function e(){var t;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function wh(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var xh="firebaseLocalStorageDb",Eh="firebaseLocalStorage",Ch="fbase_key",Sh=function(){function e(t){f(this,e),this.request=t}return y(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Th(e,t){return e.transaction([Eh],t?"readwrite":"readonly").objectStore(Eh)}function Ih(){var e=indexedDB.deleteDatabase(xh);return new Sh(e).toPromise()}function Nh(){var e=indexedDB.open(xh,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Eh,{keyPath:Ch})}catch(r){n(r)}})),e.addEventListener("success",Be(ze().mark((function n(){var r;return ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Eh)){n.next=12;break}return r.close(),n.next=5,Ih();case 5:return n.t0=t,n.next=8,Nh();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ph(e,t,n){return Rh.apply(this,arguments)}function Rh(){return Rh=Be(ze().mark((function e(t,n,r){var i,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Th(t,!0).put((Ue(i={},Ch,n),Ue(i,"value",r),i)),e.abrupt("return",new Sh(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Rh.apply(this,arguments)}function Ah(e,t){return Dh.apply(this,arguments)}function Dh(){return Dh=Be(ze().mark((function e(t,n){var r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Th(t,!1).get(n),e.next=3,new Sh(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Dh.apply(this,arguments)}function Oh(e,t){var n=Th(e,!0).delete(t);return new Sh(n).toPromise()}var Lh=function(){function e(){f(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return y(e,[{key:"_openDb",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Nh();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Be(ze().mark((function e(t){var n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kh()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Be(ze().mark((function e(){var t=this;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ph._getInstance(kh()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Be(ze().mark((function e(n,r){var i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Be(ze().mark((function e(){var t,n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_h();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new yh(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&wh()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Be(ze().mark((function e(){var t;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Nh();case 5:return t=e.sent,e.next=8,Ph(t,sh,"1");case 8:return e.next=10,Oh(t,sh);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Be(ze().mark((function e(t,n){var r=this;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ph(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ah(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Be(ze().mark((function e(t){var n=this;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Oh(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Be(ze().mark((function e(){var t,n,r,i,a,o,s,u,l,c,h;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Th(e,!1).getAll();return new Sh(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=C(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(l=0,c=Object.keys(this.localCache);l<c.length;l++)h=c[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Be(ze().mark((function t(){return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Lh.type="LOCAL";var Mh=Lh;function Fh(e,t){return nl(e,"POST","/v2/accounts/mfaSignIn:start",tl(e,t))}function Uh(e,t){return nl(e,"POST","/v2/accounts/mfaSignIn:finalize",tl(e,t))}nc("rcb"),new $u(3e4,6e4);var jh="recaptcha";function Vh(e,t,n){return zh.apply(this,arguments)}function zh(){return zh=Be(ze().mark((function e(t,n,r){var i,a,o,s,u,l,c,h,f;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Bu("string"===typeof a,t,"argument-error"),Bu(r.type===jh,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Bu("enroll"===s.type,t,"internal-error"),e.next=13,ih(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Bu("signin"===s.type,t,"internal-error"),Bu(l=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Fh(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return c=e.sent,e.abrupt("return",c.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Sc(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),zh.apply(this,arguments)}var qh=function(){function e(t){f(this,e),this.providerId=e.PROVIDER_ID,this.auth=uc(t)}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return Vh(this.auth,e,Mt(t))}}],[{key:"credential",value:function(e,t){return Ac._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ac._fromTokenResponse(n,r):null}}]),e}();function Bh(e,t){return t?Ol(t):(Bu(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}qh.PROVIDER_ID="phone",qh.PHONE_SIGN_IN_METHOD="phone";var Hh=function(e){g(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this,"custom","custom")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return xc(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return xc(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return xc(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(dc);function Wh(e){return Xc(e.auth,new Hh(e),e.bypassAuthState)}function Kh(e){var t=e.auth,n=e.user;return Bu(n,t,"internal-error"),Yc(n,new Hh(e),e.bypassAuthState)}function Gh(e){return Qh.apply(this,arguments)}function Qh(){return Qh=Be(ze().mark((function e(t){var n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Bu(r=t.user,n,"internal-error"),e.abrupt("return",Gc(r,new Hh(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Qh.apply(this,arguments)}var Yh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];f(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return y(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Be(ze().mark((function t(n,r){return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Be(ze().mark((function e(t){var n,r,i,a,o,s,u;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wh;case"linkViaPopup":case"linkViaRedirect":return Gh;case"reauthViaPopup":case"reauthViaRedirect":return Kh;default:ju(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Wu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Wu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),$h=new $u(2e3,1e4);var Xh=function(e){g(n,e);var t=w(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=b(s),s}return y(n,[{key:"executeNotNull",value:function(){var e=Be(ze().mark((function e(){var t;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Bu(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Be(ze().mark((function e(){var t,n=this;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wu(1===this.filter.length,"Popup operations only handle one event"),t=vh(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Vu(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Vu(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Vu(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,$h.get())}()}}]),n}(Yh);Xh.currentPopupAction=null;var Jh="pendingRedirect",Zh=new Map,ef=function(e){g(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return y(n,[{key:"execute",value:function(){var e=Be(ze().mark((function e(){var t,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Zh.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,tf(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Pu(k(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Zh.set(this.auth._key(),t);case 21:return this.bypassAuthState||Zh.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Be(ze().mark((function e(t){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Pu(k(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Pu(k(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Yh);function tf(e,t){return nf.apply(this,arguments)}function nf(){return nf=Be(ze().mark((function e(t,n){var r,i,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=of(n),i=af(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),nf.apply(this,arguments)}function rf(e,t){Zh.set(e._key(),t)}function af(e){return Ol(e._redirectPersistence)}function of(e){return Fl(Jh,e.config.apiKey,e.name)}function sf(e,t){return uf.apply(this,arguments)}function uf(){return uf=Be(ze().mark((function e(t,n){var r,i,a,o,s,u=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=uc(t),a=Bh(i,n),o=new ef(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),uf.apply(this,arguments)}var lf=function(){function e(t){f(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return y(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!hf(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Vu(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cf(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(cf(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function cf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function hf(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ff(e){return df.apply(this,arguments)}function df(){return df=Be(ze().mark((function e(t){var n,r=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",nl(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),df.apply(this,arguments)}var pf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vf=/^https?/;function yf(){return yf=Be(ze().mark((function e(t){var n,r,i,a,o;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ff(t);case 4:n=e.sent,r=n.authorizedDomains,i=C(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!mf(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ju(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),yf.apply(this,arguments)}function mf(e){var t=Ku(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!vf.test(r))return!1;if(pf.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var gf=new $u(3e4,6e4);function kf(){var e=mh().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var _f=null;function bf(e){return _f=_f||function(e){return new Promise((function(t,n){var r,i,a;function o(){kf(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){kf(),n(Vu(e,"network-request-failed"))},timeout:gf.get()})}if(null===(i=null===(r=mh().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=mh().gapi)||void 0===a?void 0:a.load)){var s=nc("iframefcb");return mh()[s]=function(){gapi.load?o():n(Vu(e,"network-request-failed"))},tc("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw _f=null,e}))}(e),_f}var wf=new $u(5e3,15e3),xf="__/auth/iframe",Ef="emulator/auth/iframe",Cf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tf(e){var t=e.config;Bu(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Xu(t,Ef):"https://".concat(e.config.authDomain,"/").concat(xf),r={apiKey:t.apiKey,appName:e.name,v:Nn},i=Sf.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(It(r).slice(1))}function If(e){return Nf.apply(this,arguments)}function Nf(){return Nf=Be(ze().mark((function e(t){var n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bf(t);case 2:return n=e.sent,Bu(r=mh().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Tf(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cf,dontclear:!0},(function(e){return new Promise(function(){var n=Be(ze().mark((function n(r,i){var a,o,s;return ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){mh().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Vu(t,"network-request-failed"),o=mh().setTimeout((function(){i(a)}),wf.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Nf.apply(this,arguments)}var Pf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rf=function(){function e(t){f(this,e),this.window=t,this.associatedEvent=null}return y(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Af(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Pf),{width:r.toString(),height:i.toString(),top:a,left:o}),c=ht().toLowerCase();n&&(s=ql(c)?"_blank":n),Vl(c)&&(t=t||"http://localhost",u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Gl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Rf(null);var f=window.open(t||"",s,h);Bu(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Rf(f)}var Df="__/auth/handler",Of="emulator/auth/handler",Lf=encodeURIComponent("fac");function Mf(e,t,n,r,i,a){return Ff.apply(this,arguments)}function Ff(){return Ff=Be(ze().mark((function e(t,n,r,i,a,o){var s,u,c,h,f,d,p,v,y,m,g,k,_;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bu(t.config.authDomain,t,"auth-domain-config-required"),Bu(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Nn,eventId:a},n instanceof Lc)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Et(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,c=Object.entries(o||{});u<c.length;u++)h=l(c[u],2),f=h[0],d=h[1],s[f]=d;for(n instanceof Mc&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,y=0,m=Object.keys(v);y<m.length;y++)g=m[y],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,_=k?"#".concat(Lf,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(Uf(t),"?").concat(It(v).slice(1)).concat(_));case 13:case"end":return e.stop()}}),e)}))),Ff.apply(this,arguments)}function Uf(e){var t=e.config;return t.emulator?Xu(t,Of):"https://".concat(t.authDomain,"/").concat(Df)}var jf="webStorageSupport",Vf=function(){function e(){f(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fh,this._completeRedirectFn=sf,this._overrideRedirectResult=rf}return y(e,[{key:"_openPopup",value:function(){var e=Be(ze().mark((function e(t,n,r,i){var a,o;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wu(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Mf(t,n,r,Ku(),i);case 3:return o=e.sent,e.abrupt("return",Af(t,o,vh()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Be(ze().mark((function e(t,n,r,i){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Mf(t,n,r,Ku(),i);case 4:return gh(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Wu(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Be(ze().mark((function e(t){var n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,If(t);case 2:return n=e.sent,r=new lf(t),n.register("authEvent",(function(e){return Bu(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(jf,{type:jf},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[jf];void 0!==i&&t(!!i),ju(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return yf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Yl()||zl()||Gl()}}]),e}(),zf=Vf,qf=function(){function e(t){f(this,e),this.factorId=t}return y(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Hu("unexpected MultiFactorSessionType")}}}]),e}(),Bf=function(e){g(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone")).credential=e,r}return y(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return nl(e,"POST","/v2/accounts/mfaEnrollment:finalize",tl(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return nl(e,"POST","/v2/accounts/mfaSignIn:finalize",tl(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(qf);(function(){function e(){f(this,e)}return y(e,null,[{key:"assertion",value:function(e){return Bf._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Hf=function(){function e(){f(this,e)}return y(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Wf._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Wf._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Be(ze().mark((function e(t){var n,r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bu("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,ah(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",Kf._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Hf.FACTOR_ID="totp";var Wf=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return y(n,[{key:"_finalizeEnroll",value:function(){var e=Be(ze().mark((function e(t,n,r){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bu("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",oh(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Be(ze().mark((function e(t,n){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bu(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Uh(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(qf),Kf=function(){function e(t,n,r,i,a,o,s){f(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return y(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Gf(e)||Gf(t))&&(r=!0),r&&(Gf(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Gf(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Gf(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Qf="@firebase/auth",Yf="1.0.0",$f=function(){function e(t){f(this,e),this.auth=t,this.internalListeners=new Map}return y(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Bu(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Xf,Jf=ut("authIdTokenMaxAge")||300,Zf=null;Xf="Browser",En(new Ft("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;Bu(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var l={apiKey:s,authDomain:u,clientPlatform:Xf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$l(Xf)},c=new sc(r,i,a,l);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ol);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),En(new Ft("auth-internal",(function(e){return function(e){return new $f(e)}(uc(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),An(Qf,Yf,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Xf)),An(Qf,Yf,"esm2017");var ed,td="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},nd={},rd=rd||{},id=td||self;function ad(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function od(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var sd="closure_uid_"+(1e9*Math.random()>>>0),ud=0;function ld(e,t,n){return e.call.apply(e.bind,arguments)}function cd(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function hd(e,t,n){return(hd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ld:cd).apply(null,arguments)}function fd(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function dd(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function pd(){this.s=this.s,this.o=this.o}pd.prototype.s=!1,pd.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,sd)&&e[sd]||(e[sd]=++ud))},pd.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vd=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function yd(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function md(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(ad(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function gd(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}gd.prototype.h=function(){this.defaultPrevented=!0};var kd=function(){if(!id.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{id.addEventListener("test",(function(){}),t),id.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function _d(e){return/^[\s\xa0]*$/.test(e)}function bd(){var e=id.navigator;return e&&(e=e.userAgent)?e:""}function wd(e){return-1!=bd().indexOf(e)}function xd(e){return xd[" "](e),e}xd[" "]=function(){};var Ed,Cd,Sd=wd("Opera"),Td=wd("Trident")||wd("MSIE"),Id=wd("Edge"),Nd=Id||Td,Pd=wd("Gecko")&&!(-1!=bd().toLowerCase().indexOf("webkit")&&!wd("Edge"))&&!(wd("Trident")||wd("MSIE"))&&!wd("Edge"),Rd=-1!=bd().toLowerCase().indexOf("webkit")&&!wd("Edge");function Ad(){var e=id.document;return e?e.documentMode:void 0}e:{var Dd="",Od=function(){var e=bd();return Pd?/rv:([^\);]+)(\)|;)/.exec(e):Id?/Edge\/([\d\.]+)/.exec(e):Td?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Rd?/WebKit\/(\S+)/.exec(e):Sd?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Od&&(Dd=Od?Od[1]:""),Td){var Ld=Ad();if(null!=Ld&&Ld>parseFloat(Dd)){Ed=String(Ld);break e}}Ed=Dd}if(id.document&&Td){var Md=Ad();Cd=Md||(parseInt(Ed,10)||void 0)}else Cd=void 0;var Fd=Cd;function Ud(e,t){if(gd.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Pd){e:{try{xd(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:jd[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ud.$.h.call(this)}}dd(Ud,gd);var jd={2:"touch",3:"pen",4:"mouse"};Ud.prototype.h=function(){Ud.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vd="closure_listenable_"+(1e6*Math.random()|0),zd=0;function qd(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++zd,this.fa=this.ia=!1}function Bd(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Hd(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Wd(e){var t={};for(var n in e)t[n]=e[n];return t}var Kd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gd(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Kd.length;a++)n=Kd[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Qd(e){this.src=e,this.g={},this.h=0}function Yd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=vd(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Bd(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $d(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Qd.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=$d(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new qd(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Xd="closure_lm_"+(1e6*Math.random()|0),Jd={};function Zd(e,t,n,r,i){if(r&&r.once)return tp(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Zd(e,t[a],n,r,i);return null}return n=up(n),e&&e[Vd]?e.O(t,n,od(r)?!!r.capture:!!r,i):ep(e,t,n,!1,r,i)}function ep(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=od(i)?!!i.capture:!!i,s=op(e);if(s||(e[Xd]=s=new Qd(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ap;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)kd||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ip(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function tp(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)tp(e,t[a],n,r,i);return null}return n=up(n),e&&e[Vd]?e.P(t,n,od(r)?!!r.capture:!!r,i):ep(e,t,n,!0,r,i)}function np(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)np(e,t[a],n,r,i);else r=od(r)?!!r.capture:!!r,n=up(n),e&&e[Vd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$d(a=e.g[t],n,r,i))&&(Bd(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=op(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$d(t,n,r,i)),(n=-1<e?t[e]:null)&&rp(n))}function rp(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Vd])Yd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ip(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=op(t))?(Yd(n,e),0==n.h&&(n.src=null,t[Xd]=null)):Bd(e)}}}function ip(e){return e in Jd?Jd[e]:Jd[e]="on"+e}function ap(e,t){if(e.fa)e=!0;else{t=new Ud(t,this);var n=e.listener,r=e.la||e.src;e.ia&&rp(e),e=n.call(r,t)}return e}function op(e){return(e=e[Xd])instanceof Qd?e:null}var sp="__closure_events_fn_"+(1e9*Math.random()>>>0);function up(e){return"function"===typeof e?e:(e[sp]||(e[sp]=function(t){return e.handleEvent(t)}),e[sp])}function lp(){pd.call(this),this.i=new Qd(this),this.S=this,this.J=null}function cp(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new gd(t,e);else if(t instanceof gd)t.target=t.target||e;else{var i=t;Gd(t=new gd(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=hp(o,r,!0,t)&&i}if(i=hp(o=t.g=e,r,!0,t)&&i,i=hp(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=hp(o=t.g=n[a],r,!1,t)&&i}function hp(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Yd(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}dd(lp,pd),lp.prototype[Vd]=!0,lp.prototype.removeEventListener=function(e,t,n,r){np(this,e,t,n,r)},lp.prototype.N=function(){if(lp.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bd(n[r]);delete t.g[e],t.h--}}this.J=null},lp.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},lp.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var fp=id.JSON.stringify,dp=function(){function e(t,n){f(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function pp(){var e=wp,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var vp=function(){function e(){f(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=yp.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),yp=new dp((function(){return new mp}),(function(e){return e.reset()})),mp=function(){function e(){f(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function gp(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function kp(e){id.setTimeout((function(){throw e}),0)}var _p,bp=!1,wp=new vp,xp=function(){var e=id.Promise.resolve(void 0);_p=function(){e.then(Ep)}},Ep=function(){for(var e;e=pp();){try{e.h.call(e.g)}catch(n){kp(n)}var t=yp;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}bp=!1};function Cp(e,t){lp.call(this),this.h=e||1,this.g=t||id,this.j=hd(this.qb,this),this.l=Date.now()}function Sp(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Tp(e,t,n){if("function"===typeof e)n&&(e=hd(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=hd(e.handleEvent,e)}return 2147483647<Number(t)?-1:id.setTimeout(e,t||0)}function Ip(e){e.g=Tp((function(){e.g=null,e.i&&(e.i=!1,Ip(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}dd(Cp,lp),(ed=Cp.prototype).ga=!1,ed.T=null,ed.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),cp(this,"tick"),this.ga&&(Sp(this),this.start()))}},ed.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ed.N=function(){Cp.$.N.call(this),Sp(this),delete this.g};var Np=function(e){g(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ip(this)}},{key:"N",value:function(){Pu(k(n.prototype),"N",this).call(this),this.g&&(id.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(pd);function Pp(e){pd.call(this),this.h=e,this.g={}}dd(Pp,pd);var Rp=[];function Ap(e,t,n,r){Array.isArray(n)||(n&&(Rp[0]=n.toString()),n=Rp);for(var i=0;i<n.length;i++){var a=Zd(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Dp(e){Hd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&rp(e)}),e),e.g={}}function Op(){this.g=!0}function Lp(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return fp(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Pp.prototype.N=function(){Pp.$.N.call(this),Dp(this)},Pp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Op.prototype.Ea=function(){this.g=!1},Op.prototype.info=function(){};var Mp={},Fp=null;function Up(){return Fp=Fp||new lp}function jp(e){gd.call(this,Mp.Ta,e)}function Vp(e){var t=Up();cp(t,new jp(t))}function zp(e,t){gd.call(this,Mp.STAT_EVENT,e),this.stat=t}function qp(e){var t=Up();cp(t,new zp(t,e))}function Bp(e,t){gd.call(this,Mp.Ua,e),this.size=t}function Hp(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return id.setTimeout((function(){e()}),t)}Mp.Ta="serverreachability",dd(jp,gd),Mp.STAT_EVENT="statevent",dd(zp,gd),Mp.Ua="timingevent",dd(Bp,gd);var Wp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Kp={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gp(){}function Qp(e){return e.h||(e.h=e.i())}function Yp(){}Gp.prototype.h=null;var $p,Xp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Jp(){gd.call(this,"d")}function Zp(){gd.call(this,"c")}function ev(){}function tv(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Pp(this),this.P=rv,e=Nd?125:void 0,this.V=new Cp(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new nv}function nv(){this.i=null,this.g="",this.h=!1}dd(Jp,gd),dd(Zp,gd),dd(ev,Gp),ev.prototype.g=function(){return new XMLHttpRequest},ev.prototype.i=function(){return{}},$p=new ev;var rv=45e3,iv={},av={};function ov(e,t,n){e.L=1,e.v=Cv(_v(t)),e.s=n,e.S=!0,sv(e,null)}function sv(e,t){e.G=Date.now(),hv(e),e.A=_v(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Uv(n.i,"t",r),e.C=0,n=e.l.J,e.h=new nv,e.g=jy(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Np(hd(e.Pa,e,e.g),e.O)),Ap(e.U,e.g,"readystatechange",e.nb),t=e.I?Wd(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Vp(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function uv(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function lv(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=cv(e,n))==av){4==t&&(e.o=4,qp(14),i=!1),Lp(e.j,e.m,null,"[Incomplete Response]");break}if(r==iv){e.o=4,qp(15),Lp(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Lp(e.j,e.m,r,null),yv(e,r)}uv(e)&&r!=av&&r!=iv&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,qp(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ry(t),t.M=!0,qp(11))):(Lp(e.j,e.m,n,"[Invalid Chunked Response]"),vv(e),pv(e))}function cv(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?av:(n=Number(t.substring(n,r)),isNaN(n)?iv:(r+=1)+n>t.length?av:(t=t.slice(r,r+n),e.C=r+n,t))}function hv(e){e.Y=Date.now()+e.P,fv(e,e.P)}function fv(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Hp(hd(e.lb,e),t)}function dv(e){e.B&&(id.clearTimeout(e.B),e.B=null)}function pv(e){0==e.l.H||e.J||Oy(e.l,e)}function vv(e){dv(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Sp(e.V),Dp(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function yv(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Wv(n.i,e)))if(!e.K&&Wv(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Dy(n),xy(n)}Py(n),qp(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Hp(hd(n.ib,n),6e3));if(1>=Hv(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else My(n,11)}else if((e.K||n.g==e)&&Dy(n),!_d(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;h.g||-1==c.indexOf("spdy")&&-1==c.indexOf("quic")&&-1==c.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Kv(h,h.h),h.h=null))}if(r.F){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,Ev(r.I,r.F,f))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Uy(r,r.J?r.pa:null,r.Y),d.K){Gv(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(dv(p),hv(p)),r.g=d}else Ny(r);0<n.j.length&&Cy(n)}else"stop"!=a[0]&&"close"!=a[0]||My(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?My(n,7):wy(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Vp()}catch(a){}}function mv(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ad(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(ad(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(ad(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(ed=tv.prototype).setTimeout=function(e){this.P=e},ed.nb=function(e){e=e.target;var t=this.M;t&&3==yy(e)?t.l():this.Pa(e)},ed.Pa=function(e){try{if(e==this.g)e:{var t=yy(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Nd||this.g&&(this.h.h||this.g.ja()||my(this.g)))){this.J||4!=t||7==n||Vp(),dv(this);var r=this.g.da();this.ca=r;t:if(uv(this)){var i=my(this.g);e="";var a=i.length,o=4==yy(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){vv(this),pv(this);var s="";break t}this.h.i=new id.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,l=this.g;if((u=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_d(u)){var c=u;break t}}c=null}if(!(r=c)){this.i=!1,this.o=3,qp(12),vv(this),pv(this);break e}Lp(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yv(this,r)}this.S?(lv(this,t,s),Nd&&this.i&&3==t&&(Ap(this.U,this.V,"tick",this.mb),this.V.start())):(Lp(this.j,this.m,s,null),yv(this,s)),4==t&&vv(this),this.i&&!this.J&&(4==t?Oy(this.l,this):(this.i=!1,hv(this)))}else(function(e){var t={};e=(e.g&&2<=yy(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!_d(e[n])){var r=gp(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,qp(12)):(this.o=0,qp(13)),vv(this),pv(this)}}}catch(t){}},ed.mb=function(){if(this.g){var e=yy(this.g),t=this.g.ja();this.C<t.length&&(dv(this),lv(this,e,t),this.i&&4!=e&&hv(this))}},ed.cancel=function(){this.J=!0,vv(this)},ed.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Vp(),qp(17)),vv(this),this.o=2,pv(this)):fv(this,this.Y-e)};var gv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kv(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof kv){this.h=e.h,bv(this,e.j),this.s=e.s,this.g=e.g,wv(this,e.m),this.l=e.l;var t=e.i,n=new Ov;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xv(this,n),this.o=e.o}else e&&(t=String(e).match(gv))?(this.h=!1,bv(this,t[1]||"",!0),this.s=Sv(t[2]||""),this.g=Sv(t[3]||"",!0),wv(this,t[4]),this.l=Sv(t[5]||"",!0),xv(this,t[6]||"",!0),this.o=Sv(t[7]||"")):(this.h=!1,this.i=new Ov(null,this.h))}function _v(e){return new kv(e)}function bv(e,t,n){e.j=n?Sv(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function wv(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function xv(e,t,n){t instanceof Ov?(e.i=t,function(e,t){t&&!e.j&&(Lv(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Mv(this,t),Uv(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Tv(t,Av)),e.i=new Ov(t,e.h))}function Ev(e,t,n){e.i.set(t,n)}function Cv(e){return Ev(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Sv(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Tv(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Iv),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Iv(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kv.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Tv(t,Nv,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Tv(t,Nv,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Tv(n,"/"==n.charAt(0)?Rv:Pv,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Tv(n,Dv)),e.join("")};var Nv=/[#\/\?@]/g,Pv=/[#\?:]/g,Rv=/[#\?]/g,Av=/[#\?@]/g,Dv=/#/g;function Ov(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Lv(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Mv(e,t){Lv(e),t=jv(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Fv(e,t){return Lv(e),t=jv(e,t),e.g.has(t)}function Uv(e,t,n){Mv(e,t),0<n.length&&(e.i=null,e.g.set(jv(e,t),yd(n)),e.h+=n.length)}function jv(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ed=Ov.prototype).add=function(e,t){Lv(this),this.i=null,e=jv(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ed.forEach=function(e,t){Lv(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},ed.ta=function(){Lv(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},ed.Z=function(e){Lv(this);var t=[];if("string"===typeof e)Fv(this,e)&&(t=t.concat(this.g.get(jv(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},ed.set=function(e,t){return Lv(this),this.i=null,Fv(this,e=jv(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ed.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ed.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Vv=y((function e(t,n){f(this,e),this.g=t,this.map=n}));function zv(e){this.l=e||qv,id.PerformanceNavigationTiming?e=0<(e=id.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(id.g&&id.g.Ka&&id.g.Ka()&&id.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qv=10;function Bv(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Hv(e){return e.h?1:e.g?e.g.size:0}function Wv(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Kv(e,t){e.g?e.g.add(t):e.h=t}function Gv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Qv(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=C(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return yd(e.i)}zv.prototype.cancel=function(){if(this.i=Qv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=C(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Yv,$v=function(){function e(){f(this,e)}return y(e,[{key:"stringify",value:function(e){return id.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return id.JSON.parse(e,void 0)}}]),e}();function Xv(){this.g=new $v}function Jv(e,t,n){var r=n||"";try{mv(e,(function(e,n){var i=e;od(e)&&(i=fp(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ey(e){this.l=e.fc||null,this.j=e.ob||!1}function ty(e,t){lp.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ny,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dd(ey,Gp),ey.prototype.g=function(){return new ty(this.l,this.j)},ey.prototype.i=(Yv={},function(){return Yv}),dd(ty,lp);var ny=0;function ry(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function iy(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ay(e)}function ay(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ed=ty.prototype).open=function(e,t){if(this.readyState!=ny)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ay(this)},ed.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||id).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ed.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,iy(this)),this.readyState=ny},ed.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ay(this)),this.g&&(this.readyState=3,ay(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof id.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ry(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ed.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?iy(this):ay(this),3==this.readyState&&ry(this)}},ed.Za=function(e){this.g&&(this.response=this.responseText=e,iy(this))},ed.Ya=function(e){this.g&&(this.response=e,iy(this))},ed.ka=function(){this.g&&iy(this)},ed.setRequestHeader=function(e,t){this.v.append(e,t)},ed.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ed.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ty.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var oy=id.JSON.parse;function sy(e){lp.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=uy,this.L=this.M=!1}dd(sy,lp);var uy="",ly=/^https?$/i,cy=["POST","PUT"];function hy(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fy(e),py(e)}function fy(e){e.F||(e.F=!0,cp(e,"complete"),cp(e,"error"))}function dy(e){if(e.h&&"undefined"!=typeof rd&&(!e.C[1]||4!=yy(e)||2!=e.da()))if(e.v&&4==yy(e))Tp(e.La,0,e);else if(cp(e,"readystatechange"),4==yy(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(gv)[1]||null;!a&&id.self&&id.self.location&&(a=id.self.location.protocol.slice(0,-1)),i=!ly.test(a?a.toLowerCase():"")}t=i}if(t)cp(e,"complete"),cp(e,"success");else{e.m=6;try{var o=2<yy(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",fy(e)}}finally{py(e)}}}function py(e,t){if(e.g){vy(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||cp(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function vy(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(id.clearTimeout(e.A),e.A=null)}function yy(e){return e.g?e.g.readyState:0}function my(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case uy:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Em){return null}}function gy(e){var t="";return Hd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ky(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=gy(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ev(e,t,n))}function _y(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function by(e){this.Ga=0,this.j=[],this.l=new Op,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_y("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_y("baseRetryDelayMs",5e3,e),this.hb=_y("retryDelaySeedMs",1e4,e),this.eb=_y("forwardChannelMaxRetries",2,e),this.xa=_y("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new zv(e&&e.concurrentRequestLimit),this.Ja=new Xv,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function wy(e){if(Ey(e),3==e.H){var t=e.W++,n=_v(e.I);if(Ev(n,"SID",e.K),Ev(n,"RID",t),Ev(n,"TYPE","terminate"),Ty(e,n),(t=new tv(e,e.l,t)).L=2,t.v=Cv(_v(n)),n=!1,id.navigator&&id.navigator.sendBeacon)try{n=id.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&id.Image&&((new Image).src=t.v,n=!0),n||(t.g=jy(t.l,null),t.g.ha(t.v)),t.G=Date.now(),hv(t)}Fy(e)}function xy(e){e.g&&(Ry(e),e.g.cancel(),e.g=null)}function Ey(e){xy(e),e.u&&(id.clearTimeout(e.u),e.u=null),Dy(e),e.i.cancel(),e.m&&("number"===typeof e.m&&id.clearTimeout(e.m),e.m=null)}function Cy(e){if(!Bv(e.i)&&!e.m){e.m=!0;var t=e.Na;_p||xp(),bp||(_p(),bp=!0),wp.add(t,e),e.C=0}}function Sy(e,t){var n;n=t?t.m:e.W++;var r=_v(e.I);Ev(r,"SID",e.K),Ev(r,"RID",n),Ev(r,"AID",e.V),Ty(e,r),e.o&&e.s&&ky(r,e.o,e.s),n=new tv(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Iy(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Kv(e.i,n),ov(n,r,t)}function Ty(e,t){e.na&&Hd(e.na,(function(e,n){Ev(t,n,e)})),e.h&&mv({},(function(e,n){Ev(t,n,e)}))}function Iy(e,t,n){n=Math.min(e.j.length,n);var r=e.h?hd(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var l=i[u].g,c=i[u].map;if(0>(l-=a))a=Math.max(0,i[u].g-100),s=!1;else try{Jv(c,o,"req"+l+"_")}catch(h){r&&r(c)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Ny(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;_p||xp(),bp||(_p(),bp=!0),wp.add(t,e),e.A=0}}function Py(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Hp(hd(e.Ma,e),Ly(e,e.A)),e.A++,!0)}function Ry(e){null!=e.B&&(id.clearTimeout(e.B),e.B=null)}function Ay(e){e.g=new tv(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=_v(e.wa);Ev(t,"RID","rpc"),Ev(t,"SID",e.K),Ev(t,"AID",e.V),Ev(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ev(t,"TO",e.qa),Ev(t,"TYPE","xmlhttp"),Ty(e,t),e.o&&e.s&&ky(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Cv(_v(t)),n.s=null,n.S=!0,sv(n,e)}function Dy(e){null!=e.v&&(id.clearTimeout(e.v),e.v=null)}function Oy(e,t){var n=null;if(e.g==t){Dy(e),Ry(e),e.g=null;var r=2}else{if(!Wv(e.i,t))return;n=t.F,Gv(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;cp(r=Up(),new Bp(r,n)),Cy(e)}else Ny(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Hv(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Hp(hd(e.Na,e,t),Ly(e,e.C)),e.C++,!0))}(e,t)||2==r&&Py(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:My(e,5);break;case 4:My(e,10);break;case 3:My(e,6);break;default:My(e,2)}}function Ly(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function My(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=hd(e.pb,e);n||(n=new kv("//www.google.com/images/cleardot.gif"),id.location&&"http"==id.location.protocol||bv(n,"https"),Cv(n)),function(e,t){var n=new Op;if(id.Image){var r=new Image;r.onload=fd(Zv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=fd(Zv,n,r,"TestLoadImage: error",!1,t),r.onabort=fd(Zv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=fd(Zv,n,r,"TestLoadImage: timeout",!1,t),id.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else qp(2);e.H=0,e.h&&e.h.za(t),Fy(e),Ey(e)}function Fy(e){if(e.H=0,e.ma=[],e.h){var t=Qv(e.i);0==t.length&&0==e.j.length||(md(e.ma,t),md(e.ma,e.j),e.i.i.length=0,yd(e.j),e.j.length=0),e.h.ya()}}function Uy(e,t,n){var r=n instanceof kv?_v(n):new kv(n);if(""!=r.g)t&&(r.g=t+"."+r.g),wv(r,r.m);else{var i=id.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new kv(null);r&&bv(a,r),t&&(a.g=t),i&&wv(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Ev(r,n,t),Ev(r,"VER",e.ra),Ty(e,r),r}function jy(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new sy(new ey({ob:!0})):new sy(e.va)).Oa(e.J),t}function Vy(){}function zy(){if(Td&&!(10<=Number(Fd)))throw Error("Environmental error: no available transport.")}function qy(e,t){lp.call(this),this.g=new by(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!_d(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!_d(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Wy(this)}function By(e){Jp.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Hy(){Zp.call(this),this.status=1}function Wy(e){this.g=e}function Ky(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Gy(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Qy(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(ed=sy.prototype).Oa=function(e){this.M=e},ed.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$p.g(),this.C=this.u?Qp(this.u):Qp($p),this.g.onreadystatechange=hd(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void hy(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=C(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=id.FormData&&e instanceof id.FormData,!(0<=vd(cy,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=C(n);try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{vy(this),0<this.B&&((this.L=function(e){return Td&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hd(this.ua,this)):this.A=Tp(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){hy(this,s)}},ed.ua=function(){"undefined"!=typeof rd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cp(this,"timeout"),this.abort(8))},ed.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,cp(this,"complete"),cp(this,"abort"),py(this))},ed.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),py(this,!0)),sy.$.N.call(this)},ed.La=function(){this.s||(this.G||this.v||this.l?dy(this):this.kb())},ed.kb=function(){dy(this)},ed.isActive=function(){return!!this.g},ed.da=function(){try{return 2<yy(this)?this.g.status:-1}catch(Yv){return-1}},ed.ja=function(){try{return this.g?this.g.responseText:""}catch(Yv){return""}},ed.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oy(t)}},ed.Ia=function(){return this.m},ed.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ed=by.prototype).ra=8,ed.H=1,ed.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new tv(this,this.l,e),n=this.s;if(this.U&&(n?Gd(n=Wd(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Iy(this,t,r),Ev(i=_v(this.I),"RID",e),Ev(i,"CVER",22),this.F&&Ev(i,"X-HTTP-Session-Id",this.F),Ty(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(gy(n)))+"&"+r:this.o&&ky(i,this.o,n)),Kv(this.i,t),this.bb&&Ev(i,"TYPE","init"),this.P?(Ev(i,"$req",r),Ev(i,"SID","null"),t.aa=!0,ov(t,i,null)):ov(t,i,r),this.H=2}}else 3==this.H&&(e?Sy(this,e):0==this.j.length||Bv(this.i)||Sy(this))},ed.Ma=function(){if(this.u=null,Ay(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Hp(hd(this.jb,this),e)}},ed.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qp(10),xy(this),Ay(this))},ed.ib=function(){null!=this.v&&(this.v=null,xy(this),Py(this),qp(19))},ed.pb=function(e){e?(this.l.info("Successfully pinged google.com"),qp(2)):(this.l.info("Failed to ping google.com"),qp(1))},ed.isActive=function(){return!!this.h&&this.h.isActive(this)},(ed=Vy.prototype).Ba=function(){},ed.Aa=function(){},ed.za=function(){},ed.ya=function(){},ed.isActive=function(){return!0},ed.Va=function(){},zy.prototype.g=function(e,t){return new qy(e,t)},dd(qy,lp),qy.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;qp(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Uy(e,null,e.Y),Cy(e)},qy.prototype.close=function(){wy(this.g)},qy.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=fp(e),e=n);t.j.push(new Vv(t.fb++,e)),3==t.H&&Cy(t)},qy.prototype.N=function(){this.g.h=null,delete this.j,wy(this.g),delete this.g,qy.$.N.call(this)},dd(By,Jp),dd(Hy,Zp),dd(Wy,Vy),Wy.prototype.Ba=function(){cp(this.g,"a")},Wy.prototype.Aa=function(e){cp(this.g,new By(e))},Wy.prototype.za=function(e){cp(this.g,new Hy)},Wy.prototype.ya=function(){cp(this.g,"b")},dd(Ky,(function(){this.blockSize=-1})),Ky.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ky.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Gy(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Gy(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Gy(this,r),i=0;break}}this.h=i,this.i+=t},Ky.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Yy={};function $y(e){return-128<=e&&128>e?function(e,t){var n=Yy;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Qy([0|e],0>e?-1:0)})):new Qy([0|e],0>e?-1:0)}function Xy(e){if(isNaN(e)||!isFinite(e))return Zy;if(0>e)return im(Xy(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Jy;return new Qy(t,0)}var Jy=4294967296,Zy=$y(0),em=$y(1),tm=$y(16777216);function nm(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function rm(e){return-1==e.h}function im(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Qy(n,~e.h).add(em)}function am(e,t){return e.add(im(t))}function om(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function sm(e,t){this.g=e,this.h=t}function um(e,t){if(nm(t))throw Error("division by zero");if(nm(e))return new sm(Zy,Zy);if(rm(e))return t=um(im(e),t),new sm(im(t.g),im(t.h));if(rm(t))return t=um(e,im(t)),new sm(im(t.g),t.h);if(30<e.g.length){if(rm(e)||rm(t))throw Error("slowDivide_ only works with positive integers.");for(var n=em,r=t;0>=r.X(e);)n=lm(n),r=lm(r);var i=cm(n,1),a=cm(r,1);for(r=cm(r,2),n=cm(n,2);!nm(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=cm(r,1),n=cm(n,1)}return t=am(e,i.R(t)),new sm(i,t)}for(i=Zy;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Xy(n)).R(t);rm(o)||0<o.X(e);)o=(a=Xy(n-=r)).R(t);nm(a)&&(a=em),i=i.add(a),e=am(e,o)}return new sm(i,e)}function lm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Qy(n,e.h)}function cm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Qy(i,e.h)}(ed=Qy.prototype).ea=function(){if(rm(this))return-im(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Jy+r)*t,t*=Jy}return e},ed.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(nm(this))return"0";if(rm(this))return"-"+im(this).toString(e);for(var t=Xy(Math.pow(e,6)),n=this,r="";;){var i=um(n,t).g,a=((0<(n=am(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(nm(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},ed.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ed.X=function(e){return rm(e=am(this,e))?-1:nm(e)?0:1},ed.abs=function(){return rm(this)?im(this):this},ed.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Qy(n,-2147483648&n[n.length-1]?-1:0)},ed.R=function(e){if(nm(this)||nm(e))return Zy;if(rm(this))return rm(e)?im(this).R(im(e)):im(im(this).R(e));if(rm(e))return im(this.R(im(e)));if(0>this.X(tm)&&0>e.X(tm))return Xy(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,om(n,2*r+2*i),n[2*r+2*i+1]+=a*u,om(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,om(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,om(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Qy(n,0)},ed.gb=function(e){return um(this,e).h},ed.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Qy(n,this.h&e.h)},ed.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Qy(n,this.h|e.h)},ed.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Qy(n,this.h^e.h)},zy.prototype.createWebChannel=zy.prototype.g,qy.prototype.send=qy.prototype.u,qy.prototype.open=qy.prototype.m,qy.prototype.close=qy.prototype.close,Wp.NO_ERROR=0,Wp.TIMEOUT=8,Wp.HTTP_ERROR=6,Kp.COMPLETE="complete",Yp.EventType=Xp,Xp.OPEN="a",Xp.CLOSE="b",Xp.ERROR="c",Xp.MESSAGE="d",lp.prototype.listen=lp.prototype.O,sy.prototype.listenOnce=sy.prototype.P,sy.prototype.getLastError=sy.prototype.Sa,sy.prototype.getLastErrorCode=sy.prototype.Ia,sy.prototype.getStatus=sy.prototype.da,sy.prototype.getResponseJson=sy.prototype.Wa,sy.prototype.getResponseText=sy.prototype.ja,sy.prototype.send=sy.prototype.ha,sy.prototype.setWithCredentials=sy.prototype.Oa,Ky.prototype.digest=Ky.prototype.l,Ky.prototype.reset=Ky.prototype.reset,Ky.prototype.update=Ky.prototype.j,Qy.prototype.add=Qy.prototype.add,Qy.prototype.multiply=Qy.prototype.R,Qy.prototype.modulo=Qy.prototype.gb,Qy.prototype.compare=Qy.prototype.X,Qy.prototype.toNumber=Qy.prototype.ea,Qy.prototype.toString=Qy.prototype.toString,Qy.prototype.getBits=Qy.prototype.D,Qy.fromNumber=Xy,Qy.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return im(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Xy(Math.pow(n,8)),i=Zy,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=Xy(Math.pow(n,o)),i=i.R(o).add(Xy(s))):i=(i=i.R(r)).add(Xy(s))}return i};var hm=nd.createWebChannelTransport=function(){return new zy},fm=nd.getStatEventTarget=function(){return Up()},dm=nd.ErrorCode=Wp,pm=nd.EventType=Kp,vm=nd.Event=Mp,ym=nd.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},mm=nd.FetchXmlHttpFactory=ey,gm=nd.WebChannel=Yp,km=nd.XhrIo=sy,_m=nd.Md5=Ky,bm=nd.Integer=Qy,wm="@firebase/firestore",xm=function(){function e(t){f(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();xm.UNAUTHENTICATED=new xm(null),xm.GOOGLE_CREDENTIALS=new xm("google-credentials-uid"),xm.FIRST_PARTY=new xm("first-party-uid"),xm.MOCK_USER=new xm("mock-user");var Em="10.0.0",Cm=new Qt("@firebase/firestore");function Sm(){return Cm.logLevel}function Tm(e){if(Cm.logLevel<=zt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pm);Cm.debug.apply(Cm,["Firestore (".concat(Em,"): ").concat(e)].concat(h(i)))}}function Im(e){if(Cm.logLevel<=zt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pm);Cm.error.apply(Cm,["Firestore (".concat(Em,"): ").concat(e)].concat(h(i)))}}function Nm(e){if(Cm.logLevel<=zt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pm);Cm.warn.apply(Cm,["Firestore (".concat(Em,"): ").concat(e)].concat(h(i)))}}function Pm(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Rm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Em,") INTERNAL ASSERTION FAILED: ")+e;throw Im(t),new Error(t)}function Am(e,t){e||Rm()}function Dm(e,t){return e}var Om={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lm=function(e){g(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(yt),Mm=y((function e(){var t=this;f(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Fm=y((function e(t,n){f(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Um=function(){function e(){f(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(xm.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),jm=function(){function e(t){f(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Vm=function(){function e(t){f(this,e),this.t=t,this.currentUser=xm.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Mm;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Mm,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Tm("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Tm("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Mm)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Tm("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Am("string"==typeof n.accessToken),new Fm(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Am(null===e||"string"==typeof e),new xm(e)}}]),e}(),zm=function(){function e(t,n,r){f(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=xm.FIRST_PARTY,this.I=new Map}return y(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),qm=function(){function e(t,n,r){f(this,e),this.l=t,this.h=n,this.P=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new zm(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(xm.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Bm=y((function e(t){f(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Hm=function(){function e(t){f(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Tm("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,Tm("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Tm("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):Tm("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Am("string"==typeof t.token),e.R=t.token,new Bm(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Wm(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Km=function(){function e(){f(this,e)}return y(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Wm(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Gm(e,t){return e<t?-1:e>t?1:0}function Qm(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Ym=function(){function e(t,n){if(f(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Lm(Om.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Lm(Om.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Lm(Om.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lm(Om.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Gm(this.nanoseconds,e.nanoseconds):Gm(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),$m=function(){function e(t){f(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ym(0,0))}},{key:"max",value:function(){return new e(new Ym(253402300799,999999999))}}]),e}(),Xm=function(){function e(t,n,r){f(this,e),void 0===n?n=0:n>t.length&&Rm(),void 0===r?r=t.length-n:r>t.length-n&&Rm(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Jm=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Lm(Om.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,h(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Xm),Zm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,eg=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Zm.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Lm(Om.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Lm(Om.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Lm(Om.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Lm(Om.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Xm),tg=function(){function e(t){f(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Jm.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Jm.fromString(t))}},{key:"fromName",value:function(t){return new e(Jm.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Jm.emptyPath())}},{key:"comparator",value:function(e,t){return Jm.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Jm(t.slice()))}}]),e}(),ng=y((function e(t,n,r,i){f(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));ng.UNKNOWN_ID=-1;function rg(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=$m.fromTimestamp(1e9===r?new Ym(n+1,0):new Ym(n,r));return new ag(i,tg.empty(),t)}function ig(e){return new ag(e.readTime,e.key,-1)}var ag=function(){function e(t,n,r){f(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e($m.min(),tg.empty(),-1)}},{key:"max",value:function(){return new e($m.max(),tg.empty(),-1)}}]),e}();function og(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=tg.comparator(e.documentKey,t.documentKey))?n:Gm(e.largestBatchId,t.largestBatchId)}var sg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ug=function(){function e(){f(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function lg(e){return cg.apply(this,arguments)}function cg(){return(cg=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Om.FAILED_PRECONDITION&&t.message===sg){e.next=2;break}throw t;case 2:Tm("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hg=function(){function e(t){var n=this;f(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Rm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=C(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function fg(e){return"IndexedDbTransactionError"===e.name}var dg=function(){function e(t,n){var r=this;f(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function pg(e){return null==e}function vg(e){return 0===e&&1/e==-1/0}function yg(e){return"number"==typeof e&&Number.isInteger(e)&&!vg(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}dg.ae=-1;var mg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),gg=([].concat(h(mg),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),kg=gg;[].concat(kg,["indexConfiguration","indexState","indexEntries"]);function _g(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bg(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var xg=function(){function e(t,n){f(this,e),this.comparator=t,this.root=n||Cg.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Cg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Cg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Eg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Eg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Eg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Eg(this.root,e,this.comparator,!0)}}]),e}(),Eg=function(){function e(t,n,r,i){f(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Cg=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Rm();if(this.right.isRed())throw Rm();var e=this.left.check();if(e!==this.right.check())throw Rm();return e+(this.isRed()?0:1)}}]),e}();Cg.EMPTY=null,Cg.RED=!0,Cg.BLACK=!1,Cg.EMPTY=new(function(){function e(){f(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw Rm()}},{key:"value",get:function(){throw Rm()}},{key:"color",get:function(){throw Rm()}},{key:"left",get:function(){throw Rm()}},{key:"right",get:function(){throw Rm()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Cg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Sg=function(){function e(t){f(this,e),this.comparator=t,this.data=new xg(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Tg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Tg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Tg=function(){function e(t){f(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var Ig=function(){function e(t){f(this,e),this.fields=t,t.sort(eg.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new Sg(eg.comparator),i=C(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,s=C(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(l){s.e(l)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=C(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Qm(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Ng=function(e){g(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return y(n)}(E(Error));var Pg=function(e){function t(e){f(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Gm(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ng("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Pg.EMPTY_BYTE_STRING=new Pg("");var Rg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ag(e){if(Am(!!e),"string"==typeof e){var t=0,n=Rg.exec(e);if(Am(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Dg(e.seconds),nanos:Dg(e.nanos)}}function Dg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Og(e){return"string"==typeof e?Pg.fromBase64String(e):Pg.fromUint8Array(e)}function Lg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Mg(e){var t=e.mapValue.fields.__previous_value__;return Lg(t)?Mg(t):t}function Fg(e){var t=Ag(e.mapValue.fields.__local_write_time__.timestampValue);return new Ym(t.seconds,t.nanos)}var Ug=y((function e(t,n,r,i,a,o,s,u,l){f(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=l})),jg=function(){function e(t,n){f(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Vg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Lg(e)?4:tk(e)?9007199254740991:10:Rm()}function qg(e,t){if(e===t)return!0;var n=zg(e);if(n!==zg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fg(e).isEqual(Fg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ag(e.timestampValue),r=Ag(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Og(e.bytesValue).isEqual(Og(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dg(e.geoPointValue.latitude)===Dg(t.geoPointValue.latitude)&&Dg(e.geoPointValue.longitude)===Dg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dg(e.integerValue)===Dg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Dg(e.doubleValue),r=Dg(t.doubleValue);return n===r?vg(n)===vg(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Qm(e.arrayValue.values||[],t.arrayValue.values||[],qg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(_g(n)!==_g(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qg(n[i],r[i])))return!1;return!0}(e,t);default:return Rm()}}function Bg(e,t){return void 0!==(e.values||[]).find((function(e){return qg(e,t)}))}function Hg(e,t){if(e===t)return 0;var n=zg(e),r=zg(t);if(n!==r)return Gm(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gm(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Dg(e.integerValue||e.doubleValue),r=Dg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Wg(e.timestampValue,t.timestampValue);case 4:return Wg(Fg(e),Fg(t));case 5:return Gm(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Og(e),r=Og(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Gm(n[i],r[i]);if(0!==a)return a}return Gm(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Gm(Dg(e.latitude),Dg(t.latitude));return 0!==n?n:Gm(Dg(e.longitude),Dg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Hg(n[i],r[i]);if(a)return a}return Gm(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Vg.mapValue&&t===Vg.mapValue)return 0;if(e===Vg.mapValue)return 1;if(t===Vg.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Gm(r[o],a[o]);if(0!==s)return s;var u=Hg(n[r[o]],i[a[o]]);if(0!==u)return u}return Gm(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Rm()}}function Wg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Gm(e,t);var n=Ag(e),r=Ag(t),i=Gm(n.seconds,r.seconds);return 0!==i?i:Gm(n.nanos,r.nanos)}function Kg(e){return Gg(e)}function Gg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ag(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Og(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return tg.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=C(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Gg(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=C(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Gg(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Rm()}function Qg(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Yg(e){return!!e&&"integerValue"in e}function $g(e){return!!e&&"arrayValue"in e}function Xg(e){return!!e&&"nullValue"in e}function Jg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zg(e){return!!e&&"mapValue"in e}function ek(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return bg(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ek(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ek(e.arrayValue.values[r]);return n}return Object.assign({},e)}function tk(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var nk=function(){function e(t){f(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Zg(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ek(t)}},{key:"setAll",value:function(e){var t=this,n=eg.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ek(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Zg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return qg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Zg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){bg(t,(function(t,n){return e[t]=n}));var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ek(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function rk(e){var t=[];return bg(e.fields,(function(e,n){var r=new eg([e]);if(Zg(n)){var i=rk(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=C(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Ig(t)}var ik=function(){function e(t,n,r,i,a,o,s){f(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual($m.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=nk.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=nk.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=$m.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,$m.min(),$m.min(),$m.min(),nk.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,$m.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,$m.min(),$m.min(),nk.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,$m.min(),$m.min(),nk.empty(),2)}}]),e}(),ak=y((function e(t,n){f(this,e),this.position=t,this.inclusive=n}));function ok(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?tg.comparator(tg.fromName(o.referenceValue),n.key):Hg(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function sk(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!qg(e.position[n],t.position[n]))return!1;return!0}var uk=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";f(this,e),this.field=t,this.dir=n}));function lk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var ck=y((function e(){f(this,e)})),hk=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Hg(t,this.value)):null!==t&&zg(this.value)===zg(t)&&this.matchesComparison(Hg(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Rm()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new kk(e,t,r):"array-contains"===t?new xk(e,r):"in"===t?new Ek(e,r):"not-in"===t?new Ck(e,r):"array-contains-any"===t?new Sk(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new _k(e,n):new bk(e,n)}}]),n}(ck),fk=function(e){g(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return y(n,[{key:"matches",value:function(e){return dk(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=C(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(ck);function dk(e){return"and"===e.op}function pk(e){return vk(e)&&dk(e)}function vk(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof fk)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function yk(e){if(e instanceof hk)return e.field.canonicalString()+e.op.toString()+Kg(e.value);if(pk(e))return e.filters.map((function(e){return yk(e)})).join(",");var t=e.filters.map((function(e){return yk(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function mk(e,t){return e instanceof hk?function(e,t){return t instanceof hk&&e.op===t.op&&e.field.isEqual(t.field)&&qg(e.value,t.value)}(e,t):e instanceof fk?function(e,t){return t instanceof fk&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&mk(n,t.filters[r])}),!0)}(e,t):void Rm()}function gk(e){return e instanceof hk?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Kg(e.value))}(e):e instanceof fk?function(e){return e.op.toString()+" {"+e.getFilters().map(gk).join(" ,")+"}"}(e):"Filter"}var kk=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,i)).key=tg.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=tg.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(hk),_k=function(e){g(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"in",r)).keys=wk("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(hk),bk=function(e){g(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"not-in",r)).keys=wk("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(hk);function wk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return tg.fromName(e.referenceValue)}))}var xk=function(e){g(n,e);var t=w(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return $g(t)&&Bg(t.arrayValue,this.value)}}]),n}(hk),Ek=function(e){g(n,e);var t=w(n);function n(e,r){return f(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Bg(this.value.arrayValue,t)}}]),n}(hk),Ck=function(e){g(n,e);var t=w(n);function n(e,r){return f(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(Bg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Bg(this.value.arrayValue,t)}}]),n}(hk),Sk=function(e){g(n,e);var t=w(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!$g(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Bg(t.value.arrayValue,e)}))}}]),n}(hk),Tk=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;f(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.he=null}));function Ik(e){return new Tk(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Nk(e){var t=Dm(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return yk(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),pg(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Kg(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Kg(e)})).join(",")),t.he=n}return t.he}function Pk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!lk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!mk(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sk(e.startAt,t.startAt)&&sk(e.endAt,t.endAt)}function Rk(e){return tg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Ak=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function Dk(e,t,n,r,i,a,o,s){return new Ak(e,t,n,r,i,a,o,s)}function Ok(e){return new Ak(e)}function Lk(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Fk(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Uk(e){return null!==e.collectionGroup}function jk(e){var t=Dm(e);if(null===t.Pe){t.Pe=[];var n=Fk(t),r=Mk(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new uk(n)),t.Pe.push(new uk(eg.keyField(),"asc"));else{var i,a=!1,o=C(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.Pe.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new uk(eg.keyField(),u))}}}return t.Pe}function Vk(e){var t=Dm(e);if(!t.Ie)if("F"===t.limitType)t.Ie=Ik(t.path,t.collectionGroup,jk(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=C(jk(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new uk(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var s=t.endAt?new ak(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new ak(t.startAt.position,t.startAt.inclusive):null;t.Ie=Ik(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.Ie}function zk(e,t){t.getFirstInequalityField(),Fk(e);var n=e.filters.concat([t]);return new Ak(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qk(e,t,n){return new Ak(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Bk(e,t){return Pk(Vk(e),Vk(t))&&e.limitType===t.limitType}function Hk(e){return"".concat(Nk(Vk(e)),"|lt:").concat(e.limitType)}function Wk(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return gk(e)})).join(", "),"]")),pg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Kg(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Kg(e)})).join(",")),"Target(".concat(t,")")}(Vk(e)),"; limitType=").concat(e.limitType,")")}function Kk(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):tg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=C(jk(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=C(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=ok(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,jk(e),t))&&!(e.endAt&&!function(e,t,n){var r=ok(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,jk(e),t))}(e,t)}function Gk(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qk(e){return function(t,n){var r,i=!1,a=C(jk(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Yk(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Yk(e,t,n){var r=e.field.isKeyField()?tg.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Hg(r,i):Rm()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Rm()}}var $k=function(){function e(t,n){f(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){bg(this.inner,(function(t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return wg(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Xk=new xg(tg.comparator);function Jk(){return Xk}var Zk=new xg(tg.comparator);function e_(){for(var e=Zk,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function t_(e){var t=Zk;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function n_(){return i_()}function r_(){return i_()}function i_(){return new $k((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var a_=new xg(tg.comparator),o_=new Sg(tg.comparator);function s_(){for(var e=o_,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var u_=new Sg(Gm);function l_(){return u_}function c_(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vg(t)?"-0":t}}function h_(e){return{integerValue:""+e}}function f_(e,t){return yg(t)?h_(t):c_(e,t)}var d_=y((function e(){f(this,e),this._=void 0}));function p_(e,t,n){return e instanceof m_?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Lg(t)&&(t=Mg(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof g_?k_(e,t):e instanceof __?b_(e,t):function(e,t){var n=y_(e,t),r=x_(n)+x_(e.Te);return Yg(n)&&Yg(e.Te)?h_(r):c_(e.serializer,r)}(e,t)}function v_(e,t,n){return e instanceof g_?k_(e,t):e instanceof __?b_(e,t):n}function y_(e,t){return e instanceof w_?function(e){return Yg(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var m_=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(d_),g_=function(e){g(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return y(n)}(d_);function k_(e,t){var n,r=E_(t),i=C(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return qg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var __=function(e){g(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return y(n)}(d_);function b_(e,t){var n,r=E_(t),i=C(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!qg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var w_=function(e){g(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return y(n)}(d_);function x_(e){return Dg(e.integerValue||e.doubleValue)}function E_(e){return $g(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var C_=y((function e(t,n){f(this,e),this.version=t,this.transformResults=n})),S_=function(){function e(t,n){f(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function T_(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var I_=y((function e(){f(this,e)}));function N_(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new z_(e.key,S_.none()):new O_(e.key,e.data,S_.none());var n,r=e.data,i=nk.empty(),a=new Sg(eg.comparator),o=C(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(l){o.e(l)}finally{o.f()}return new L_(e.key,i,new Ig(a.toArray()),S_.none())}function P_(e,t,n){e instanceof O_?function(e,t,n){var r=e.value.clone(),i=F_(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof L_?function(e,t,n){if(T_(e.precondition,t)){var r=F_(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(M_(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function R_(e,t,n,r){return e instanceof O_?function(e,t,n,r){if(!T_(e.precondition,t))return n;var i=e.value.clone(),a=U_(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof L_?function(e,t,n,r){if(!T_(e.precondition,t))return n;var i=U_(e.fieldTransforms,r,t),a=t.data;return a.setAll(M_(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return T_(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function A_(e,t){var n,r=null,i=C(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=y_(a.transform,o||null);null!=s&&(null===r&&(r=nk.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function D_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Qm(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof g_&&t instanceof g_||e instanceof __&&t instanceof __?Qm(e.elements,t.elements,qg):e instanceof w_&&t instanceof w_?qg(e.Te,t.Te):e instanceof m_&&t instanceof m_}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var O_=function(e){g(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return f(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(I_),L_=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return f(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(I_);function M_(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function F_(e,t,n){var r=new Map;Am(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,v_(o,s,n[i]))}return r}function U_(e,t,n){var r,i=new Map,a=C(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,p_(s,u,t))}}catch(l){a.e(l)}finally{a.f()}return i}var j_,V_,z_=function(e){g(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(I_),q_=function(e){g(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(I_),B_=function(){function e(t,n,r,i){f(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&P_(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=C(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=R_(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=C(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=R_(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=r_();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=N_(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument($m.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),s_())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Qm(this.mutations,e.mutations,(function(e,t){return D_(e,t)}))&&Qm(this.baseMutations,e.baseMutations,(function(e,t){return D_(e,t)}))}}]),e}(),H_=function(){function e(t,n,r,i){f(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){Am(t.mutations.length===r.length);for(var i=a_,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),W_=function(){function e(t,n){f(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),K_=y((function e(t,n){f(this,e),this.count=t,this.unchangedNames=n}));function G_(e){switch(e){default:return Rm();case Om.CANCELLED:case Om.UNKNOWN:case Om.DEADLINE_EXCEEDED:case Om.RESOURCE_EXHAUSTED:case Om.INTERNAL:case Om.UNAVAILABLE:case Om.UNAUTHENTICATED:return!1;case Om.INVALID_ARGUMENT:case Om.NOT_FOUND:case Om.ALREADY_EXISTS:case Om.PERMISSION_DENIED:case Om.FAILED_PRECONDITION:case Om.ABORTED:case Om.OUT_OF_RANGE:case Om.UNIMPLEMENTED:case Om.DATA_LOSS:return!0}}function Q_(e){if(void 0===e)return Im("GRPC error has no .code"),Om.UNKNOWN;switch(e){case j_.OK:return Om.OK;case j_.CANCELLED:return Om.CANCELLED;case j_.UNKNOWN:return Om.UNKNOWN;case j_.DEADLINE_EXCEEDED:return Om.DEADLINE_EXCEEDED;case j_.RESOURCE_EXHAUSTED:return Om.RESOURCE_EXHAUSTED;case j_.INTERNAL:return Om.INTERNAL;case j_.UNAVAILABLE:return Om.UNAVAILABLE;case j_.UNAUTHENTICATED:return Om.UNAUTHENTICATED;case j_.INVALID_ARGUMENT:return Om.INVALID_ARGUMENT;case j_.NOT_FOUND:return Om.NOT_FOUND;case j_.ALREADY_EXISTS:return Om.ALREADY_EXISTS;case j_.PERMISSION_DENIED:return Om.PERMISSION_DENIED;case j_.FAILED_PRECONDITION:return Om.FAILED_PRECONDITION;case j_.ABORTED:return Om.ABORTED;case j_.OUT_OF_RANGE:return Om.OUT_OF_RANGE;case j_.UNIMPLEMENTED:return Om.UNIMPLEMENTED;case j_.DATA_LOSS:return Om.DATA_LOSS;default:return Rm()}}(V_=j_||(j_={}))[V_.OK=0]="OK",V_[V_.CANCELLED=1]="CANCELLED",V_[V_.UNKNOWN=2]="UNKNOWN",V_[V_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",V_[V_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",V_[V_.NOT_FOUND=5]="NOT_FOUND",V_[V_.ALREADY_EXISTS=6]="ALREADY_EXISTS",V_[V_.PERMISSION_DENIED=7]="PERMISSION_DENIED",V_[V_.UNAUTHENTICATED=16]="UNAUTHENTICATED",V_[V_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",V_[V_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",V_[V_.ABORTED=10]="ABORTED",V_[V_.OUT_OF_RANGE=11]="OUT_OF_RANGE",V_[V_.UNIMPLEMENTED=12]="UNIMPLEMENTED",V_[V_.INTERNAL=13]="INTERNAL",V_[V_.UNAVAILABLE=14]="UNAVAILABLE",V_[V_.DATA_LOSS=15]="DATA_LOSS";var Y_=function(){function e(){f(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return y(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return $_}},{key:"getOrCreateInstance",value:function(){return null===$_&&($_=new e),$_}}]),e}(),$_=null;function X_(){return new TextEncoder}var J_=new bm([4294967295,4294967295],0);function Z_(e){var t=X_().encode(e),n=new _m;return n.update(t),new Uint8Array(n.digest())}function eb(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new bm([n,r],0),new bm([i,a],0)]}var tb=function(){function e(t,n,r){if(f(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nb("Invalid padding: ".concat(n));if(r<0)throw new nb("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new nb("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new nb("Invalid padding when bitmap length is 0: ".concat(n));this.de=8*t.length-n,this.Ae=bm.fromNumber(this.de)}return y(e,[{key:"Re",value:function(e,t,n){var r=e.add(t.multiply(bm.fromNumber(n)));return 1===r.compare(J_)&&(r=new bm([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ae).toNumber()}},{key:"Ve",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.de)return!1;for(var t=l(eb(Z_(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);if(!this.Ve(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.de)for(var t=l(eb(Z_(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);this.me(a)}}},{key:"me",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),nb=function(e){g(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return y(n)}(E(Error)),rb=function(){function e(t,n,r,i,a){f(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,ib.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e($m.min(),i,new xg(Gm),Jk(),s_())}}]),e}(),ib=function(){function e(t,n,r,i,a){f(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,s_(),s_(),s_())}}]),e}(),ab=y((function e(t,n,r,i){f(this,e),this.fe=t,this.removedTargetIds=n,this.key=r,this.ge=i})),ob=y((function e(t,n){f(this,e),this.targetId=t,this.pe=n})),sb=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ub=function(){function e(){f(this,e),this.ye=0,this.we=hb(),this.Se=Pg.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}return y(e,[{key:"current",get:function(){return this.be}},{key:"resumeToken",get:function(){return this.Se}},{key:"ve",get:function(){return 0!==this.ye}},{key:"Ce",get:function(){return this.De}},{key:"Fe",value:function(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}},{key:"Me",value:function(){var e=s_(),t=s_(),n=s_();return this.we.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Rm()}})),new ib(this.Se,this.be,e,t,n)}},{key:"xe",value:function(){this.De=!1,this.we=hb()}},{key:"Oe",value:function(e,t){this.De=!0,this.we=this.we.insert(e,t)}},{key:"Ne",value:function(e){this.De=!0,this.we=this.we.remove(e)}},{key:"Be",value:function(){this.ye+=1}},{key:"Le",value:function(){this.ye-=1}},{key:"ke",value:function(){this.De=!0,this.be=!0}}]),e}(),lb=function(){function e(t){f(this,e),this.qe=t,this.Qe=new Map,this.Ke=Jk(),this.$e=cb(),this.Ue=new xg(Gm)}return y(e,[{key:"We",value:function(e){var t,n=C(e.fe);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.ge&&e.ge.isFoundDocument()?this.Ge(r,e.ge):this.ze(r,e.key,e.ge)}}catch(s){n.e(s)}finally{n.f()}var i,a=C(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ze(o,e.key,e.ge)}}catch(s){a.e(s)}finally{a.f()}}},{key:"je",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.He(n);switch(e.state){case 0:t.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||t.removeTarget(n);break;case 3:t.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:t.Je(n)&&(t.Ye(n),r.Fe(e.resumeToken));break;default:Rm()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach((function(e,r){n.Je(r)&&t(r)}))}},{key:"Ze",value:function(e){var t,n,r=e.targetId,i=e.pe.count,a=this.Xe(r);if(a){var o=a.target;if(Rk(o))if(0===i){var s=new tg(o.path);this.ze(r,s,ik.newNoDocument(s,$m.min()))}else Am(1===i);else{var u=this.et(r);if(u!==i){var l=this.tt(e,u);if(0!==l.status){this.Ye(r);var c=2===l.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,c)}null===(t=Y_.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,r){var i,a,o,s,u,l,c={localCacheCount:n,existenceFilterCount:r.count},h=r.unchangedNames;return h&&(c.bloomFilter={applied:0===e,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(s=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===(u=null==h?void 0:h.bits)||void 0===u?void 0:u.padding)&&void 0!==l?l:0},t&&(c.bloomFilter.mightContain=t)),c}(l.status,null!==(n=l.nt)&&void 0!==n?n:null,u,e.pe))}}}}},{key:"tt",value:function(e,t){var n=this,r=e.pe,i=r.unchangedNames,a=r.count;if(!i||!i.bits)return{status:1};var o,s,u=i.bits,l=u.bitmap,c=void 0===l?"":l,h=u.padding,f=void 0===h?0:h,d=i.hashCount,p=void 0===d?0:d;try{o=Og(c).toUint8Array()}catch(e){if(e instanceof Ng)return Nm("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw e}try{s=new tb(o,f,p)}catch(e){return Nm(e instanceof nb?"BloomFilter error: ":"Applying bloom filter failed: ",e),{status:1}}var v=function(e){var t=n.qe.rt();return s.mightContain("projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e))};return 0===s.de?{status:1}:{status:a===t-this.it(e.targetId,v)?0:2,nt:v}}},{key:"it",value:function(e,t){var n=this,r=this.qe.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){t(r.path.canonicalString())||(n.ze(e,r,null),i++)})),i}},{key:"st",value:function(e){var t=this,n=new Map;this.Qe.forEach((function(r,i){var a=t.Xe(i);if(a){if(r.current&&Rk(a.target)){var o=new tg(a.target.path);null!==t.Ke.get(o)||t.ot(i,o)||t.ze(i,o,ik.newNoDocument(o,e))}r.Ce&&(n.set(i,r.Me()),r.xe())}}));var r=s_();this.$e.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xe(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ke.forEach((function(t,n){return n.setReadTime(e)}));var i=new rb(e,n,this.Ue,this.Ke,r);return this.Ke=Jk(),this.$e=cb(),this.Ue=new xg(Gm),i}},{key:"Ge",value:function(e,t){if(this.Je(e)){var n=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,n),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}}},{key:"ze",value:function(e,t,n){if(this.Je(e)){var r=this.He(e);this.ot(e,t)?r.Oe(t,1):r.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),n&&(this.Ke=this.Ke.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qe.delete(e)}},{key:"et",value:function(e){var t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Be",value:function(e){this.He(e).Be()}},{key:"He",value:function(e){var t=this.Qe.get(e);return t||(t=new ub,this.Qe.set(e,t)),t}},{key:"_t",value:function(e){var t=this.$e.get(e);return t||(t=new Sg(Gm),this.$e=this.$e.insert(e,t)),t}},{key:"Je",value:function(e){var t=null!==this.Xe(e);return t||Tm("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xe",value:function(e){var t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}},{key:"Ye",value:function(e){var t=this;this.Qe.set(e,new ub),this.qe.getRemoteKeysForTarget(e).forEach((function(n){t.ze(e,n,null)}))}},{key:"ot",value:function(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function cb(){return new xg(tg.comparator)}function hb(){return new xg(tg.comparator)}var fb={asc:"ASCENDING",desc:"DESCENDING"},db={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pb={and:"AND",or:"OR"},vb=y((function e(t,n){f(this,e),this.databaseId=t,this.useProto3Json=n}));function yb(e,t){return e.useProto3Json||pg(t)?t:{value:t}}function mb(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function gb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function kb(e,t){return mb(e,t.toTimestamp())}function _b(e){return Am(!!e),$m.fromTimestamp(function(e){var t=Ag(e);return new Ym(t.seconds,t.nanos)}(e))}function bb(e,t){return function(e){return new Jm(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function wb(e){var t=Jm.fromString(e);return Am(qb(t)),t}function xb(e,t){return bb(e.databaseId,t.path)}function Eb(e,t){var n=wb(t);if(n.get(1)!==e.databaseId.projectId)throw new Lm(Om.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lm(Om.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new tg(Ib(n))}function Cb(e,t){return bb(e.databaseId,t)}function Sb(e){var t=wb(e);return 4===t.length?Jm.emptyPath():Ib(t)}function Tb(e){return new Jm(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ib(e){return Am(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Nb(e,t,n){return{name:xb(e,t),fields:n.value.mapValue.fields}}function Pb(e,t){var n;if(t instanceof O_)n={update:Nb(e,t.key,t.value)};else if(t instanceof z_)n={delete:xb(e,t.key)};else if(t instanceof L_)n={update:Nb(e,t.key,t.data),updateMask:zb(t.fieldMask)};else{if(!(t instanceof q_))return Rm();n={verify:xb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof m_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof g_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof __)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof w_)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw Rm()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:kb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Rm()}(e,t.precondition)),n}function Rb(e,t){return{documents:[Cb(e,t.path)]}}function Ab(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Cb(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Cb(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Vb(fk.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ub(e.field),direction:Lb(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=yb(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Db(e){var t=Sb(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Am(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Ob(e);return t instanceof fk&&pk(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=function(e){return e.map((function(e){return function(e){return new uk(jb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var u=null;n.limit&&(u=function(e){var t;return pg(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new ak(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new ak(n,t)}(n.endAt)),Dk(t,i,s,o,u,"F",l,c)}function Ob(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=jb(e.unaryFilter.field);return hk.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=jb(e.unaryFilter.field);return hk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=jb(e.unaryFilter.field);return hk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=jb(e.unaryFilter.field);return hk.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Rm()}}(e):void 0!==e.fieldFilter?function(e){return hk.create(jb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rm()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fk.create(e.compositeFilter.filters.map((function(e){return Ob(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Rm()}}(e.compositeFilter.op))}(e):Rm()}function Lb(e){return fb[e]}function Mb(e){return db[e]}function Fb(e){return pb[e]}function Ub(e){return{fieldPath:e.canonicalString()}}function jb(e){return eg.fromServerFormat(e.fieldPath)}function Vb(e){return e instanceof hk?function(e){if("=="===e.op){if(Jg(e.value))return{unaryFilter:{field:Ub(e.field),op:"IS_NAN"}};if(Xg(e.value))return{unaryFilter:{field:Ub(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jg(e.value))return{unaryFilter:{field:Ub(e.field),op:"IS_NOT_NAN"}};if(Xg(e.value))return{unaryFilter:{field:Ub(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ub(e.field),op:Mb(e.op),value:e.value}}}(e):e instanceof fk?function(e){var t=e.getFilters().map((function(e){return Vb(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Fb(e.op),filters:t}}}(e):Rm()}function zb(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function qb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Bb=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$m.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$m.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Pg.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Hb=y((function e(t){f(this,e),this.ct=t}));function Wb(e){var t=Db({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qk(t,t.limit,"L"):t}var Kb=function(){function e(){f(this,e)}return y(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Dg(e.integerValue));else if("doubleValue"in e){var n=Dg(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),vg(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Og(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?tk(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Rm()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),tg.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();Kb.bt=new Kb;var Gb=function(){function e(){f(this,e),this.sn=new Qb}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),hg.resolve()}},{key:"getCollectionParents",value:function(e,t){return hg.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return hg.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return hg.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return hg.resolve(null)}},{key:"getIndexType",value:function(e,t){return hg.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return hg.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return hg.resolve(null)}},{key:"getMinOffset",value:function(e,t){return hg.resolve(ag.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return hg.resolve(ag.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return hg.resolve()}},{key:"updateIndexEntries",value:function(e,t){return hg.resolve()}}]),e}(),Qb=function(){function e(){f(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Sg(Jm.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Sg(Jm.comparator)).toArray()}}]),e}();new Uint8Array(0);var Yb=function(){function e(t,n,r){f(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();Yb.DEFAULT_COLLECTION_PERCENTILE=10,Yb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yb.DEFAULT=new Yb(41943040,Yb.DEFAULT_COLLECTION_PERCENTILE,Yb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yb.DISABLED=new Yb(-1,0,0);var $b=function(){function e(t){f(this,e),this.Mn=t}return y(e,[{key:"next",value:function(){return this.Mn+=2,this.Mn}}],[{key:"xn",value:function(){return new e(0)}},{key:"On",value:function(){return new e(-1)}}]),e}();var Xb=function(){function e(){f(this,e),this.changes=new $k((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,ik.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?hg.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Jb=y((function e(t,n){f(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Zb=function(){function e(t,n,r,i){f(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&R_(r.mutation,e,Ig.empty(),Ym.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,s_()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s_(),i=n_();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=e_();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=n_();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,s_())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Jk(),a=i_(),o=i_();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof L_)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),R_(o.mutation,t,o.mutation.getFieldMask(),Ym.now())):a.set(t.key,Ig.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Jb(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=i_(),i=new xg((function(e,t){return e-t})),a=s_();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=C(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Ig.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||s_()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,l=i.value,c=r_();l.forEach((function(e){if(!a.has(e)){var n=N_(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,c))};s.hasNext();)u();return hg.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return tg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Uk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):hg.resolve(n_()),s=-1,u=a;return o.next((function(t){return hg.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?hg.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,s_())})).next((function(e){return{batchId:s,changes:t_(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new tg(t)).next((function(e){var t=e_();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=e_();return this.indexManager.getCollectionParents(e,i).next((function(o){return hg.forEach(o,(function(o){var s=function(e,t){return new Ak(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,ik.newInvalidDocument(r)))}));var n=e_();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&R_(a.mutation,i,Ig.empty(),Ym.now()),Kk(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),ew=function(){function e(t){f(this,e),this.serializer=t,this.ar=new Map,this.ur=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return hg.resolve(this.ar.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ar.set(t.id,function(e){return{id:e.id,version:e.version,createTime:_b(e.createTime)}}(t)),hg.resolve()}},{key:"getNamedQuery",value:function(e,t){return hg.resolve(this.ur.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ur.set(t.name,function(e){return{name:e.name,query:Wb(e.bundledQuery),readTime:_b(e.readTime)}}(t)),hg.resolve()}}]),e}(),tw=function(){function e(){f(this,e),this.overlays=new xg(tg.comparator),this.cr=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return hg.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=n_();return hg.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),hg.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.cr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.cr.delete(n)),hg.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=n_(),i=t.length+1,a=new tg(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return hg.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new xg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=n_(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=n_(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return hg.resolve(u)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.cr.get(r.largestBatchId).delete(n.key);this.cr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new W_(t,n));var a=this.cr.get(t);void 0===a&&(a=s_(),this.cr.set(t,a)),this.cr.set(t,a.add(n.key))}}]),e}(),nw=function(){function e(){f(this,e),this.lr=new Sg(rw.hr),this.Pr=new Sg(rw.Ir)}return y(e,[{key:"isEmpty",value:function(){return this.lr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new rw(e,t);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}},{key:"Tr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Er(new rw(e,t))}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ar",value:function(e){var t=this,n=new tg(new Jm([])),r=new rw(n,e),i=new rw(n,e+1),a=[];return this.Pr.forEachInRange([r,i],(function(e){t.Er(e),a.push(e.key)})),a}},{key:"Rr",value:function(){var e=this;this.lr.forEach((function(t){return e.Er(t)}))}},{key:"Er",value:function(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}},{key:"Vr",value:function(e){var t=new tg(new Jm([])),n=new rw(t,e),r=new rw(t,e+1),i=s_();return this.Pr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new rw(e,0),n=this.lr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),rw=function(){function e(t,n){f(this,e),this.key=t,this.mr=n}return y(e,null,[{key:"hr",value:function(e,t){return tg.comparator(e.key,t.key)||Gm(e.mr,t.mr)}},{key:"Ir",value:function(e,t){return Gm(e.mr,t.mr)||tg.comparator(e.key,t.key)}}]),e}(),iw=function(){function e(t,n){f(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new Sg(rw.hr)}return y(e,[{key:"checkEmpty",value:function(e){return hg.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new B_(i,t,n,r);this.mutationQueue.push(a);var o,s=C(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.pr=this.pr.add(new rw(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return hg.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return hg.resolve(this.yr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.wr(n),i=r<0?0:r;return hg.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return hg.resolve(0===this.mutationQueue.length?-1:this.gr-1)}},{key:"getAllMutationBatches",value:function(e){return hg.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new rw(t,0),i=new rw(t,Number.POSITIVE_INFINITY),a=[];return this.pr.forEachInRange([r,i],(function(e){var t=n.yr(e.mr);a.push(t)})),hg.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Sg(Gm);return t.forEach((function(e){var t=new rw(e,0),i=new rw(e,Number.POSITIVE_INFINITY);n.pr.forEachInRange([t,i],(function(e){r=r.add(e.mr)}))})),hg.resolve(this.Sr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;tg.isDocumentKey(i)||(i=i.child(""));var a=new rw(new tg(i),0),o=new Sg(Gm);return this.pr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.mr)),!0)}),a),hg.resolve(this.Sr(o))}},{key:"Sr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.yr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Am(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();var r=this.pr;return hg.forEach(t.mutations,(function(i){var a=new rw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.pr=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new rw(t,0),r=this.pr.firstAfterOrEqual(n);return hg.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,hg.resolve()}},{key:"br",value:function(e,t){return this.wr(e)}},{key:"wr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"yr",value:function(e){var t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),aw=function(){function e(t){f(this,e),this.Dr=t,this.docs=new xg(tg.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Dr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return hg.resolve(n?n.document.mutableCopy():ik.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Jk();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ik.newInvalidDocument(e))})),hg.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Jk(),a=t.path,o=new tg(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),l=u.key,c=u.value.document;if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||og(ig(c),n)<=0||(r.has(c.key)||Kk(t,c))&&(i=i.insert(c.key,c.mutableCopy()))}return hg.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Rm()}},{key:"vr",value:function(e,t){return hg.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ow(this)}},{key:"getSize",value:function(e){return hg.resolve(this.size)}}]),e}(),ow=function(e){g(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).sr=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.sr.addEntry(e,i)):t.sr.removeEntry(r)})),hg.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.sr.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.sr.getEntries(e,t)}}]),n}(Xb),sw=function(){function e(t){f(this,e),this.persistence=t,this.Cr=new $k((function(e){return Nk(e)}),Pk),this.lastRemoteSnapshotVersion=$m.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new nw,this.targetCount=0,this.Or=$b.xn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.Cr.forEach((function(e,n){return t(n)})),hg.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return hg.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return hg.resolve(this.Fr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Or.next(),hg.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fr&&(this.Fr=t),hg.resolve()}},{key:"Ln",value:function(e){this.Cr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Or=new $b(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ln(t),this.targetCount+=1,hg.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ln(t),hg.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,hg.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cr.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Cr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),hg.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return hg.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cr.get(t)||null;return hg.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Mr.Tr(t,n),hg.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Mr.dr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),hg.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Mr.Ar(t),hg.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Mr.Vr(t);return hg.resolve(n)}},{key:"containsKey",value:function(e,t){return hg.resolve(this.Mr.containsKey(t))}}]),e}(),uw=function(){function e(t,n){var r=this;f(this,e),this.Nr={},this.overlays={},this.Br=new dg(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=t(this),this.kr=new sw(this),this.indexManager=new Gb,this.remoteDocumentCache=function(e){return new aw(e)}((function(e){return r.referenceDelegate.qr(e)})),this.serializer=new Hb(n),this.Qr=new ew(this.serializer)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Lr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Lr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new tw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Nr[e.toKey()];return n||(n=new iw(t,this.referenceDelegate),this.Nr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;Tm("MemoryPersistence","Starting transaction:",e);var i=new lw(this.Br.next());return this.referenceDelegate.Kr(),n(i).next((function(e){return r.referenceDelegate.$r(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ur",value:function(e,t){return hg.or(Object.values(this.Nr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),lw=function(e){g(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(ug),cw=function(){function e(t){f(this,e),this.persistence=t,this.Wr=new nw,this.Gr=null}return y(e,[{key:"jr",get:function(){if(this.Gr)return this.Gr;throw Rm()}},{key:"addReference",value:function(e,t,n){return this.Wr.addReference(n,t),this.jr.delete(n.toString()),hg.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Wr.removeReference(n,t),this.jr.add(n.toString()),hg.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.jr.add(t.toString()),hg.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Wr.Ar(t.targetId).forEach((function(e){return n.jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Kr",value:function(){this.Gr=new Set}},{key:"$r",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hg.forEach(this.jr,(function(r){var i=tg.fromPath(r);return t.Hr(e,i).next((function(e){e||n.removeEntry(i,$m.min())}))})).next((function(){return t.Gr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hr(e,t).next((function(e){e?n.jr.delete(t.toString()):n.jr.add(t.toString())}))}},{key:"qr",value:function(e){return 0}},{key:"Hr",value:function(e,t){var n=this;return hg.or([function(){return hg.resolve(n.Wr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ur(e,t)}])}}],[{key:"zr",value:function(t){return new e(t)}}]),e}();var hw=function(){function e(t,n,r,i){f(this,e),this.targetId=t,this.fromCache=n,this.Li=r,this.ki=i}return y(e,null,[{key:"qi",value:function(t,n){var r,i=s_(),a=s_(),o=C(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),fw=function(){function e(){f(this,e),this.Qi=!1}return y(e,[{key:"initialize",value:function(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.$i(e,t).next((function(a){return a||i.Ui(e,t,r,n)})).next((function(n){return n||i.Wi(e,t)}))}},{key:"$i",value:function(e,t){var n=this;if(Lk(t))return hg.resolve(null);var r=Vk(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=qk(t,null,"F"),r=Vk(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=s_.apply(void 0,h(i));return n.Ki.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Gi(t,i);return n.zi(t,o,a,r.readTime)?n.$i(e,qk(t,null,"F")):n.ji(e,o,t,r)}))}))})))}))}},{key:"Ui",value:function(e,t,n,r){var i=this;return Lk(t)||r.isEqual($m.min())?this.Wi(e,t):this.Ki.getDocuments(e,n).next((function(a){var o=i.Gi(t,a);return i.zi(t,o,n,r)?i.Wi(e,t):(Sm()<=zt.DEBUG&&Tm("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wk(t)),i.ji(e,o,t,rg(r,-1)))}))}},{key:"Gi",value:function(e,t){var n=new Sg(Qk(e));return t.forEach((function(t,r){Kk(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Wi",value:function(e,t){return Sm()<=zt.DEBUG&&Tm("QueryEngine","Using full collection scan to execute query:",Wk(t)),this.Ki.getDocumentsMatchingQuery(e,t,ag.min())}},{key:"ji",value:function(e,t,n,r){return this.Ki.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),dw=function(){function e(t,n,r,i){f(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new xg(Gm),this.Yi=new $k((function(e){return Nk(e)}),Pk),this.Zi=new Map,this.Xi=t.getRemoteDocumentCache(),this.kr=t.getTargetCache(),this.Qr=t.getBundleCache(),this.es(r)}return y(e,[{key:"es",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zb(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function pw(e,t,n,r){return new dw(e,t,n,r)}function vw(e,t){return yw.apply(this,arguments)}function yw(){return yw=Be(ze().mark((function e(t,n){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dm(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.es(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=s_(),u=C(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.push(l.batchId);var c,h=C(l.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=C(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=C(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ts:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),yw.apply(this,arguments)}function mw(e,t){var n=Dm(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=hg.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Am(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=s_(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function gw(e){var t=Dm(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.kr.getLastRemoteSnapshotVersion(e)}))}function kw(e,t){var n=Dm(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.kr.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.kr.addMatchingKeys(e,a.addedDocuments,s)})));var l=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?l=l.withResumeToken(Pg.EMPTY_BYTE_STRING,$m.min()).withLastLimboFreeSnapshotVersion($m.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,a)&&o.push(n.kr.updateTargetData(e,l))}}));var s=Jk(),u=s_();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(_w(e,a,t.documentUpdates).next((function(e){s=e.ns,u=e.rs}))),!r.isEqual($m.min())){var l=n.kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return hg.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function _w(e,t,n){var r=s_(),i=s_();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Jk();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual($m.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Tm("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ns:r,rs:i}}))}function bw(e,t){var n=Dm(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function ww(e,t){var n=Dm(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.kr.getTargetData(e,t).next((function(i){return i?(r=i,hg.resolve(r)):n.kr.allocateTargetId(e).next((function(i){return r=new Bb(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function xw(e,t,n){return Ew.apply(this,arguments)}function Ew(){return Ew=Be(ze().mark((function e(t,n,r){var i,a,o;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Dm(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),fg(e.t1)){e.next=12;break}throw e.t1;case 12:Tm("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ew.apply(this,arguments)}function Cw(e,t,n){var r=Dm(e),i=$m.min(),a=s_();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Dm(e),i=r.Yi.get(n);return void 0!==i?hg.resolve(r.Ji.get(i)):r.kr.getTargetData(t,n)}(r,e,Vk(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:$m.min(),n?a:s_())})).next((function(e){return Sw(r,Gk(t),e),{documents:e,ss:a}}))}))}function Sw(e,t,n){var r=e.Zi.get(t)||$m.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Zi.set(t,r)}var Tw=function(){function e(){f(this,e),this.activeTargetIds=l_()}return y(e,[{key:"hs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ps",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ls",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Iw=function(){function e(){f(this,e),this.Hs=new Tw,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hs.hs(e),this.Js[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Js[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hs.Ps(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Js[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hs.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hs=new Tw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Nw=function(){function e(){f(this,e)}return y(e,[{key:"Ys",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Pw=function(){function e(){var t=this;f(this,e),this.Zs=function(){return t.Xs()},this.eo=function(){return t.no()},this.ro=[],this.io()}return y(e,[{key:"Ys",value:function(e){this.ro.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}},{key:"Xs",value:function(){Tm("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=C(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Tm("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=C(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"v",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Rw=null;function Aw(){return null===Rw?Rw=268435456+Math.round(2147483648*Math.random()):Rw++,"0x"+Rw.toString(16)}var Dw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Ow=function(){function e(t){f(this,e),this.so=t.so,this.oo=t.oo}return y(e,[{key:"_o",value:function(e){this.ao=e}},{key:"uo",value:function(e){this.co=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.so(e)}},{key:"ho",value:function(){this.ao()}},{key:"Po",value:function(e){this.co(e)}},{key:"Io",value:function(e){this.lo(e)}}]),e}(),Lw="WebChannelConnection",Mw=function(e){g(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return y(n,[{key:"fo",value:function(e,t,n,r){var i=Aw();return new Promise((function(a,o){var s=new km;s.setWithCredentials(!0),s.listenOnce(pm.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case dm.NO_ERROR:var t=s.getResponseJson();Tm(Lw,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case dm.TIMEOUT:Tm(Lw,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Lm(Om.DEADLINE_EXCEEDED,"Request time out"));break;case dm.HTTP_ERROR:var n=s.getStatus();if(Tm(Lw,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Om).indexOf(t)>=0?t:Om.UNKNOWN}(u.status);o(new Lm(l,u.message))}else o(new Lm(Om.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Lm(Om.UNAVAILABLE,"Connection failed."));break;default:Rm()}}finally{Tm(Lw,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);Tm(Lw,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"yo",value:function(e,t,n){var r=Aw(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hm(),o=fm(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new mm({})),this.mo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var l=i.join("");Tm(Lw,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),s);var c=a.createWebChannel(l,s),h=!1,f=!1,d=new Ow({so:function(t){f?Tm(Lw,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Tm(Lw,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),Tm(Lw,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},oo:function(){return c.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,gm.EventType.OPEN,(function(){f||Tm(Lw,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,gm.EventType.CLOSE,(function(){f||(f=!0,Tm(Lw,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Po())})),p(c,gm.EventType.ERROR,(function(t){f||(f=!0,Nm(Lw,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Po(new Lm(Om.UNAVAILABLE,"The operation could not be completed")))})),p(c,gm.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Am(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Tm(Lw,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=j_[e];if(void 0!==t)return Q_(t)}(s),l=o.message;void 0===u&&(u=Om.INTERNAL,l="Unknown error status: "+s+" with message "+o.message),f=!0,d.Po(new Lm(u,l)),c.close()}else Tm(Lw,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Io(i)}})),p(o,vm.STAT_EVENT,(function(t){t.stat===ym.PROXY?Tm(Lw,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ym.NOPROXY&&Tm(Lw,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.ho()}),0),d}}]),n}(function(){function e(t){f(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.To=n+"://"+t.host,this.Eo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"Ao",get:function(){return!1}},{key:"Ro",value:function(e,t,n,r,i){var a=Aw(),o=this.Vo(e,t);Tm("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.mo(s,r,i),this.fo(e,o,s,n).then((function(t){return Tm("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Nm("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"po",value:function(e,t,n,r,i,a){return this.Ro(e,t,n,r,i)}},{key:"mo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Em,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Vo",value:function(e,t){var n=Dw[e];return"".concat(this.To,"/v1/").concat(t,":").concat(n)}}]),e}());function Fw(){return"undefined"!=typeof document?document:null}function Uw(e){return new vb(e,!0)}var jw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;f(this,e),this.ii=t,this.timerId=n,this.wo=r,this.So=i,this.bo=a,this.Do=0,this.vo=null,this.Co=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.Do=0}},{key:"Fo",value:function(){this.Do=this.bo}},{key:"Mo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Do+this.xo()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Tm("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Do," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.vo=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.Do*=this.So,this.Do<this.wo&&(this.Do=this.wo),this.Do>this.bo&&(this.Do=this.bo)}},{key:"Oo",value:function(){null!==this.vo&&(this.vo.skipDelay(),this.vo=null)}},{key:"cancel",value:function(){null!==this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"xo",value:function(){return(Math.random()-.5)*this.Do}}]),e}(),Vw=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this.ii=t,this.No=r,this.Bo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Lo=0,this.ko=null,this.qo=null,this.stream=null,this.Qo=new jw(t,n)}return y(e,[{key:"Ko",value:function(){return 1===this.state||5===this.state||this.$o()}},{key:"$o",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Uo()}},{key:"stop",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wo",value:function(){this.state=0,this.Qo.reset()}},{key:"Go",value:function(){var e=this;this.$o()&&null===this.ko&&(this.ko=this.ii.enqueueAfterDelay(this.No,6e4,(function(){return e.zo()})))}},{key:"jo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$o()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.ko&&(this.ko.cancel(),this.ko=null)}},{key:"Jo",value:function(){this.qo&&(this.qo.cancel(),this.qo=null)}},{key:"close",value:function(){var e=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.Qo.cancel(),this.Lo++,4!==t?this.Qo.reset():n&&n.code===Om.RESOURCE_EXHAUSTED?(Im(n.toString()),Im("Using maximum backoff delay to prevent overloading the backend."),this.Qo.Fo()):n&&n.code===Om.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.uo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Zo(this.Lo),n=this.Lo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Lo===n&&e.Xo(i,a)}),(function(n){t((function(){var t=new Lm(Om.UNKNOWN,"Fetching auth token failed: "+n.message);return e.e_(t)}))}))}},{key:"Xo",value:function(e,t){var n=this,r=this.Zo(this.Lo);this.stream=this.t_(e,t),this.stream._o((function(){r((function(){return n.state=2,n.qo=n.ii.enqueueAfterDelay(n.Bo,1e4,(function(){return n.$o()&&(n.state=3),Promise.resolve()})),n.listener._o()}))})),this.stream.uo((function(e){r((function(){return n.e_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Uo",value:function(){var e=this;this.state=5,this.Qo.Mo(Be(ze().mark((function t(){return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"e_",value:function(e){return Tm("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Zo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Lo===e?n():(Tm("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),zw=function(e){g(n,e);var t=w(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return y(n,[{key:"t_",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Rm()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Am(void 0===t||"string"==typeof t),Pg.fromBase64String(t||"")):(Am(void 0===t||t instanceof Uint8Array),Pg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Om.UNKNOWN:Q_(e.code);return new Lm(t,e.message||"")}(o);n=new sb(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=Eb(e,u.document.name),c=_b(u.document.updateTime),h=u.document.createTime?_b(u.document.createTime):$m.min(),f=new nk({mapValue:{fields:u.document.fields}}),d=ik.newFoundDocument(l,c,h,f),p=u.targetIds||[],v=u.removedTargetIds||[];n=new ab(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Eb(e,y.document),g=y.readTime?_b(y.readTime):$m.min(),k=ik.newNoDocument(m,g),_=y.removedTargetIds||[];n=new ab([],_,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Eb(e,b.document),x=b.removedTargetIds||[];n=new ab([],x,w,null)}else{if(!("filter"in t))return Rm();t.filter;var E=t.filter;E.targetId;var C=E.count,S=void 0===C?0:C,T=E.unchangedNames,I=new K_(S,T),N=E.targetId;n=new ob(N,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return $m.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?$m.min():t.readTime?_b(t.readTime):$m.min()}(e);return this.listener.n_(t,n)}},{key:"r_",value:function(e){var t={};t.database=Tb(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Rk(r)?{documents:Rb(e,r)}:{query:Ab(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=gb(e,t.resumeToken);var i=yb(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo($m.min())>0){n.readTime=mb(e,t.snapshotVersion.toTimestamp());var a=yb(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rm()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.jo(t)}},{key:"i_",value:function(e){var t={};t.database=Tb(this.serializer),t.removeTarget=e,this.jo(t)}}]),n}(Vw),qw=function(e){g(n,e);var t=w(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.s_=!1,u}return y(n,[{key:"o_",get:function(){return this.s_}},{key:"start",value:function(){this.s_=!1,this.lastStreamToken=void 0,Pu(k(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.s_&&this.__([])}},{key:"t_",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(Am(!!e.streamToken),this.lastStreamToken=e.streamToken,this.s_){this.Qo.reset();var t=function(e,t){return e&&e.length>0?(Am(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?_b(e.updateTime):_b(t);return n.isEqual($m.min())&&(n=_b(t)),new C_(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=_b(e.commitTime);return this.listener.a_(n,t)}return Am(!e.writeResults||0===e.writeResults.length),this.s_=!0,this.listener.u_()}},{key:"c_",value:function(){var e={};e.database=Tb(this.serializer),this.jo(e)}},{key:"__",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Pb(t.serializer,e)}))};this.jo(n)}}]),n}(Vw),Bw=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.l_=!1,o}return y(n,[{key:"h_",value:function(){if(this.l_)throw new Lm(Om.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Ro",value:function(e,t,n){var r=this;return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.connection.Ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Om.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Lm(Om.UNKNOWN,e.toString())}))}},{key:"po",value:function(e,t,n,r){var i=this;return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),s=o[0],u=o[1];return i.connection.po(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Om.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Lm(Om.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.l_=!0}}]),n}(y((function e(){f(this,e)})));var Hw=function(){function e(t,n){f(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.I_=0,this.T_=null,this.E_=!0}return y(e,[{key:"d_",value:function(){var e=this;0===this.I_&&(this.A_("Unknown"),this.T_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.T_=null,e.R_("Backend didn't respond within 10 seconds."),e.A_("Offline"),Promise.resolve()})))}},{key:"V_",value:function(e){"Online"===this.state?this.A_("Unknown"):(this.I_++,this.I_>=1&&(this.m_(),this.R_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.A_("Offline")))}},{key:"set",value:function(e){this.m_(),this.I_=0,"Online"===e&&(this.E_=!1),this.A_(e)}},{key:"A_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"R_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.E_?(Im(t),this.E_=!1):Tm("OnlineStateTracker",t)}},{key:"m_",value:function(){null!==this.T_&&(this.T_.cancel(),this.T_=null)}}]),e}(),Ww=y((function e(t,n,r,i,a){var o=this;f(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.f_=[],this.g_=new Map,this.p_=new Set,this.y_=[],this.w_=a,this.w_.Ys((function(e){r.enqueueAndForget(Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=nx(o),!e.t0){e.next=5;break}return Tm("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Dm(t)).p_.add(4),e.next=4,Qw(n);case 4:return n.S_.set("Unknown"),n.p_.delete(4),e.next=8,Kw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.S_=new Hw(r,i)}));function Kw(e){return Gw.apply(this,arguments)}function Gw(){return(Gw=Be(ze().mark((function e(t){var n,r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nx(t)){e.next=18;break}n=C(t.y_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function Qw(e){return Yw.apply(this,arguments)}function Yw(){return(Yw=Be(ze().mark((function e(t){var n,r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C(t.y_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function $w(e,t){var n=Dm(e);n.g_.has(t.targetId)||(n.g_.set(t.targetId,t),tx(n)?ex(n):Rx(n).$o()&&Jw(n,t))}function Xw(e,t){var n=Dm(e),r=Rx(n);n.g_.delete(t),r.$o()&&Zw(n,t),0===n.g_.size&&(r.$o()?r.Go():nx(n)&&n.S_.set("Unknown"))}function Jw(e,t){if(e.b_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($m.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Rx(e).r_(t)}function Zw(e,t){e.b_.Be(t),Rx(e).i_(t)}function ex(e){e.b_=new lb({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ut:function(t){return e.g_.get(t)||null},rt:function(){return e.datastore.serializer.databaseId}}),Rx(e).start(),e.S_.d_()}function tx(e){return nx(e)&&!Rx(e).Ko()&&e.g_.size>0}function nx(e){return 0===Dm(e).p_.size}function rx(e){e.b_=void 0}function ix(e){return ax.apply(this,arguments)}function ax(){return(ax=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.g_.forEach((function(e,n){Jw(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ox(e,t){return sx.apply(this,arguments)}function sx(){return(sx=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rx(t),tx(t)?(t.S_.V_(n),ex(t)):t.S_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ux(e,t,n){return lx.apply(this,arguments)}function lx(){return lx=Be(ze().mark((function e(t,n,r){var i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.S_.set("Online"),!(n instanceof sb&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Be(ze().mark((function e(t,n){var r,i,a,o;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=C(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.g_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.g_.delete(o),t.b_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Tm("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,cx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ab?t.b_.We(n):n instanceof ob?t.b_.Ze(n):t.b_.je(n),r.isEqual($m.min())){e.next=29;break}return e.prev=14,e.next=17,gw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.b_.st(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.g_.get(r);i&&e.g_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.g_.get(t);if(r){e.g_.set(t,r.withResumeToken(Pg.EMPTY_BYTE_STRING,r.snapshotVersion)),Zw(e,t);var i=new Bb(r.target,t,n,r.sequenceNumber);Jw(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Tm("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,cx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),lx.apply(this,arguments)}function cx(e,t,n){return hx.apply(this,arguments)}function hx(){return(hx=Be(ze().mark((function e(t,n,r){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fg(n)){e.next=2;break}throw n;case 2:return t.p_.add(1),e.next=5,Qw(t);case 5:t.S_.set("Offline"),r||(r=function(){return gw(t.localStore)}),t.asyncQueue.enqueueRetryable(Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tm("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.p_.delete(1),e.next=6,Kw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fx(e,t){return t().catch((function(n){return cx(e,n,t)}))}function dx(e){return px.apply(this,arguments)}function px(){return px=Be(ze().mark((function e(t){var n,r,i,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Dm(t),r=Ax(n),i=n.f_.length>0?n.f_[n.f_.length-1].batchId:-1;case 2:if(!vx(n)){e.next=19;break}return e.prev=3,e.next=6,bw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.f_.length&&r.Go(),e.abrupt("break",19);case 10:i=a.batchId,yx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,cx(n,e.t0);case 17:e.next=2;break;case 19:mx(n)&&gx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),px.apply(this,arguments)}function vx(e){return nx(e)&&e.f_.length<10}function yx(e,t){e.f_.push(t);var n=Ax(e);n.$o()&&n.o_&&n.__(t.mutations)}function mx(e){return nx(e)&&!Ax(e).Ko()&&e.f_.length>0}function gx(e){Ax(e).start()}function kx(e){return _x.apply(this,arguments)}function _x(){return(_x=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ax(t).c_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bx(e){return wx.apply(this,arguments)}function wx(){return(wx=Be(ze().mark((function e(t){var n,r,i,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ax(t),r=C(t.f_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.__(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xx(e,t,n){return Ex.apply(this,arguments)}function Ex(){return Ex=Be(ze().mark((function e(t,n,r){var i,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.f_.shift(),a=H_.from(i,n,r),e.next=3,fx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,dx(t);case 5:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}function Cx(e,t){return Sx.apply(this,arguments)}function Sx(){return Sx=Be(ze().mark((function e(t,n){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Ax(t).o_,!e.t0){e.next=4;break}return e.next=4,function(){var e=Be(ze().mark((function e(t,n){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return G_(e)&&e!==Om.ABORTED}(n.code)){e.next=7;break}return r=t.f_.shift(),Ax(t).Wo(),e.next=5,fx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,dx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:mx(t)&&gx(t);case 5:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Tx(e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=Be(ze().mark((function e(t,n){var r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Dm(t)).asyncQueue.verifyOperationInProgress(),Tm("RemoteStore","RemoteStore received new credentials"),i=nx(r),r.p_.add(3),e.next=6,Qw(r);case 6:return i&&r.S_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.p_.delete(3),e.next=12,Kw(r);case 12:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}function Nx(e,t){return Px.apply(this,arguments)}function Px(){return(Px=Be(ze().mark((function e(t,n){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dm(t),!n){e.next=7;break}return r.p_.delete(2),e.next=5,Kw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.p_.add(2),e.next=12,Qw(r);case 12:r.S_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rx(e){return e.D_||(e.D_=function(e,t,n){var r=Dm(e);return r.h_(),new zw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:ix.bind(null,e),uo:ox.bind(null,e),n_:ux.bind(null,e)}),e.y_.push(function(){var t=Be(ze().mark((function t(n){return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.D_.Wo(),tx(e)?ex(e):e.S_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.D_.stop();case 6:rx(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.D_}function Ax(e){return e.v_||(e.v_=function(e,t,n){var r=Dm(e);return r.h_(),new qw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:kx.bind(null,e),uo:Cx.bind(null,e),u_:bx.bind(null,e),a_:xx.bind(null,e)}),e.y_.push(function(){var t=Be(ze().mark((function t(n){return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.v_.Wo(),t.next=4,dx(e);case 4:t.next=9;break;case 6:return t.next=8,e.v_.stop();case 8:e.f_.length>0&&(Tm("RemoteStore","Stopping write stream with ".concat(e.f_.length," pending writes")),e.f_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.v_}var Dx=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Mm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lm(Om.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Ox(e,t){if(Im("AsyncQueue","".concat(t,": ").concat(e)),fg(e))return new Lm(Om.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Lx=function(){function e(t){f(this,e),this.comparator=t?function(e,n){return t(e,n)||tg.comparator(e.key,n.key)}:function(e,t){return tg.comparator(e.key,t.key)},this.keyedMap=e_(),this.sortedSet=new xg(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Mx=function(){function e(){f(this,e),this.C_=new xg(tg.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.C_.get(t);n?0!==e.type&&3===n.type?this.C_=this.C_.insert(t,e):3===e.type&&1!==n.type?this.C_=this.C_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.C_=this.C_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.C_=this.C_.remove(t):1===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):Rm():this.C_=this.C_.insert(t,e)}},{key:"F_",value:function(){var e=[];return this.C_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Fx=function(){function e(t,n,r,i,a,o,s,u,l){f(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=l}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bk(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Lx.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Ux=y((function e(){f(this,e),this.M_=void 0,this.listeners=[]})),jx=y((function e(){f(this,e),this.queries=new $k((function(e){return Hk(e)}),Bk),this.onlineState="Unknown",this.x_=new Set}));function Vx(e,t){return zx.apply(this,arguments)}function zx(){return zx=Be(ze().mark((function e(t,n){var r,i,a,o,s;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dm(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Ux),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.M_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Ox(e.t0,"Initialization of query '".concat(Wk(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.O_(r.onlineState),o.M_&&n.N_(o.M_)&&Kx(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),zx.apply(this,arguments)}function qx(e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=Be(ze().mark((function e(t,n){var r,i,a,o,s;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dm(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Bx.apply(this,arguments)}function Hx(e,t){var n,r=Dm(e),i=!1,a=C(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var l,c=C(u.listeners);try{for(c.s();!(l=c.n()).done;){l.value.N_(o)&&(i=!0)}}catch(h){c.e(h)}finally{c.f()}u.M_=o}}}catch(h){a.e(h)}finally{a.f()}i&&Kx(r)}function Wx(e,t,n){var r=Dm(e),i=r.queries.get(t);if(i){var a,o=C(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Kx(e){e.x_.forEach((function(e){e.next()}))}var Gx=function(){function e(t,n,r){f(this,e),this.query=t,this.B_=n,this.L_=!1,this.k_=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"N_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=C(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Fx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.L_?this.q_(e)&&(this.B_.next(e),a=!0):this.Q_(e,this.onlineState)&&(this.K_(e),a=!0),this.k_=e,a}},{key:"onError",value:function(e){this.B_.error(e)}},{key:"O_",value:function(e){this.onlineState=e;var t=!1;return this.k_&&!this.L_&&this.Q_(this.k_,e)&&(this.K_(this.k_),t=!0),t}},{key:"Q_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.U_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"q_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.k_&&this.k_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"K_",value:function(e){e=Fx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.L_=!0,this.B_.next(e)}}]),e}();var Qx=y((function e(t){f(this,e),this.key=t})),Yx=y((function e(t){f(this,e),this.key=t})),$x=function(){function e(t,n){f(this,e),this.query=t,this.Z_=n,this.X_=null,this.hasCachedResults=!1,this.current=!1,this.ea=s_(),this.mutatedKeys=s_(),this.ta=Qk(t),this.na=new Lx(this.ta)}return y(e,[{key:"ra",get:function(){return this.Z_}},{key:"ia",value:function(e,t){var n=this,r=t?t.sa:new Mx,i=t?t.na:this.na,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=Kk(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.oa(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.ta(h,u)>0||l&&n.ta(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{na:o,sa:r,zi:s,mutatedKeys:a}}},{key:"oa",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.na;this.na=e.na,this.mutatedKeys=e.mutatedKeys;var a=e.sa.F_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rm()}};return n(e)-n(t)}(e.type,t.type)||r.ta(e.doc,t.doc)})),this._a(n);var o=t?this.aa():[],s=0===this.ea.size&&this.current?1:0,u=s!==this.X_;return this.X_=s,0!==a.length||u?{snapshot:new Fx(this.query,e.na,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),ua:o}:{ua:o}}},{key:"O_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({na:this.na,sa:new Mx,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ua:[]}}},{key:"ca",value:function(e){return!this.Z_.has(e)&&!!this.na.has(e)&&!this.na.get(e).hasLocalMutations}},{key:"_a",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Z_=t.Z_.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Z_=t.Z_.delete(e)})),this.current=e.current)}},{key:"aa",value:function(){var e=this;if(!this.current)return[];var t=this.ea;this.ea=s_(),this.na.forEach((function(t){e.ca(t.key)&&(e.ea=e.ea.add(t.key))}));var n=[];return t.forEach((function(t){e.ea.has(t)||n.push(new Yx(t))})),this.ea.forEach((function(e){t.has(e)||n.push(new Qx(e))})),n}},{key:"la",value:function(e){this.Z_=e.ss,this.ea=s_();var t=this.ia(e.documents);return this.applyChanges(t,!0)}},{key:"ha",value:function(){return Fx.fromInitialDocuments(this.query,this.na,this.mutatedKeys,0===this.X_,this.hasCachedResults)}}]),e}(),Xx=y((function e(t,n,r){f(this,e),this.query=t,this.targetId=n,this.view=r})),Jx=y((function e(t){f(this,e),this.key=t,this.Pa=!1})),Zx=function(){function e(t,n,r,i,a,o){f(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ia={},this.Ta=new $k((function(e){return Hk(e)}),Bk),this.Ea=new Map,this.da=new Set,this.Aa=new xg(tg.comparator),this.Ra=new Map,this.Va=new nw,this.ma={},this.fa=new Map,this.ga=$b.On(),this.onlineState="Unknown",this.pa=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.pa}}]),e}();function eE(e,t){return tE.apply(this,arguments)}function tE(){return tE=Be(ze().mark((function e(t,n){var r,i,a,o,s,u;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=NE(t),!(o=r.Ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ha(),e.next=15;break;case 6:return e.next=8,ww(r.localStore,Vk(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,nE(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&$w(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}function nE(e,t,n,r,i){return rE.apply(this,arguments)}function rE(){return rE=Be(ze().mark((function e(t,n,r,i,a){var o,s,u,l,c,h;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ya=function(e,n,r){return function(){var e=Be(ze().mark((function e(t,n,r,i){var a,o,s;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ia(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,Cw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ia(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(bE(t,n.targetId,s.ua),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Cw(t.localStore,n,!0);case 3:return o=e.sent,s=new $x(n,o.ss),u=s.ia(o.documents),l=ib.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),c=s.applyChanges(u,t.isPrimaryClient,l),bE(t,r,c.ua),h=new Xx(n,r,s),e.abrupt("return",(t.Ta.set(n,h),t.Ea.has(r)?t.Ea.get(r).push(n):t.Ea.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(e,t){return aE.apply(this,arguments)}function aE(){return aE=Be(ze().mark((function e(t,n){var r,i,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dm(t),i=r.Ta.get(n),!((a=r.Ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Ea.set(i.targetId,a.filter((function(e){return!Bk(e,n)}))),void r.Ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,xw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Xw(r.remoteStore,i.targetId),kE(r,i.targetId)})).catch(lg);case 9:e.next=14;break;case 11:return kE(r,i.targetId),e.next=14,xw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),aE.apply(this,arguments)}function oE(e,t,n){return sE.apply(this,arguments)}function sE(){return sE=Be(ze().mark((function e(t,n,r){var i,a,o;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=PE(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Dm(e),a=Ym.now(),o=t.reduce((function(e,t){return e.add(t.key)}),s_());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Jk(),u=s_();return i.Xi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=C(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=A_(l,n.get(l.key).overlayedDocument);null!=c&&s.push(new L_(l.key,c,rk(c.value.mapValue),S_.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:t_(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ma[e.currentUser.toKey()];r||(r=new xg(Gm)),r=r.insert(t,n),e.ma[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,EE(i,a.changes);case 9:return e.next=11,dx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Ox(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),sE.apply(this,arguments)}function uE(e,t){return lE.apply(this,arguments)}function lE(){return lE=Be(ze().mark((function e(t,n){var r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dm(t),e.prev=1,e.next=4,kw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Ra.get(t);n&&(Am(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Pa=!0:e.modifiedDocuments.size>0?Am(n.Pa):e.removedDocuments.size>0&&(Am(n.Pa),n.Pa=!1))})),e.next=8,EE(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,lg(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),lE.apply(this,arguments)}function cE(e,t,n){var r=Dm(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ta.forEach((function(e,n){var r=n.view.O_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Dm(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=C(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.O_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Kx(n)}(r.eventManager,t),i.length&&r.Ia.n_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function hE(e,t,n){return fE.apply(this,arguments)}function fE(){return fE=Be(ze().mark((function e(t,n,r){var i,a,o,s,u,l;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Dm(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Ra.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new xg(tg.comparator)).insert(o,ik.newNoDocument(o,$m.min())),u=s_().add(o),l=new rb($m.min(),new Map,new xg(Gm),s,u),e.next=9,uE(i,l);case 9:i.Aa=i.Aa.remove(o),i.Ra.delete(n),xE(i),e.next=16;break;case 14:return e.next=16,xw(i.localStore,n,!1).then((function(){return kE(i,n,r)})).catch(lg);case 16:case"end":return e.stop()}}),e)}))),fE.apply(this,arguments)}function dE(e,t){return pE.apply(this,arguments)}function pE(){return pE=Be(ze().mark((function e(t,n){var r,i,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dm(t),i=n.batch.batchId,e.prev=1,e.next=4,mw(r.localStore,n);case 4:return a=e.sent,gE(r,i,null),mE(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,EE(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,lg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),pE.apply(this,arguments)}function vE(e,t,n){return yE.apply(this,arguments)}function yE(){return yE=Be(ze().mark((function e(t,n,r){var i,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dm(t),e.prev=1,e.next=4,function(e,t){var n=Dm(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Am(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,gE(i,n,r),mE(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,EE(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,lg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),yE.apply(this,arguments)}function mE(e,t){(e.fa.get(t)||[]).forEach((function(e){e.resolve()})),e.fa.delete(t)}function gE(e,t,n){var r=Dm(e),i=r.ma[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ma[r.currentUser.toKey()]=i}}function kE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=C(e.Ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ta.delete(a),n&&e.Ia.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Ea.delete(t),e.isPrimaryClient&&e.Va.Ar(t).forEach((function(t){e.Va.containsKey(t)||_E(e,t)}))}function _E(e,t){e.da.delete(t.path.canonicalString());var n=e.Aa.get(t);null!==n&&(Xw(e.remoteStore,n),e.Aa=e.Aa.remove(t),e.Ra.delete(n),xE(e))}function bE(e,t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Qx?(e.Va.addReference(a.key,t),wE(e,a)):a instanceof Yx?(Tm("SyncEngine","Document no longer in limbo: "+a.key),e.Va.removeReference(a.key,t),e.Va.containsKey(a.key)||_E(e,a.key)):Rm()}}catch(o){i.e(o)}finally{i.f()}}function wE(e,t){var n=t.key,r=n.path.canonicalString();e.Aa.get(n)||e.da.has(r)||(Tm("SyncEngine","New document in limbo: "+n),e.da.add(r),xE(e))}function xE(e){for(;e.da.size>0&&e.Aa.size<e.maxConcurrentLimboResolutions;){var t=e.da.values().next().value;e.da.delete(t);var n=new tg(Jm.fromString(t)),r=e.ga.next();e.Ra.set(r,new Jx(n)),e.Aa=e.Aa.insert(n,r),$w(e.remoteStore,new Bb(Vk(Ok(n.path)),r,"TargetPurposeLimboResolution",dg.ae))}}function EE(e,t,n){return CE.apply(this,arguments)}function CE(){return CE=Be(ze().mark((function e(t,n,r){var i,a,o,s;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Dm(t),a=[],o=[],s=[],e.t0=i.Ta.isEmpty(),e.t0){e.next=9;break}return i.Ta.forEach((function(e,t){s.push(i.ya(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=hw.qi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Ia.n_(a),e.next=9,function(){var e=Be(ze().mark((function e(t,n){var r,i,a,o,s,u,l,c;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dm(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return hg.forEach(n,(function(t){return hg.forEach(t.Li,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return hg.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),fg(e.t0)){e.next=10;break}throw e.t0;case 10:Tm("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=C(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),r.Ji=r.Ji.insert(s,c))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),CE.apply(this,arguments)}function SE(e,t){return TE.apply(this,arguments)}function TE(){return(TE=Be(ze().mark((function e(t,n){var r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Dm(t)).currentUser.isEqual(n)){e.next=11;break}return Tm("SyncEngine","User change. New user:",n.toKey()),e.next=5,vw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.fa.forEach((function(e){e.forEach((function(e){e.reject(new Lm(Om.CANCELLED,t))}))})),e.fa.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,EE(r,i.ts);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IE(e,t){var n=Dm(e),r=n.Ra.get(t);if(r&&r.Pa)return s_().add(r.key);var i=s_(),a=n.Ea.get(t);if(!a)return i;var o,s=C(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n.Ta.get(u);i=i.unionWith(l.view.ra)}}catch(c){s.e(c)}finally{s.f()}return i}function NE(e){var t=Dm(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=IE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hE.bind(null,t),t.Ia.n_=Hx.bind(null,t.eventManager),t.Ia.wa=Wx.bind(null,t.eventManager),t}function PE(e){var t=Dm(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vE.bind(null,t),t}var RE=function(){function e(){f(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Uw(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return pw(this.persistence,new fw,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new uw(cw.zr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Iw}},{key:"terminate",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),AE=function(){function e(){f(this,e)}return y(e,[{key:"initialize",value:function(){var e=Be(ze().mark((function e(t,n){var r=this;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return cE(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=SE.bind(null,this.syncEngine),e.next=12,Nx(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new jx}},{key:"createDatastore",value:function(e){var t=Uw(e.databaseInfo.databaseId),n=function(e){return new Mw(e)}(e.databaseInfo);return function(e,t,n,r){return new Bw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new Ww(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return cE(t.syncEngine,e,0)}),Pw.v()?new Pw:new Nw)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Zx(e,t,n,r,i,a);return o&&(s.pa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Dm(t),Tm("RemoteStore","RemoteStore shutting down."),n.p_.add(5),e.next=5,Qw(n);case 5:n.w_.shutdown(),n.S_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var DE=function(){function e(t){f(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.Da(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Da(this.observer.error,e):Im("Uncaught Error in snapshot listener:",e.toString())}},{key:"va",value:function(){this.muted=!0}},{key:"Da",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),OE=function(){function e(t,n,r,i){var a=this;f(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xm.UNAUTHENTICATED,this.clientId=Km.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tm("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Tm("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=Be(ze().mark((function e(){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Lm(Om.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Mm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Be(ze().mark((function n(){var r;return ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Ox(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function LE(e,t){return ME.apply(this,arguments)}function ME(){return ME=Be(ze().mark((function e(t,n){var r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Tm("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,vw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ME.apply(this,arguments)}function FE(e,t){return UE.apply(this,arguments)}function UE(){return UE=Be(ze().mark((function e(t,n){var r,i;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,VE(t);case 3:return r=e.sent,Tm("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Tx(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Tx(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),UE.apply(this,arguments)}function jE(e){return"FirebaseError"===e.name?e.code===Om.FAILED_PRECONDITION||e.code===Om.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function VE(e){return zE.apply(this,arguments)}function zE(){return(zE=Be(ze().mark((function e(t){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Tm("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,LE(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),jE(n=e.t0)){e.next=13;break}throw n;case 13:return Nm("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,LE(t,new RE);case 16:e.next=21;break;case 18:return Tm("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,LE(t,new RE);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function qE(e){return BE.apply(this,arguments)}function BE(){return(BE=Be(ze().mark((function e(t){return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Tm("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,FE(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Tm("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,FE(t,new AE);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HE(e){return qE(e).then((function(e){return e.syncEngine}))}function WE(e){return KE.apply(this,arguments)}function KE(){return(KE=Be(ze().mark((function e(t){var n,r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=eE.bind(null,n.syncEngine),r.onUnlisten=iE.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Mm;return e.asyncQueue.enqueueAndForget(Be(ze().mark((function i(){return ze().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new DE({next:function(a){t.enqueueAndForget((function(){return qx(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Lm(Om.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Lm(Om.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Gx(Ok(n.path),a,{includeMetadataChanges:!0,U_:!0});return Vx(e,o)},i.next=3,WE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function QE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Mm;return e.asyncQueue.enqueueAndForget(Be(ze().mark((function i(){return ze().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new DE({next:function(n){t.enqueueAndForget((function(){return qx(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Lm(Om.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Gx(n,a,{includeMetadataChanges:!0,U_:!0});return Vx(e,o)},i.next=3,WE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function YE(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var $E=new Map;function XE(e,t,n){if(!n)throw new Lm(Om.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function JE(e){if(!tg.isDocumentKey(e))throw new Lm(Om.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ZE(e){if(tg.isDocumentKey(e))throw new Lm(Om.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function eC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Rm()}function tC(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lm(Om.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=eC(e);throw new Lm(Om.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var nC=function(){function e(t){var n,r;if(f(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Lm(Om.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Lm(Om.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Lm(Om.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YE(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Lm(Om.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Lm(Om.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Lm(Om.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),rC=function(){function e(t,n,r,i){f(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nC({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new Lm(Om.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Lm(Om.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nC(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Um;switch(e.type){case"firstParty":return new qm(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Lm(Om.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=$E.get(e);t&&(Tm("ComponentProvider","Removing Datastore"),$E.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function iC(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=tC(e,rC))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Nm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=xm.MOCK_USER;else{s=ct(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new Lm(Om.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new xm(l)}e._authCredentials=new jm(new Fm(s,u))}}var aC=function(){function e(t,n,r){f(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),oC=function(){function e(t,n,r){f(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new sC(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),sC=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,Ok(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new oC(this.firestore,null,new tg(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(aC);function uC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Mt(e),XE("collection","path",t),e instanceof rC){var a=Jm.fromString.apply(Jm,[t].concat(r));return ZE(a),new sC(e,null,a)}if(!(e instanceof oC||e instanceof sC))throw new Lm(Om.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Jm.fromString.apply(Jm,[t].concat(r)));return ZE(o),new sC(e.firestore,null,o)}function lC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Mt(e),1===arguments.length&&(t=Km.V()),XE("doc","path",t),e instanceof rC){var a=Jm.fromString.apply(Jm,[t].concat(r));return JE(a),new oC(e,null,new tg(a))}if(!(e instanceof oC||e instanceof sC))throw new Lm(Om.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Jm.fromString.apply(Jm,[t].concat(r)));return JE(o),new oC(e.firestore,e instanceof sC?e.converter:null,new tg(o))}var cC=function(){function e(){var t=this;f(this,e),this.Ua=Promise.resolve(),this.Wa=[],this.Ga=!1,this.za=[],this.ja=null,this.Ha=!1,this.Ja=!1,this.Ya=[],this.Qo=new jw(this,"async_queue_retry"),this.Za=function(){var e=Fw();e&&Tm("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Qo.Oo()};var n=Fw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Za)}return y(e,[{key:"isShuttingDown",get:function(){return this.Ga}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Xa(),this.eu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ga){this.Ga=!0,this.Ja=e||!1;var t=Fw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Za)}}},{key:"enqueue",value:function(e){var t=this;if(this.Xa(),this.Ga)return new Promise((function(){}));var n=new Mm;return this.eu((function(){return t.Ga&&t.Ja?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Wa.push(e),t.tu()}))}},{key:"tu",value:function(){var e=Be(ze().mark((function e(){var t=this;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Wa.length){e.next=14;break}return e.prev=1,e.next=4,this.Wa[0]();case 4:this.Wa.shift(),this.Qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),fg(e.t0)){e.next=12;break}throw e.t0;case 12:Tm("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Wa.length>0&&this.Qo.Mo((function(){return t.tu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){var t=this,n=this.Ua.then((function(){return t.Ha=!0,e().catch((function(e){t.ja=e,t.Ha=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Im("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ha=!1,e}))}));return this.Ua=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Xa(),this.Ya.indexOf(e)>-1&&(t=0);var i=Dx.createAndSchedule(this,e,t,n,(function(e){return r.nu(e)}));return this.za.push(i),i}},{key:"Xa",value:function(){this.ja&&Rm()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ru",value:function(){var e=Be(ze().mark((function e(){var t;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Ua,e.next=3,t;case 3:if(t!==this.Ua){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iu",value:function(e){var t,n=C(this.za);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"su",value:function(e){var t=this;return this.ru().then((function(){t.za.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=C(t.za);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ru()}))}},{key:"ou",value:function(e){this.Ya.push(e)}},{key:"nu",value:function(e){var t=this.za.indexOf(e);this.za.splice(t,1)}}]),e}();var hC=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new cC,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||dC(this),this._firestoreClient.terminate()}}]),n}(rC);function fC(e){return e._firestoreClient||dC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function dC(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Ug(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,YE(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new OE(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var pC=function(){function e(t){f(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Pg.fromBase64String(t))}catch(t){throw new Lm(Om.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Pg.fromUint8Array(t))}}]),e}(),vC=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Lm(Om.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new eg(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var yC=y((function e(t){f(this,e),this._methodName=t})),mC=function(){function e(t,n){if(f(this,e),!isFinite(t)||t<-90||t>90)throw new Lm(Om.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Lm(Om.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Gm(this._lat,e._lat)||Gm(this._long,e._long)}}]),e}(),gC=/^__.*__$/,kC=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new L_(e,this.data,this.fieldMask,t,this.fieldTransforms):new O_(e,this.data,t,this.fieldTransforms)}}]),e}();function _C(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rm()}}var bC=function(){function e(t,n,r,i,a,o){f(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this._u(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"au",get:function(){return this.settings.au}},{key:"uu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"cu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.uu({path:n,lu:!1});return r.hu(e),r}},{key:"Pu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.uu({path:n,lu:!1});return r._u(),r}},{key:"Iu",value:function(e){return this.uu({path:void 0,lu:!0})}},{key:"Tu",value:function(e){return DC(e,this.settings.methodName,this.settings.Eu||!1,this.path,this.settings.du)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"_u",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.hu(this.path.get(e))}},{key:"hu",value:function(e){if(0===e.length)throw this.Tu("Document fields must not be empty");if(_C(this.au)&&gC.test(e))throw this.Tu('Document fields cannot begin and end with "__"')}}]),e}(),wC=function(){function e(t,n,r){f(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Uw(t)}return y(e,[{key:"Au",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new bC({au:e,methodName:t,du:n,path:eg.emptyPath(),lu:!1,Eu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function xC(e){var t=e._freezeSettings(),n=Uw(e._databaseId);return new wC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function EC(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Au(a.merge||a.mergeFields?2:0,t,n,i);NC("Data must be an object, but it was:",o,r);var s,u,l=TC(r,o);if(a.merge)s=new Ig(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var c,h=[],f=C(a.mergeFields);try{for(f.s();!(c=f.n()).done;){var d=PC(t,c.value,n);if(!o.contains(d))throw new Lm(Om.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));OC(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}s=new Ig(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new kC(new nk(l),s,u)}function CC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return SC(n,e.Au(r?4:3,t))}function SC(e,t){if(IC(e=Mt(e)))return NC("Unsupported field value:",t,e),TC(e,t);if(e instanceof yC)return function(e,t){if(!_C(t.au))throw t.Tu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Tu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.lu&&4!==t.au)throw t.Tu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=C(e);try{for(a.s();!(n=a.n()).done;){var o=SC(n.value,t.Iu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Mt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return f_(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ym.fromDate(e);return{timestampValue:mb(t.serializer,n)}}if(e instanceof Ym){var r=new Ym(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:mb(t.serializer,r)}}if(e instanceof mC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof pC)return{bytesValue:gb(t.serializer,e._byteString)};if(e instanceof oC){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Tu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:bb(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Tu("Unsupported field value: ".concat(eC(e)))}(e,t)}function TC(e,t){var n={};return wg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bg(e,(function(e,r){var i=SC(r,t.cu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function IC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ym||e instanceof mC||e instanceof pC||e instanceof oC||e instanceof yC)}function NC(e,t,n){if(!IC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=eC(n);throw"an object"===r?t.Tu(e+" a custom object"):t.Tu(e+" "+r)}}function PC(e,t,n){if((t=Mt(t))instanceof vC)return t._internalPath;if("string"==typeof t)return AC(e,t);throw DC("Field path arguments must be of type string or ",e,!1,void 0,n)}var RC=new RegExp("[~\\*/\\[\\]]");function AC(e,t,n){if(t.search(RC)>=0)throw DC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return x(vC,h(t.split(".")))._internalPath}catch(dd){throw DC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function DC(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Lm(Om.INVALID_ARGUMENT,s+e+u)}function OC(e,t){return e.some((function(e){return e.isEqual(t)}))}var LC=function(){function e(t,n,r,i,a){f(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new oC(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new MC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(FC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),MC=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return Pu(k(n.prototype),"data",this).call(this)}}]),n}(LC);function FC(e,t){return"string"==typeof t?AC(e,t):t instanceof vC?t._internalPath:t._delegate._internalPath}function UC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Lm(Om.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jC=y((function e(){f(this,e)})),VC=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(jC);function zC(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof jC&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof HC})).length,n=e.filter((function(e){return e instanceof qC})).length;if(t>1||t>0&&n>0)throw new Lm(Om.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=C(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var qC=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return GC(e._query,t),new aC(e.firestore,e.converter,zk(e._query,t))}},{key:"_parse",value:function(e){var t=xC(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Lm(Om.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){KC(o,a);var u,l=[],c=C(o);try{for(c.s();!(u=c.n()).done;){var h=u.value;l.push(WC(r,e,h))}}catch(f){c.e(f)}finally{c.f()}s={arrayValue:{values:l}}}else s=WC(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||KC(o,a),s=CC(n,t,o,"in"===a||"not-in"===a);return hk.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(VC);function BC(e,t,n){var r=t,i=FC("where",e);return qC._create(i,r,n)}var HC=function(e){g(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:fk.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=C(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;GC(r,a),r=zk(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new aC(e.firestore,e.converter,zk(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(jC);function WC(e,t,n){if("string"==typeof(n=Mt(n))){if(""===n)throw new Lm(Om.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uk(t)&&-1!==n.indexOf("/"))throw new Lm(Om.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Jm.fromString(n));if(!tg.isDocumentKey(r))throw new Lm(Om.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Qg(e,new tg(r))}if(n instanceof oC)return Qg(e,n._key);throw new Lm(Om.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(eC(n),"."))}function KC(e,t){if(!Array.isArray(e)||0===e.length)throw new Lm(Om.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function GC(e,t){if(t.isInequality()){var n=Fk(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Lm(Om.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Mk(e);null!==i&&QC(e,r,i)}var a=function(e,t){var n,r=C(e);try{for(r.s();!(n=r.n()).done;){var i,a=C(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Lm(Om.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Lm(Om.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function QC(e,t,n){if(!n.isEqual(t))throw new Lm(Om.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var YC=function(){function e(){f(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Og(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Rm()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return bg(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new mC(Dg(e.latitude),Dg(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Mg(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fg(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ag(e);return new Ym(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Jm.fromString(e);Am(qb(n));var r=new jg(n.get(1),n.get(3)),i=new tg(n.popFirst(5));return r.isEqual(t)||Im("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function $C(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var XC=function(){function e(t,n){f(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),JC=function(e){g(n,e);var t=w(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return y(n,[{key:"exists",value:function(){return Pu(k(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ZC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(FC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(LC),ZC=function(e){g(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pu(k(n.prototype),"data",this).call(this,e)}}]),n}(JC),eS=function(){function e(t,n,r,i){f(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new XC(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new ZC(n._firestore,n._userDataWriter,r.key,r,new XC(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Lm(Om.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new ZC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new XC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new ZC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new XC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:tS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function tS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rm()}}function nS(e){e=tC(e,oC);var t=tC(e.firestore,hC);return GE(fC(t),e._key).then((function(n){return sS(t,e,n)}))}var rS=function(e){g(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new pC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new oC(this.firestore,null,t)}}]),n}(YC);function iS(e){e=tC(e,aC);var t=tC(e.firestore,hC),n=fC(t),r=new rS(t);return UC(e._query),QE(n,e._query).then((function(n){return new eS(t,r,e,n)}))}function aS(e,t,n){e=tC(e,oC);var r=tC(e.firestore,hC),i=$C(e.converter,t,n);return oS(r,[EC(xC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,S_.none())])}function oS(e,t){return function(e,t){var n=new Mm;return e.asyncQueue.enqueueAndForget(Be(ze().mark((function r(){return ze().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=oE,r.next=3,HE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(fC(e),t)}function sS(e,t,n){var r=n.docs.get(t._key),i=new rS(e);return new JC(e,i,t._key,r,new XC(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Em=e}(Nn),En(new Ft("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new hC(new Vm(e.getProvider("auth-internal")),new Hm(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Lm(Om.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jg(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),An(wm,"4.0.0",e),An(wm,"4.0.0","esm2017")}();var uS=Pn({apiKey:"AIzaSyAlv-tJ7JTZnz13smVCCBbEzRvDkGttKCg",authDomain:"react-nim.firebaseapp.com",databaseURL:"https://react-nim-default-rtdb.firebaseio.com",projectId:"react-nim",storageBucket:"react-nim.appspot.com",messagingSenderId:"261448265845",appId:"1:261448265845:web:b522b12575f6763e62083c",measurementId:"G-6SKHNTHN1R"}),lS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn(),t=Cn(e,"auth");if(t.isInitialized())return t.getImmediate();var n,r=function(e,t){var n=Cn(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(St(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;ju(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:zf,persistence:[Mh,ch,fh]}),i=ut("authTokenSyncURL");if(i){var a=(n=i,function(){var e=Be(ze().mark((function e(t){var r,i,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,t.getIdTokenResult();case 4:e.t0=e.sent;case 5:if(r=e.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>Jf)){e.next=9;break}return e.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,Zf!==a){e.next=12;break}return e.abrupt("return");case 12:return Zf=a,e.next=15,fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());!function(e,t,n){Mt(e).beforeAuthStateChanged(t,n)}(r,a,(function(){return a(r.currentUser)})),function(e,t,n,r){Mt(e).onIdTokenChanged(t,n,r)}(r,(function(e){return a(e)}))}var o=at("auth");return o&&cc(r,"http://".concat(o)),r}(uS),cS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn(),t=arguments.length>1?arguments[1]:void 0,n=Cn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){var r=ot("database");r&&Nu.apply(void 0,[n].concat(h(r)))}return n}(uS),hS=function(e,t){var n="string"==typeof e?e:t||"(default)",r=Cn("object"==typeof e?e:Rn(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=ot("firestore");i&&iC.apply(void 0,[r].concat(h(i)))}return r}(uS),fS=function(e){var n=ke(),r=l((0,t.useState)([]),2),i=r[0],a=r[1],o=l((0,t.useState)([]),2),s=o[0],u=o[1],c=function(e,t){return Object.values(e).filter((function(e){return e.status===t}))};return(0,t.useEffect)((function(){if(e){var t=xu(yu(cS,"games"),(function(e){var t=e.val();a(c(t,"playing")),u(c(t,"waiting"))}));return function(){t()}}}),[e]),{activeGames:i,waitingGames:s,createGame:function(){if(e){var t=yu(cS,"games"),r={player_1_ID:e.uid,player_1_email:e.email,player_2_ID:null,player_2_email:null,status:"waiting",deleted:!1,piles:[1,3,5,7]},i=function(e,t){e=Mt(e),Is("push",e._path),Es("push",t,e._path,!0);var n,r=Vs(e._repo),i=lu(r),a=mu(e,i),o=mu(e,i);return n=null!=t?gu(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(t),a=i.key;return gu(i,Ve(Ve({},r),{},{key:a})).then((function(){n("/game/".concat(a))}))}},joinGame:function(t){if(e){var r=yu(cS,"games/".concat(t));ku(r).then((function(i){var a=Ve(Ve({},i.val()),{},{player_2_ID:e.uid,player_2_email:e.email,status:"playing",currentPlayer:1});gu(r,a).then((function(){n("/game/".concat(t))}))}))}}}};function dS(){return dS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dS.apply(this,arguments)}function pS(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var vS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],yS=["aria-current","caseSensitive","className","end","style","to","children"];var mS=r.startTransition;function gS(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,s=t.useRef();null==s.current&&(s.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),L((function(e,t){var n=e.location;return A("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:D(t)}),null,n)));var u=s.current,c=l(t.useState({action:u.action,location:u.location}),2),h=c[0],f=c[1],d=(a||{}).v7_startTransition,p=t.useCallback((function(e){d&&mS?mS((function(){return f(e)})):f(e)}),[f,d]);return t.useLayoutEffect((function(){return u.listen(p)}),[u,p]),t.createElement(Oe,{basename:r,children:i,location:h.location,navigationType:h.action,navigator:u})}var kS="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,_S=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bS=t.forwardRef((function(e,n){var r,i=e.onClick,a=e.relative,o=e.reloadDocument,s=e.replace,u=e.state,l=e.target,c=e.to,h=e.preventScrollReset,f=pS(e,vS),d=t.useContext(fe).basename,p=!1;if("string"===typeof c&&_S.test(c)&&(r=c,kS))try{var v=new URL(window.location.href),y=c.startsWith("//")?new URL(v.protocol+c):new URL(c),m=$(y.pathname,d);y.origin===v.origin&&null!=m?c=m+y.search+y.hash:p=!0}catch(_){}var g=function(e,n){var r=(void 0===n?{}:n).relative;ye()||N(!1);var i=t.useContext(fe),a=i.basename,o=i.navigator,s=_e(e,{relative:r}),u=s.hash,l=s.pathname,c=s.search,h=l;return"/"!==a&&(h="/"===l?a:ee([a,l])),o.createHref({pathname:h,search:c,hash:u})}(c,{relative:a}),k=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,l=ke(),c=me(),h=_e(e,{relative:u});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:D(c)===D(h);l(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[c,l,h,a,o,i,e,s,u])}(c,{replace:s,state:u,target:l,preventScrollReset:h,relative:a});return t.createElement("a",dS({},f,{href:r||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:n,target:l}))}));var wS=t.forwardRef((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.caseSensitive,o=void 0!==a&&a,s=e.className,u=void 0===s?"":s,l=e.end,c=void 0!==l&&l,h=e.style,f=e.to,d=e.children,p=pS(e,yS),v=_e(f,{relative:p.relative}),y=me(),m=t.useContext(ce),g=t.useContext(fe).navigator,k=g.encodeLocation?g.encodeLocation(v).pathname:v.pathname,_=y.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;o||(_=_.toLowerCase(),b=b?b.toLowerCase():null,k=k.toLowerCase());var w,x=_===k||!c&&_.startsWith(k)&&"/"===_.charAt(k.length),E=null!=b&&(b===k||!c&&b.startsWith(k)&&"/"===b.charAt(k.length)),C=x?i:void 0;w="function"===typeof u?u({isActive:x,isPending:E}):[u,x?"active":null,E?"pending":null].filter(Boolean).join(" ");var S="function"===typeof h?h({isActive:x,isPending:E}):h;return t.createElement(bS,dS({},p,{"aria-current":C,className:w,ref:n,style:S,to:f}),"function"===typeof d?d({isActive:x,isPending:E}):d)}));var xS,ES;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(xS||(xS={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ES||(ES={}));var CS=n(184),SS=function(){return(0,CS.jsx)("main",{className:"flex items-center justify-center h-screen",children:(0,CS.jsx)("section",{children:(0,CS.jsxs)("div",{className:"bg-white p-6 shadow-md rounded-md",children:[(0,CS.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Nim"}),(0,CS.jsx)("div",{className:"mb-4",children:(0,CS.jsx)(bS,{to:"/login",className:"block text-gray-700 font-medium",children:"Login"})}),(0,CS.jsx)("div",{className:"mb-4",children:(0,CS.jsx)(bS,{to:"/signup",className:"block text-gray-700 font-medium",children:"Sign up"})})]})})})},TS=function(e){var t=e.onClick,n=e.label;return(0,CS.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:t,children:n})},IS=function(e){var n=l((0,t.useState)(null),2),r=n[0],i=n[1];return(0,t.useEffect)((function(){var t=function(){var t=Be(ze().mark((function t(){var n;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return n=zC(uC(hS,"users"),BC("userId","==",e)),t.next=5,iS(n);case 5:t.sent.forEach((function(e){i(e.data())}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),r},NS=function(e){var t=e.playerId,n=e.email,r=IS(t);return r?(0,CS.jsxs)("p",{children:["Player: ",r.screenName]}):(0,CS.jsxs)("p",{children:["Email: ",n]})},PS=function(e){var t=e.games,n=e.joinGame;return(0,CS.jsx)("div",{children:t.map((function(e){return(0,CS.jsxs)("div",{className:"mb-4",children:[(0,CS.jsxs)("h3",{className:"font-bold mb-2",children:["Game ID: ",e.key]}),e.player_1_ID&&(0,CS.jsx)(NS,{playerId:e.player_1_ID,email:e.player_1_email}),e.player_2_ID&&(0,CS.jsx)(NS,{playerId:e.player_2_ID,email:e.player_2_email}),"waiting"===e.status&&(0,CS.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:function(){return n(e.key)},children:"Join Game"})]},e.key)}))})},RS=function(e){var t=e.text;return(0,CS.jsx)("h2",{className:"text-xl font-semibold mb-4",children:t})},AS=function(e){var t=e.isLoggedIn,n=e.user,r=(ke(),fS(n)),i=r.activeGames,a=r.waitingGames,o=r.createGame,s=r.joinGame;return(0,CS.jsx)("div",{className:"min-h-screen bg-gray-100 py-8",children:(0,CS.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:t?(0,CS.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,CS.jsx)("div",{className:"my-8",children:(0,CS.jsx)(TS,{onClick:o,label:"Create Game"})}),(0,CS.jsxs)("div",{className:"mt-8",children:[(0,CS.jsx)(RS,{text:"Waiting Games:"}),(0,CS.jsx)(PS,{games:a,joinGame:s})]}),(0,CS.jsxs)("div",{children:[(0,CS.jsx)(RS,{text:"Active Games:"}),(0,CS.jsx)(PS,{games:i})]})]}):(0,CS.jsx)(SS,{})})})},DS=function(){var e=ke(),n=l((0,t.useState)(""),2),r=n[0],i=n[1],a=l((0,t.useState)(""),2),o=a[0],s=a[1],u=function(){var t=Be(ze().mark((function t(n){return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,th(lS,r,o).then((function(t){var n=t.user;console.log(n),e("/login")})).catch((function(e){var t=e.code,n=e.message;console.log(t,n)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,CS.jsx)("main",{className:"flex items-center justify-center h-screen",children:(0,CS.jsx)("section",{children:(0,CS.jsxs)("div",{className:"bg-white p-6 shadow-md rounded-md",children:[(0,CS.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Nim"}),(0,CS.jsxs)("form",{onSubmit:u,children:[(0,CS.jsxs)("div",{className:"mb-4",children:[(0,CS.jsx)("label",{htmlFor:"email-address",className:"block text-gray-700 font-medium",children:"Email address"}),(0,CS.jsx)("input",{type:"email",label:"Email address",value:r,onChange:function(e){return i(e.target.value)},required:!0,placeholder:"Email address",className:"w-full border rounded-md px-3 py-2 mt-1"})]}),(0,CS.jsxs)("div",{className:"mb-4",children:[(0,CS.jsx)("label",{htmlFor:"password",className:"block text-gray-700 font-medium",children:"Password"}),(0,CS.jsx)("input",{type:"password",label:"Create password",value:o,onChange:function(e){return s(e.target.value)},required:!0,placeholder:"Password",className:"w-full border rounded-md px-3 py-2 mt-1"})]}),(0,CS.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md cursor-pointer",children:"Sign up"})]}),(0,CS.jsxs)("p",{className:"text-sm text-gray-700 text-center",children:["Already have an account?"," ",(0,CS.jsx)(wS,{to:"/login",className:"text-blue-600",children:"Sign in"})]})]})})})},OS=function(e){var n=e.handleUserLogin,r=ke(),i=l((0,t.useState)(""),2),a=i[0],o=i[1],s=l((0,t.useState)(""),2),u=s[0],c=s[1];return(0,CS.jsx)("main",{className:"flex items-center justify-center h-screen",children:(0,CS.jsx)("section",{children:(0,CS.jsxs)("div",{className:"bg-white p-6 shadow-md rounded-md",children:[(0,CS.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Nim"}),(0,CS.jsxs)("form",{onSubmit:function(e){e.preventDefault(),/\S+@\S+\.\S+/.test(a)?rh(lS,a,u).then((function(e){var t=e.user;n(t),r("/"),console.log(t)})).catch((function(e){var t=e.code,n=e.message;console.log(t,n)})):console.error("Invalid email format")},children:[(0,CS.jsxs)("div",{className:"mb-4",children:[(0,CS.jsx)("label",{htmlFor:"email-address",className:"block text-gray-700 font-medium",children:"Email address"}),(0,CS.jsx)("input",{id:"email-address",name:"email",type:"email",required:!0,placeholder:"Email address",className:"w-full border rounded-md px-3 py-2 mt-1",onChange:function(e){return o(e.target.value)}})]}),(0,CS.jsxs)("div",{className:"mb-4",children:[(0,CS.jsx)("label",{htmlFor:"password",className:"block text-gray-700 font-medium",children:"Password"}),(0,CS.jsx)("input",{id:"password",name:"password",type:"password",required:!0,placeholder:"Password",className:"w-full border rounded-md px-3 py-2 mt-1",onChange:function(e){return c(e.target.value)}})]}),(0,CS.jsx)("div",{className:"mb-4",children:(0,CS.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md cursor-pointer",children:"Login"})})]}),(0,CS.jsxs)("p",{className:"text-sm text-gray-700 text-center",children:["No account yet?"," ",(0,CS.jsx)(wS,{to:"/signup",className:"text-blue-600",children:"Sign up"})]})]})})})},LS=function(e){var t=e.isLoggedIn,n=e.onLogout,r=e.isMenuOpen,i=e.handleSidebarClose;return(0,CS.jsx)("div",{className:"fixed left-0 top-0 bottom-0 bg-gray-800 w-64 p-4 ".concat(r?"sidebar-open":"sidebar-closed"),style:{zIndex:20},children:(0,CS.jsx)("nav",{className:"space-y-4",children:t?(0,CS.jsx)("button",{className:"text-white text-lg font-semibold py-2 px-4 rounded-md hover:bg-gray-700 transition-colors",onClick:function(){n(),i()},children:"Logout"}):(0,CS.jsxs)(CS.Fragment,{children:[(0,CS.jsx)(bS,{to:"/login",className:"text-white text-lg font-semibold py-2 px-4 rounded-md hover:bg-gray-700 transition-colors",onClick:i,children:"Login"}),(0,CS.jsx)(bS,{to:"/signup",className:"text-white text-lg font-semibold py-2 px-4 rounded-md hover:bg-gray-700 transition-colors",onClick:i,children:"Sign Up"})]})})})},MS=function(e){var n=e.isLoggedIn,r=e.onLogout,i=l((0,t.useState)(!1),2),a=i[0],o=i[1];return(0,CS.jsxs)("header",{className:"py-4 px-6 bg-gray-900 text-white",children:[(0,CS.jsxs)("div",{className:"flex justify-between items-center",children:[(0,CS.jsx)(bS,{to:"/",className:"flex items-center space-x-2",children:(0,CS.jsx)("h1",{className:"text-xl font-semibold",children:"Nim"})}),(0,CS.jsx)("div",{className:"md:hidden",children:(0,CS.jsx)("button",{className:"text-white hover:text-gray-200 transition-colors",onClick:function(){o(!a)},children:(0,CS.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a?(0,CS.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):(0,CS.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})})}),(0,CS.jsx)("nav",{className:"hidden md:flex space-x-4 ".concat(a?"flex justify-end":"hidden"),children:n?(0,CS.jsx)("button",{className:"bg-transparent hover:bg-white text-white hover:text-gray-900 border border-white hover:border-transparent rounded-md px-4 py-2 transition-colors",onClick:r,children:"Logout"}):(0,CS.jsxs)(CS.Fragment,{children:[(0,CS.jsx)(bS,{to:"/login",className:"bg-white text-gray-900 px-4 py-2 rounded-md hover:bg-gray-100 transition-colors",children:"Login"}),(0,CS.jsx)(bS,{to:"/signup",className:"bg-white text-gray-900 px-4 py-2 rounded-md hover:bg-gray-100 transition-colors",children:"Sign Up"})]})})]}),(0,CS.jsx)("div",{className:"sidebar md:hidden",children:(0,CS.jsx)(LS,{isLoggedIn:n,onLogout:r,isMenuOpen:a,handleSidebarClose:function(){return o(!1)}})})]})},FS=function(e){var t=e.gameData,n=function(){if(t){var e=t.piles.reduce((function(e,t){return e+t}),0);return 1===e}};return(0,CS.jsx)("div",{children:n()&&(0,CS.jsxs)("div",{className:"mt-4",children:[(0,CS.jsx)("h3",{className:"font-bold",children:"Game Over!"}),(0,CS.jsxs)("p",{className:"mt-2",children:[t&&n()?"player_1"===t.currentPlayer?"Player 2":"Player 1":null," wins!"]})]})})},US=FS,jS=function(e){var t=e.winner;return(0,CS.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,CS.jsxs)("div",{className:"bg-white p-8 rounded-lg",children:[(0,CS.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Game Over"}),t?(0,CS.jsxs)("p",{className:"text-xl mb-4",children:["Player ",t," wins!"]}):(0,CS.jsx)("p",{className:"text-xl mb-4",children:"It's a tie!"})]})})};function VS(e){var n=l((0,t.useState)(null),2),r=n[0],i=n[1],a=l((0,t.useState)([]),2),o=a[0],s=a[1],u=l((0,t.useState)(!1),2),c=u[0],f=u[1],d=l((0,t.useState)(null),2),p=d[0],v=d[1],y=function(e){var n=l((0,t.useState)(null),2),r=n[0],i=n[1],a=l((0,t.useState)(null),2),o=a[0],s=a[1];return(0,t.useEffect)((function(){var t=xu(yu(cS,"games/".concat(e)),(function(e){var t=e.val();i(t),s(t.currentPlayer)}));return function(){return t()}}),[e]),{gameData:r,currentPlayer:o,updateGameData:function(t){gu(yu(cS,"games/".concat(e)),t)}}}(e),m=y.gameData,g=y.currentPlayer,k=y.updateGameData;(0,t.useEffect)((function(){if(b()){f(!0);var e="player_1"===m.currentPlayer?2:1;v(e)}}),[m,g]);var _=function(){return m?"player_1"===g?m.player_1_ID===lS.currentUser.uid:m.player_2_ID===lS.currentUser.uid:(console.log("Game has not started yet!"),!1)},b=function(){if(m){var e=m.piles.reduce((function(e,t){return e+t}),0);return 1===e}};return{gameData:m,currentPlayer:g,handlePlay:function(){if(_()){if(null!==r&&null!==o){var e=m.piles[r]-o,t=h(m.piles);t[r]=e;var n=Ve(Ve({},m),{},{piles:t,currentPlayer:"player_1"===g?"player_2":"player_1"});k(n),i(null),s([])}}else console.log("Not your turn!")},selectedPile:r,selectedSticks:o,handleSticksClick:function(e,t){i(e),s(t)},getHighlightedSticks:function(){if(null===r||0===o.length)return[];for(var e=[],t=0;t<o;t++)e.push(t+1);return e},checkGameStatus:b,isCurrentPlayer:_,winner:p,showNewGamePopup:c,updateGameData:k}}var zS=function(e){e.stickIndex;var t=e.onClick,n=e.highlighted,r=e.disabled;return(0,CS.jsx)("button",{onClick:t,className:"nim-stick ".concat(n?"highlighted":""," ").concat(r?"disabled":""),disabled:r})},qS=function(e){var t=e.pileIndex,n=e.pileSize,r=e.selectedPile,i=(e.selectedSticks,e.handleSticksClick),a=e.isCurrentPlayer,o=e.getHighlightedSticks,s=function(e){return t===r&&o().includes(e)};return(0,CS.jsx)("div",{className:"mb-4 flex items-center justify-center",children:Array.from(Array(n).keys()).map((function(e){var n=e+1;return(0,CS.jsx)(zS,{stickIndex:n,onClick:function(){return i(t,n)},highlighted:s(n),disabled:!a()},n)}))})},BS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},HS=t.createContext&&t.createContext(BS),WS=function(){return WS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},WS.apply(this,arguments)},KS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function GS(e){return e&&e.map((function(e,n){return t.createElement(e.tag,WS({key:n},e.attr),GS(e.child))}))}function QS(e){return function(n){return t.createElement(YS,WS({attr:WS({},e.attr)},n),GS(e.child))}}function YS(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,s=KS(e,["attr","size","title"]),u=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",WS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:WS(WS({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==HS?t.createElement(HS.Consumer,null,(function(e){return n(e)})):n(BS)}function $S(e){return QS({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M290.59 192c-20.18 0-106.82 1.98-162.59 85.95V192c0-52.94-43.06-96-96-96-17.67 0-32 14.33-32 32s14.33 32 32 32c17.64 0 32 14.36 32 32v256c0 35.3 28.7 64 64 64h176c8.84 0 16-7.16 16-16v-16c0-17.67-14.33-32-32-32h-32l128-96v144c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V289.86c-10.29 2.67-20.89 4.54-32 4.54-61.81 0-113.52-44.05-125.41-102.4zM448 96h-64l-64-64v134.4c0 53.02 42.98 96 96 96s96-42.98 96-96V32l-64 64zm-72 80c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16zm80 0c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16z"}}]})(e)}function XS(e){return QS({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M298.06,224,448,277.55V496a16,16,0,0,1-16,16H368a16,16,0,0,1-16-16V384H192V496a16,16,0,0,1-16,16H112a16,16,0,0,1-16-16V282.09C58.84,268.84,32,233.66,32,192a32,32,0,0,1,64,0,32.06,32.06,0,0,0,32,32ZM544,112v32a64,64,0,0,1-64,64H448v35.58L320,197.87V48c0-14.25,17.22-21.39,27.31-11.31L374.59,64h53.63c10.91,0,23.75,7.92,28.62,17.69L464,96h64A16,16,0,0,1,544,112Zm-112,0a16,16,0,1,0-16,16A16,16,0,0,0,432,112Z"}}]})(e)}function JS(e){return QS({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M327.1 96c-89.97 0-168.54 54.77-212.27 101.63L27.5 131.58c-12.13-9.18-30.24.6-27.14 14.66L24.54 256 .35 365.77c-3.1 14.06 15.01 23.83 27.14 14.66l87.33-66.05C158.55 361.23 237.13 416 327.1 416 464.56 416 576 288 576 256S464.56 96 327.1 96zm87.43 184c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24 13.26 0 24 10.74 24 24 0 13.25-10.75 24-24 24z"}}]})(e)}function ZS(e){return QS({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M575.92 76.6c-.01-8.13-3.02-15.87-8.58-21.8-3.78-4.03-8.58-9.12-13.69-14.5 11.06-6.84 19.5-17.49 22.18-30.66C576.85 4.68 572.96 0 567.9 0H447.92c-70.69 0-128 57.31-128 128H160c-28.84 0-54.4 12.98-72 33.11V160c-48.53 0-88 39.47-88 88v56c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16v-56c0-13.22 6.87-24.39 16.78-31.68-.21 2.58-.78 5.05-.78 7.68 0 27.64 11.84 52.36 30.54 69.88l-25.72 68.6a63.945 63.945 0 0 0-2.16 37.99l24.85 99.41A15.982 15.982 0 0 0 107.02 512h65.96c10.41 0 18.05-9.78 15.52-19.88l-26.31-105.26 23.84-63.59L320 345.6V496c0 8.84 7.16 16 16 16h64c8.84 0 16-7.16 16-16V318.22c19.74-20.19 32-47.75 32-78.22 0-.22-.07-.42-.08-.64V136.89l16 7.11 18.9 37.7c7.45 14.87 25.05 21.55 40.49 15.37l32.55-13.02a31.997 31.997 0 0 0 20.12-29.74l-.06-77.71zm-64 19.4c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16z"}}]})(e)}function eT(e){return QS({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M575.81 217.98C572.64 157.41 518.28 112 457.63 112h-9.37c-52.82 0-104.25-16.25-147.74-46.24-41.99-28.96-96.04-41.62-153.21-28.7C129.3 41.12-.08 78.24 0 224c.04 70.95 38.68 132.8 95.99 166.01V464c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16v-54.26c15.36 3.96 31.4 6.26 48 6.26 5.44 0 10.68-.73 16-1.18V464c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16v-59.43c14.24-5.06 27.88-11.39 40.34-19.51C342.07 355.25 393.86 336 448.46 336c25.48 0 16.01-.31 23.05-.78l74.41 136.44c2.86 5.23 8.3 8.34 14.05 8.34 1.31 0 2.64-.16 3.95-.5 7.09-1.8 12.05-8.19 12.05-15.5 0 0 .14-240.24-.16-246.02zM463.97 248c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24zm80 153.25l-39.86-73.08c15.12-5.83 28.73-14.6 39.86-25.98v99.06z"}}]})(e)}function tT(e){return QS({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}var nT={cat:(0,CS.jsx)($S,{}),dog:(0,CS.jsx)(XS,{}),fish:(0,CS.jsx)(JS,{}),horse:(0,CS.jsx)(ZS,{}),kiwi:(0,CS.jsx)(eT,{})},rT=function(e){var n=e.player1,r=e.player2,i=l((0,t.useState)(null),2),a=i[0],o=i[1],s=l((0,t.useState)(null),2),u=s[0],c=s[1];return(0,t.useEffect)((function(){var e=function(){var e=Be(ze().mark((function e(t,n){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zC(uC(hS,"users"),BC("userId","==",t)),e.next=3,iS(r);case 3:e.sent.forEach((function(e){n(e.data())}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();n&&e(n,o),r&&e(r,c)}),[n,r]),(0,CS.jsxs)("div",{className:"game-header",children:[(0,CS.jsxs)("div",{className:"player-info",children:[(0,CS.jsx)("span",{className:"player-label",children:"Player 1:"}),a&&(0,CS.jsx)(HS.Provider,{value:{size:"2em"},children:(0,CS.jsx)("div",{className:"avatar",children:nT[a.selectedAvatar]||(0,CS.jsx)(tT,{size:"2em"})})}),(0,CS.jsx)("span",{className:"player-name",children:null===a||void 0===a?void 0:a.screenName})]}),(0,CS.jsxs)("div",{className:"player-info",children:[(0,CS.jsx)("span",{className:"player-label",children:"Player 2:"}),u?(0,CS.jsxs)(CS.Fragment,{children:[(0,CS.jsx)(HS.Provider,{value:{size:"2em"},children:(0,CS.jsx)("div",{className:"avatar",children:nT[u.selectedAvatar]||(0,CS.jsx)(tT,{size:"2em"})})}),(0,CS.jsx)("span",{className:"player-name",children:null===u||void 0===u?void 0:u.screenName})]}):(0,CS.jsx)("span",{className:"waiting-text",children:"Waiting..."})]})]})},iT=rT,aT=function(e){var t=e.gameData,n=e.selectedPile,r=e.selectedSticks,i=e.handleSticksClick,a=e.isCurrentPlayer,o=e.getHighlightedSticks;return(0,CS.jsxs)("div",{children:[(0,CS.jsx)(iT,{player1:t.player_1_ID,player2:t.player_2_ID}),(0,CS.jsxs)("div",{className:"mt-4",children:[(0,CS.jsx)("h3",{className:"font-bold mb-2",children:"Piles:"}),t.piles.map((function(e,t){return(0,CS.jsx)(qS,{pileIndex:t,pileSize:e,selectedPile:n,selectedSticks:r,handleSticksClick:i,isCurrentPlayer:a,getHighlightedSticks:o},t)}))]})]})},oT=function(e){var t=e.currentPlayer;return t?(0,CS.jsxs)("h2",{className:"text-2xl font-semibold mb-4",children:["Current Player: Player ","player_1"===t?1:2]}):null},sT=function(){var e=VS(function(){var e=t.useContext(pe).matches,n=e[e.length-1];return n?n.params:{}}().gameId),n=e.gameData,r=e.currentPlayer,i=e.handlePlay,a=e.selectedPile,o=e.selectedSticks,s=e.handleSticksClick,u=e.getHighlightedSticks,l=e.checkGameStatus,c=e.isCurrentPlayer,h=e.winner,f=e.showNewGamePopup;return(0,CS.jsxs)("div",{className:"min-h-screen bg-gray-100 py-8",children:[(0,CS.jsxs)("div",{className:"max-w-md mx-auto px-4",children:[(0,CS.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Nim Game"}),(0,CS.jsx)(oT,{currentPlayer:r}),n&&(0,CS.jsx)(aT,{gameData:n,selectedPile:a,selectedSticks:o,handleSticksClick:s,isCurrentPlayer:c,getHighlightedSticks:u}),l()&&(0,CS.jsx)(US,{winner:h}),!l()&&(0,CS.jsx)("button",{onClick:i,disabled:null===a||0===o.length||!c(),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg mt-4",children:"Play"})]}),f&&(0,CS.jsx)(jS,{winner:h})]})},uT=function(e){var t=e.selectedAvatar,n=e.onSelectAvatar,r=[{name:"Cat",icon:(0,CS.jsx)($S,{}),value:"cat"},{name:"Dog",icon:(0,CS.jsx)(XS,{}),value:"dog"},{name:"Fish",icon:(0,CS.jsx)(JS,{}),value:"fish"},{name:"Horse",icon:(0,CS.jsx)(ZS,{}),value:"horse"},{name:"Kiwi Bird",icon:(0,CS.jsx)(eT,{}),value:"kiwi"}];return(0,CS.jsx)("div",{className:"flex items-center justify-center space-x-4",children:r.map((function(e){return(0,CS.jsx)("div",{className:"cursor-pointer rounded-full p-2 ".concat(t===e.value?"bg-blue-500":"bg-gray-300"),onClick:function(){return n(e.value)},children:e.icon},e.value)}))})},lT=(0,t.createContext)(),cT=function(e){var n=e.children,r=l((0,t.useState)(null),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){var e=lS.onAuthStateChanged((function(e){a(e)}));return function(){return e()}}),[]),(0,CS.jsx)(lT.Provider,{value:{user:i},children:n})},hT=function(){var e=(0,t.useContext)(lT).user,n=l((0,t.useState)(""),2),r=n[0],i=n[1],a=l((0,t.useState)("cat"),2),o=a[0],s=a[1];(0,t.useEffect)((function(){var t=function(){var t=Be(ze().mark((function t(){var n,r,a;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return n=lC(hS,"users",e.uid),t.prev=3,t.next=6,nS(n);case 6:(r=t.sent).exists()&&(a=r.data(),i(a.screenName),s(a.selectedAvatar||"cat")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("Error fetching user profile: ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var u=function(){var t=Be(ze().mark((function t(n){var i,a;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e){t.next=4;break}return console.error("User not logged in"),t.abrupt("return");case 4:return i=lC(hS,"users",e.uid),a={screenName:r,selectedAvatar:o,userId:e.uid},t.prev=6,t.next=9,nS(i);case 9:if(!t.sent.exists()){t.next=16;break}return t.next=13,aS(i,a,{merge:!0});case 13:console.log("Document successfully updated!"),t.next=19;break;case 16:return t.next=18,aS(i,a);case 18:console.log("Document successfully written!");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),console.error("Error writing document: ",t.t0);case 24:case"end":return t.stop()}}),t,null,[[6,21]])})));return function(e){return t.apply(this,arguments)}}();return(0,CS.jsxs)("div",{children:[(0,CS.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"User Profile"}),(0,CS.jsxs)("form",{onSubmit:u,children:[(0,CS.jsxs)("div",{className:"mb-4",children:[(0,CS.jsx)("label",{className:"block text-sm font-bold mb-1",htmlFor:"screenName",children:"Screen Name:"}),(0,CS.jsx)("input",{type:"text",id:"screenName",value:r,onChange:function(e){i(e.target.value)},className:"w-full border rounded px-3 py-2",required:!0})]}),(0,CS.jsxs)("div",{className:"mb-4",children:[(0,CS.jsx)("label",{className:"block text-sm font-bold mb-1",htmlFor:"avatar",children:"Select an Avatar:"}),(0,CS.jsx)(uT,{selectedAvatar:o,onSelectAvatar:function(e){s(e)}})]}),(0,CS.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Profile"})]})]})};var fT=function(){var e=l((0,t.useState)(!1),2),n=e[0],r=e[1],i=l((0,t.useState)(null),2),a=i[0],o=i[1];return(0,t.useEffect)((function(){var e=function(e,t,n,r){return Mt(e).onAuthStateChanged(t,n,r)}(lS,(function(e){e?(o(e),r(!0)):(o(null),r(!1))}));return function(){return e()}}),[]),(0,CS.jsx)(gS,{children:(0,CS.jsxs)("div",{children:[(0,CS.jsx)(MS,{isLoggedIn:n,onLogout:function(){(function(e){return Mt(e).signOut()})(lS).then((function(){o(null),r(!1)})).catch((function(e){}))}}),(0,CS.jsx)("section",{children:(0,CS.jsxs)(Le,{children:[(0,CS.jsx)(De,{path:"/",element:(0,CS.jsx)(AS,{isLoggedIn:n,user:a})}),(0,CS.jsx)(De,{exact:!0,path:"/profile",element:(0,CS.jsx)(hT,{user:a})}),(0,CS.jsx)(De,{path:"/signup",element:(0,CS.jsx)(DS,{})}),(0,CS.jsx)(De,{path:"/login",element:(0,CS.jsx)(OS,{handleUserLogin:function(e,t){rh(lS,e,t).then((function(e){var t=e.user;o(t),r(!0)})).catch((function(e){var t=e.code,n=e.message;console.error(t,n)}))}})}),(0,CS.jsx)(De,{path:"/home",element:(0,CS.jsx)(AS,{isLoggedIn:n,user:a})}),(0,CS.jsx)(De,{path:"/game/:gameId",element:(0,CS.jsx)(sT,{user:a})})]})})]})})};i.createRoot(document.getElementById("root")).render((0,CS.jsx)(t.StrictMode,{children:(0,CS.jsx)(cT,{children:(0,CS.jsx)(fT,{})})}))}()}();
//# sourceMappingURL=main.42f1afac.js.map